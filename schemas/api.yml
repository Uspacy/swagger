openapi: '3.0.1'
info:
  description: |
    This is [Uspacy](https://uspacy.com)  API documentation. You can find out more about Swagger at [http://swagger.io](http://swagger.io) or on [irc.freenode.net, #swagger](http://swagger.io/irc/).
    or on [irc.freenode.net, #swagger](http://swagger.io/irc/).

    # Introduction
    To use this API you need to get Bearer token. To get Bearer token you have two options:
      - sign in on user's Uspacy using email and password
      - create Marketplace application and get token in callback after your application was installed by user
    
    # SDKs and boilerplates
    We provide SDKs for different languages to simplify integration with Uspacy API. You can find them on [Uspacy GitHub](https://github.com/Uspacy/)
    We have also prepared a few boilerplates to help you start developing your application
      - [Uspacy Marketplace application boilerplate](https://github.com/Uspacy/app-laravel-template) - Laravel application with Uspacy authentication and token refreshment
      - [Uspacy Golang SDK](https://github.com/Uspacy/uspacy-go-sdk) – Golang SDK for Uspacy API, in active development
      - [Uspacy TypeScript SDK](https://github.com/Uspacy/uspacy-sdk) – TypeScript SDK for Uspacy API, deprecated

    # Marketplace applications development
    To develop Marketplace application you need to create an application in Uspacy Marketplace. You can do it via request to [Uspacy support](mailto:support@uspacy.com).
    You will receive ```client_id``` and ```client_secret``` for your application. You will also need to provide ```callback_uri``` for your application.
    After user installs your application you will receive POST request with json in callback. It will contain ```jwt``` token and ```refreshToken```.
    Example of request:
    ```json
    {
      "expireInSeconds": 720,
      "jwt": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjEyMzEyMzEyMyIsImZpcnN0TmFtZSI6IlN0YXMiLCJsYXN0TmFtZSI6IlJhcmFuZXRza3lpIiwiZW1haWwiOiJyYXIuc3Rhc0BnbWFpbC5jb20iLCJyb2xlcyI6WyJVU0VSIiwiQURNSU4iLCJPV05FUiJdfQ.au16u5LHJqdvhiPrpXDhN4NZn8Cae09I6BEmed7mt8w",
      "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjEyMzEyMzEyMyIsImZpcnN0TmFtZSI6IlN0YXMiLCJsYXN0TmFtZSI6IlJhcmFuZXRza3lpIiwiZW1haWwiOiJyYXIuc3Rhc0BnbWFpbC5jb20iLCJyb2xlcyI6WyJVU0VSIiwiQURNSU4iLCJPV05FUiJdfQ.au16u5LHJqdvhiPrpXDhN4NZn8Cae09I6BEmed7mt8w"
    }
    ```
    You need to save ```jwt``` and ```refreshToken``` in your database. You will need to use ```jwt``` to make requests to Uspacy API. ```refreshToken``` is used to refresh ```jwt``` token when it expires. You should refresh ```jwt``` token before it expires. You can do it by making POST request to ```https://auth.uspacy.com/api/v1/auth/refresh_token/``` with ```refreshToken``` in body. You will receive new ```jwt``` and ```refreshToken``` in response. You need to save new ```jwt``` and ```refreshToken``` in your database.


  title: Uspacy api
  version: v1
servers:
  - url: https://{domain}.uspacy.ua
    description: Ukrainian server
  - url: https://{domain}.uspacy.eu
    description: EU server
  - url: https://{domain}.uspacy.com.br
    description: Brazilian server
  - url: https://{domain}.uspacy.com
    description: International server
tags:
  - name: authService
  - name: usersService
  - name: departments (usersService)
  - name: roles (usersService)
  - name: invite (usersService)
  - name: newsFeedService
  - name: tasksService
  - name: filesService
  - name: commentsService
  - name: groupService
  - name: crmService
  - name: searchService
  - name: fileImport
  - name: appService

paths:

  # auth begin
  /auth/v1/auth/sign_in/:
    post:
      summary: Sign in
      description: Sign in user by email, password. Returns token, refreshToken
      tags:
        - authService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignInDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
        '403':
          description: Access Denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: object
                    properties:
                      text:
                        type: array
                        items:
                          type: string
                          enum:
                            - You need to provide a verification code
                            - Incorrect verification code
                            - Attempts count exceeded. Try again later
                  status:
                    type: boolean
                    example: true
  /auth/v1/auth/confirm_email/:
    post:
      summary: Confirm user email
      description: Confirm email user. Returns token, refreshToken
      tags:
        - authService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConfirmEmailDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
  /auth/v1/auth/refresh_token/:
    post:
      summary: Refresh token
      description: refreshToken exprired token. Returns new token, refreshToken
      tags:
        - authService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
  /auth/v1/auth/register/:
    post:
      summary: New user registration by invitation
      description: New user registration by invitation. Returns token, refreshToken
      tags:
        - authService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegistrationByInvitation'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
  /auth/v1/users/:
    post:
      summary: Sign up
      description: Sign up user by firstName, lastName, email, password. Available only for users with admin permissions. Returns created user
      tags:
        - authService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignUpDto'
      responses:
        '201':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/User'
                  - type: object
                    properties:
                      position:
                        example: ''
                      phone:
                        example: "[]"
                      birthday:
                        example: 0
                      roles:
                        example: '["Employee"]'
                      departmentsIds:
                        example: "[]"
                      socialMedia:
                        example: "[]"

          description: Created
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /auth/v1/users/forgot_password/:
    post:
      summary: Reset password
      description: Reset password. Available to unauthorized users.
      tags:
        - authService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EmailPasswordDto'
      responses:
        '200':
          description: OK
  /auth/v1/users/reset_password/:
    post:
      summary: Reset password
      description: Reset password. Available to unauthorized users.
      tags:
        - authService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EmailPasswordTokenDto'
      responses:
        '200':
          description: OK
  /auth/v1/users/{userId}/change_password/:
    patch:
      summary: Update user password
      parameters:
        - $ref: '#/components/parameters/userId'
      description: Update user password by id. Available only for users with admin permissions.
      tags:
        - authService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangePasswordDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /auth/v1/users/me/change_password/:
    patch:
      summary: Update password
      description: Update self password
      tags:
        - authService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangeSelfPasswordDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /auth/v1/users/check_email/:
    get:
      summary: Email existence check
      description: Email existence check.
      tags:
        - authService
      parameters:
        - $ref: '#/components/parameters/searchEmail'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: email already exist
        '204':
          $ref: '#/components/responses/NoContent'
      security:
        - bearerAuth: [ ]
  /auth/v1/portals/:
    get:
      description: Portal domain availability check.
      tags:
        - authService
      parameters:
        - $ref: '#/components/parameters/searchPortalDomain'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: success
        '422':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: object
                    properties:
                      domain:
                        type: array
                        items:
                          example: 'The domain has already been taken.'
                  status:
                    type: boolean
                    example: true
      security:
        - bearerAuth: [ ]
    post:
      description: Create portal
      tags:
        - authService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePortal'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Portal'

  # auth end


  # users begin
  /company/v1/users/:
    get:
      description: Get users list
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        # - $ref: '#/components/parameters/queryUsers'
        - $ref: '#/components/parameters/filterUsers'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/User'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /company/v1/users/{userId}/:
    parameters:
      - $ref: '#/components/parameters/userId'
    get:
      tags:
        - usersService
      description: Get user by id. Available only for authorized users
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      description: Update user data by id. Available only for authorized users
      tags:
        - usersService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /company/v1/users/{userId}/deactivate/:
    post:
      description: "Deactivate user by id. Available only for users with admin permissions. Returns user data with active: false"
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/userId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/User'
                  - type: object
                    properties:
                      active:
                        example: false
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /company/v1/users/{userId}/activate/:
    post:
      description: "Activate user by id. Available only for users with admin permissions. Returns user data with active: true"
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/userId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /company/v1/users/{userId}/update_roles/:
    patch:
      description: Update user roles by id. Available only for users with admin permissions. Returns user data with new roles
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/userId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateRolesDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /company/v1/users/{userId}/update_position/:
    patch:
      description: Update user position by id. Available only for users with admin permissions. Returns user data with new position
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/userId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserPosition'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]

  /company/v1/users/{userId}/settings/:
    get:
      tags:
        - usersService
      description: Get persinal settings by id. Available only for users with admin permissions
      parameters:
        - $ref: '#/components/parameters/userId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/personalSettings'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      description: Update personal settings by id. Available only for users with admin permissions.
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/userId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/personalSettings'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/personalSettings'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /company/v1/users/{userId}/twofa_status:
    get:
      description: Get two-factor authentication status by id. Available only for users with admin permissions.
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/userId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TwoFactorStatus'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /company/v1/users/{userId}/twofa_disable:
    patch:
      description: Disable two-factor authentication by id. Available only for users with admin permissions.
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/userId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TwoFactorStatusDisabled'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /company/v1/users/me/:
    get:
      tags:
        - usersService
      description: Get self profile. Available only for authorized users
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /company/v1/users/me/twofa_status:
    get:
      description: Get two-factor authentication status
      tags:
        - usersService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TwoFactorStatus'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /company/v1/users/me/twofa_enable:
    patch:
      description: Enable two-factor authentication in a two steps
      tags:
        - usersService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TwoFactorEnable'
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TwoFactorGetQr'
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TwoFactorStatusEnabled'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: object
                    properties:
                      text:
                        type: array
                        items:
                          example: 'The code has expired'
                  status:
                    type: boolean
                    example: true
      security:
        - bearerAuth: [ ]
  /company/v1/users/me/twofa_disable:
    patch:
      description: Disable two-factor authentication
      tags:
        - usersService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TwoFactorStatusDisabled'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]


  /company/v1/users/search/:
    get:
      description: Search
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/searchEmail'
        - $ref: '#/components/parameters/searchFirstName'
        - $ref: '#/components/parameters/searchLastName'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/User'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /company/v1/users/upload_avatar:
    post:
      description: Avatar upload
      tags:
        - usersService
      requestBody:
        content:
          multipart/form-data:
            schema:
              allOf:
                - type: object
                  required:
                    - avatar
                  properties:
                    avatar:
                      default: ''
                      format: binary
                    userId:
                      type: string
                      example: 2

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/User'
                  - type: object
                    properties:
                      responsibleId:
                        type: string
                        example: 2
                      denial:
                        type: boolean
                        example: true

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /company/v1/users/get_users_by_field/:
    post:
      description: Getting a list of users by filter. Available to unauthorized users.
      tags:
        - usersService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/getUsersByField'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/User'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /company/v1/users/me/settings/:
    get:
      tags:
        - usersService
      description: Get self profile. Available only for authorized users
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/personalSettings'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      description: Update self password
      tags:
        - usersService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/personalSettings'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/personalSettings'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  # users end

  # departments begin
  /company/v1/departments/:
    get:
      description: Get departments list
      tags:
        - departments (usersService)
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        # - $ref: '#/components/parameters/queryDepartments'
        - $ref: '#/components/parameters/filterDepartments'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Department'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      description: Create department. Available only for users with admin permissions
      tags:
        - departments (usersService)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DepartmentPatch'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Department'
                  - type: object
                    properties:
                      roles:
                        type: array
                        items:
                          type: string
                        example: "[]"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /company/v1/departments/{departmentId}/:
    parameters:
      - $ref: '#/components/parameters/departmentId'
    get:
      description: Get department by id
      tags:
        - departments (usersService)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Department'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      description:
        Update department data (set head department, move users, set parent department)
        Available only for head parent department or users with admin permissions. Returns updated department data
      tags:
        - departments (usersService)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DepartmentPatch'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Department'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      description:
        Delete department. Available only for users with admin permissions.
      tags:
        - departments (usersService)
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /company/v1/departments/{departmentId}/updateRoles/:
    patch:
      description: Update department roles by id. Available only for users with admin permissions. Returns department data with new roles
      tags:
        - departments (usersService)
      parameters:
        - $ref: '#/components/parameters/departmentId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateRolesDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Department'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]

  /company/v1/departments/{departmentId}/addUsers/:
    patch:
      description: Update department users by id. Available only for users with admin permissions.
      tags:
        - departments (usersService)
      parameters:
        - $ref: '#/components/parameters/departmentId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserIds'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Department'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /company/v1/departments/{departmentId}/deleteUsers/:
    patch:
      description: Update department users by id. Available only for users with admin permissions.
      tags:
        - departments (usersService)
      parameters:
        - $ref: '#/components/parameters/departmentId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserIds'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Department'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  # departments end

  # roles begin
  /company/v1/permissions/:
    get:
      description: Get permissions list. Only available to authorized users with the owner or administrator role.
      tags:
        - roles (usersService)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PermissionsList'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /company/v1/roles/:
    get:
      description: Get role list. Only available to authorized users with the owner or administrator role.
      tags:
        - roles (usersService)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/RoleList'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      description: Create role. Only available to authorized users with the owner or administrator role.
      tags:
        - roles (usersService)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RoleStore'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/NewRoleList'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /company/v1/roles/{roleId}/:
    parameters:
      - $ref: '#/components/parameters/roleId'
    get:
      description: Get role by id. Only available to authorized users with the owner or administrator role.
      tags:
        - roles (usersService)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/RoleList'
                  - type: object
                    properties:
                      permissions:
                        $ref: '#/components/schemas/PermissionsAction'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      description:
        Update role data. Only available to authorized users with the owner or administrator role.
      tags:
        - roles (usersService)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/RoleUpdate'
                - type: object
                  properties:
                    usersIds:
                      type: string
                      example:
                        - "1"
                        - "2"
                    departmentsIds:
                      type: string
                      example:
                        - "1"
                        - "2"

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/RoleList'
                  - type: object
                    properties:
                      permissions:
                        $ref: '#/components/schemas/PermissionsAction'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      description:
        Delete role. Only available to authorized users with the owner or administrator role.
      tags:
        - roles (usersService)
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  # roles end

  # invite begin
  /company/v1/users/check_invite/:
    get:
      description: Checking if an invitation exists.
      tags:
        - invite (usersService)
      parameters:
        - $ref: '#/components/parameters/searchEmail'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: success
        '422':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: object
                    properties:
                      email:
                        type: array
                        items:
                          example: 'Invitation canceled, contact your space partner'
                  status:
                    type: boolean
                    example: true
      security:
        - bearerAuth: [ ]
  /company/v1/invites/email:
    post:
      description: Create invites. Only available to authorized users with the owner or administrator role.
      tags:
        - invite (usersService)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InvitesStore'
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /company/v1/invites/email/batch:
    post:
      description: Create invites. Only available to authorized users with the owner or administrator role.
      tags:
        - invite (usersService)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InvitesBatchStore'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /company/v1/invites/email/{userId}/repeat_invitation:
    parameters:
      - $ref: '#/components/parameters/userId'

    patch:
      description:
        Resending an invitation. Only available to authorized users with the owner or administrator role.
      tags:
        - invite (usersService)

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /company/v1/invites/email/{userId}/:
    parameters:
      - $ref: '#/components/parameters/userId'

    delete:
      description:
        Delete invitation. Only available to authorized users with the owner or administrator role.
      tags:
        - invite (usersService)
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  # invite begin

  # newsfeed begin
  /newsfeed/v1/posts/:
    get:
      description: Get posts list
      tags:
        - newsFeedService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        - in: query
          name: q
          description: Text search pattern
          schema:
            type: string
          example: said
        - in: query
          name: group_id
          description: ID of the group to get posts for
          schema:
            type: array
            items:
              type: integer
              format: int64
          example: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Post'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      description: >
        Create post


        Use one of `fileIds` or `uploadId` to bind earlier uploaded files to the post that is going to be created.
      tags:
        - newsFeedService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePostDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Post'
                  - type: object
                    properties:
                      comments:
                        example: null
                      reactions:
                        example: null
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /newsfeed/v1/posts/{postId}/:
    parameters:
      - $ref: '#/components/parameters/postId'
    patch:
      description: Update post. Available only for author.
      tags:
        - newsFeedService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePostDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Post'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
    delete:
      description: Delete post. Available only for author or users with admin permissions.
      tags:
        - newsFeedService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  # newsfeed end

  # tasks begin
  /tasks/v1/tasks/:
    get:
      description: Get available tasks list
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: parent_id
        - in: query
          name: q
          description: Text search pattern
          schema:
            type: string
          example: expecting
        - allOf:
            - $ref: '#/components/parameters/filter_string_enum'
            - name: status
              example: [ "suspended", "not_planned" ]
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: setter_id
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: responsible_id
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: accomplices
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: group_id
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: stages
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: priority
        - allOf:
            - $ref: '#/components/parameters/filter_array_of_time_ranges'
            - name: deadline

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Task'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create task
      description: Create task
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateEditTaskDto'
                - type: object
                  properties:
                    fixed:
                      type: boolean
                      default: false
                      example: true
                    groupId:
                      description: Group ID
                      default: 'current group id'
                      type: string
                      example: 11
                    fileIds:
                      type: array
                      description: Defines the array of fileIds uploaded earlier that need to be bound to the post
                      items:
                        type: integer
                        format: int64
                    uploadId:
                      description: Defines the earlier uploaded file bundle that need to be bound to the post
                      type: string
                      format: uuid

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Task'
                  - type: object
                    properties:
                      groupId:
                        description: Group ID
                        default: 'current group id'
                        type: string
                        example: 11
                      comments:
                        example: null
                      reactions:
                        example: null

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/{taskId}/:
    parameters:
      - $ref: '#/components/parameters/taskId'
    get:
      description: Get task by id. Available only for authorized users and users who have access to task.
      tags:
        - tasksService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      description: Edit task by id. Available only for authorized users and task maker.
      tags:
        - tasksService
      requestBody:
        content:
          multipart/form-data:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateEditTaskDto'
                - type: object
                  properties:
                    archive:
                      type: boolean
                      default: false
                      example: true
                    fixed:
                      type: boolean
                      default: false
                      example: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      description: Delete task by id. Available only for authorized users and task maker.
      tags:
        - tasksService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/{taskId}/denial/:
    post:
      summary: Abandoning a task
      description: Abandoning a task
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/taskId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDenial'
      responses:
        '200':
          description: OK
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /tasks/v1/stages/:
    get:
      summary: Get kanban stages
      description: Get kanban stages
      tags:
        - tasksService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CanbanStage'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create kanban stage
      description: Create kanban stage
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateEditCanbanStageDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CanbanStage'
                  - type: object
                    properties:
                      id:
                        type: string
                        example: 2
                      afterId:
                        type: string
                        example: 1

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/stages/{stageId}/:
    get:
      summary: Get kanban stage by id
      description: Get kanban stage by id
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/stageId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CanbanStage'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      summary: Update kanban stage by id
      description: Update kanban stage by id
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/stageId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateEditCanbanStageDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CanbanStage'
                  - type: object
                    properties:
                      id:
                        type: string
                        example: 2
                      afterId:
                        type: string
                        example: 1

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete kanban stage by id
      description: Create kanban stage by id
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/stageId'
      responses:
        '204':
          description: No content

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/stages/{stageId}/moveTask/:
    post:
      description: Moving a task to stage
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/stageId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MoveTaskCanbanStageDto'
      responses:
        '200':
          description: OK
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /tasks/v1/tasks/{taskId}/checkList/:
    parameters:
      - $ref: '#/components/parameters/taskId'
    get:
      summary: Get checklist by task id
      description: Get checklist by task id. Available only for authorized users and users who have access to task.
      tags:
        - tasksService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  allOf:
                    - $ref: '#/components/schemas/CheckList'
                    - type: object
                      properties:
                        checkListItemIds:
                          type: array
                          items:
                            type: string
                          example: [ "2", "3" ]

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create checklist for task
      description: Create checklist for task. Available only for authorized users and users who have access to task.
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateUpdateCheckList'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CheckList'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/{taskId}/checkList/{checkListId}/:
    parameters:
      - $ref: '#/components/parameters/taskId'
      - $ref: '#/components/parameters/checkListId'
    patch:
      summary: Update checklist for task
      description: Update checklist for task
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateUpdateCheckList'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CreateUpdateCheckList'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete checklist from task by id
      description: Delete checklist from task by id
      tags:
        - tasksService
      responses:
        '204':
          description: No content

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/checkList/{checkListId}/:
    parameters:
      - $ref: '#/components/parameters/checkListId'
    get:
      summary: Get checklist items by id
      description: Get checklist items by id
      tags:
        - tasksService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  allOf:
                    - type: object
                      properties:
                        id:
                          type: string
                          description: checklist item id
                          example: 1
                    - $ref: '#/components/schemas/CheckListItem'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create checklist for task
      description: Create checklist for task
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CheckListItem'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      id:
                        type: string
                        description: checklist item id
                        example: 1
                  - $ref: '#/components/schemas/CheckListItem'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/checkList/{checkListId}/{checkListItemId}:
    parameters:
      - $ref: '#/components/parameters/checkListId'
      - $ref: '#/components/parameters/checkListItemId'
    delete:
      description: Delete item to checklist by id
      tags:
        - tasksService
      responses:
        '204':
          description: No content

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      description: Update checklist for task
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CheckListItem'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      id:
                        type: string
                        description: checklist item id
                        example: 1
                  - $ref: '#/components/schemas/CheckListItem'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /tasks/v1/tasks/massEdit/complete/:
    post:
      description: Bulk editing tasks
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MassEditIds'
      responses:
        '200':
          description: OK
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/massEdit/archive/:
    post:
      description: Bulk editing tasks
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MassEditIds'
      responses:
        '200':
          description: OK
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/massEdit/delete/:
    post:
      description: Bulk editing tasks
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MassEditIds'
      responses:
        '200':
          description: OK
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/transferToUser:
    post:
      description: Transfer tasks to another user. Available only for admin users.
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransferTask'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/TransferTasksSuccess'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /tasks/v1/transferToDepartment:
    post:
      description: Transfer tasks to department. Available only for admin users.
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransferTasksToDepartment'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/TransferTasksSuccess'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /tasks/v1/tasks/{taskId}/start/:
    patch:
      description: Take on a task. Available to users related to the task.
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/taskId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CreateEditTaskDto'
                  - type: object
                    properties:
                      status:
                        type: string
                        example: inWork
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/{taskId}/stop/:
    patch:
      description: Stopped the task. Available to users related to the task.
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/taskId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CreateEditTaskDto'
                  - type: object
                    properties:
                      status:
                        type: string
                        example: stopped
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/{taskId}/ready/:
    patch:
      description: Complete the task. Sets different statuses depending on who initiated the action. Available to users related to the task.
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/taskId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompleteComment'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CreateEditTaskDto'
                  - type: object
                    properties:
                      status:
                        type: string
                        example: ready
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/{taskId}/restart/:
    patch:
      description: Restart the task. Available to users related to the task.
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/taskId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CreateEditTaskDto'
                  - type: object
                    properties:
                      status:
                        type: string
                        example: scheduled
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/{taskId}/watch/:
    patch:
      description: Watch the task. Available to users related to the task.
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/taskId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CreateEditTaskDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/{taskId}/unwatch/:
    patch:
      description: Unwatch the task. Available to users related to the task.
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/taskId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CreateEditTaskDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /tasks/v1/settings/:
    get:
      description: Get available settings list
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskSettings'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    put:
      description: Update settings. Available only for admin users.
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/TaskSettings'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/TaskSettings'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  # tasks end

  # files begin

  /files/v1/files:
    get:
      description: Lists the file info
      tags:
        - filesService
      parameters:
        - $ref: '#/components/parameters/entityType'
        - $ref: '#/components/parameters/entityId'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/FileInfoDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      description: Upload one or more files
      tags:
        - filesService
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UploadContainer'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/FileInfoDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /files/v1/files?uploadId:
    get:
      description: Lists the file info
      tags:
        - filesService
      parameters:
        - in: query
          name: uploadId
          description: >
            Use this parameter instead of `entityType` and `entityId` to list the upload bundle
          schema:
            type: string
            format: uuid
          required: true
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/FileInfoDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /files/v1/files?entityIds[]:
    get:
      description: Lists the file info
      tags:
        - filesService
      parameters:
        - $ref: '#/components/parameters/entityType'
        - $ref: '#/components/parameters/entityIds'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      entityId:
                        type: array
                        items:
                          $ref: '#/components/schemas/FileInfoDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /files/v1/files/{id}:
    patch:
      description: Update the `entity_id` for one file
      tags:
        - filesService
      parameters:
        - in: path
          name: fileId
          schema:
            oneOf:
              - type: integer
                format: int64
              - type: string
                format: uuid
          required: true
          description: Numeric ID of the file to update or the UUID of the upload group
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                entityId:
                  type: integer
                  format: int64
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/FileInfoDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      description: Removes the uploaded file and info about it
      tags:
        - filesService
      parameters:
        - in: path
          name: fileId
          schema:
            type: integer
            format: int64
          required: true
          description: Numeric ID of the file to remove
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /files/v1/files?entityType&entityId:
    patch:
      description: >
        Update the `entity_id` for a group of files determined by `entityType` and `entityId`


        It's okay to specify the parameters in the request body instead of query.


        At the moment this is used internally to bind earlier uploaded files to an entity
      tags:
        - filesService
      parameters:
        - $ref: '#/components/parameters/entityType'
        - $ref: '#/components/parameters/entityId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                entityId:
                  type: integer
                  format: int64
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/FileInfoDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      description: >
        Removes the multiple files bound to the entity


        At the moment this is used internally to sync of files removal with posts
      tags:
        - filesService
      parameters:
        - $ref: '#/components/parameters/entityType'
        - $ref: '#/components/parameters/entityId'
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  # files end

  # comments begin

  /comments/v1/comments/:
    get:
      description: >
        Lists the comments related to some entity.
        `nextId` and `prevId` fields in response help to do pagination.
        For more information see the description of `nextId` and `prevId` fields in the response.
      tags:
        - commentsService
      parameters:
        - name: entity_type
          in: query
          allOf:
            - $ref: '#/components/parameters/entityType'
            - description: >
                Entity type name.
                If it's `comment`, record represents the child comment and `entityId` represents the parent comment ID.
                And only the child comments are being sent in this case.
                Use along with `childList` and `lastId` to paginate the child comments.
        - $ref: '#/components/parameters/entityId'
        - allOf:
            - $ref: '#/components/parameters/list'
            - description: >
                Use this to define the number of top level comments to retrieve.
                Retrieve all if missing or retrieve the rest if `nextId` is present.
            - example: 3
            - default: 3
            - required: false
        - $ref: '#/components/parameters/childList'
        - $ref: '#/components/parameters/nextId'
        - $ref: '#/components/parameters/lastId'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/CommentServiceDto'
                        - $ref: '#/components/schemas/CommentExtrasServiceDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      description: Creates new comment
      tags:
        - commentsService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCommentServiceDto'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentServiceDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /comments/v1/comments?entityIds[]:
    get:
      description: >
        Lists the comments related to the list of entities.
        `nextId` and `prevId` fields in response help to do pagination.
        For more information see the description of `nextId` and `prevId` fields in the response.
      tags:
        - commentsService
      parameters:
        - name: entity_type
          in: query
          allOf:
            - $ref: '#/components/parameters/entityType'
            - description: >
                Entity type name.
                If it's `comment`, record represents the child comment and `entityId` represents the parent comment ID.
                And only the child comments are being sent in this case.
                Use along with `childList` and `lastId` to paginate the child comments.
        - $ref: '#/components/parameters/entityIds'
        - allOf:
            - $ref: '#/components/parameters/list'
            - description: >
                Use this to define the number of top level comments to retrieve.
                Retrieve all if missing or retrieve the rest if `nextId` is present.
            - example: 3
            - default: 3
            - required: false
        - $ref: '#/components/parameters/childList'
        - $ref: '#/components/parameters/nextId'
        - $ref: '#/components/parameters/lastId'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      entityId:
                        type: array
                        items:
                          allOf:
                            - $ref: '#/components/schemas/CommentServiceDto'
                            - $ref: '#/components/schemas/CommentExtrasServiceDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /comments/v1/comments/{id}:
    patch:
      description: Updates the comment
      tags:
        - commentsService
      parameters:
        - in: path
          name: commentId
          schema:
            type: integer
            format: int64
          required: true
          description: Numeric ID of the comment to show
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCommentServiceDto'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentServiceDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      description: Removes the comment
      tags:
        - commentsService
      parameters:
        - in: path
          name: commentId
          schema:
            type: integer
            format: int64
          required: true
          description: Numeric ID of the comment to delete
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /comments/v1/comments?entityType&entityId:
    delete:
      description: >
        Removes the multiple comments bound to the entity


        At the moment this is used internally to sync of comments removal with posts
      tags:
        - commentsService
      parameters:
        - $ref: '#/components/parameters/entityType'
        - $ref: '#/components/parameters/entityId'
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  # comments end

  # group begin
  /groups/v1/groups/:
    get:
      description: Get posts list
      tags:
        - groupService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        - $ref: '#/components/parameters/archived'
        - in: query
          name: my_groups
          schema:
            type: boolean
          description: If true, shows only groups of my ownership or my membership
        - in: query
          name: q
          description: Text search pattern
          schema:
            type: string
          example: said
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      oneOf:
                        - $ref: '#/components/schemas/Group'
                        - allOf:
                            - $ref: '#/components/schemas/Group'
                            - type: object
                              properties:
                                comments:
                                  example: "[]"
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      description: Create group
      tags:
        - groupService
      requestBody:
        content:
          multipart/form-data:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateUpdateGroupDto'
                - type: object
                  properties:
                    logo:
                      type: string
                      format: binary
                      description: The file to upload.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Group'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /groups/v1/groups/{groupId}/:
    parameters:
      - $ref: '#/components/parameters/groupId'
    get:
      description: Shows the group info
      tags:
        - groupService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Group'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
    patch:
      description: Update group. Only available to group owner.
      tags:
        - groupService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateUpdateGroupDto'
                - type: object
                  properties:
                    archival:
                      example: true
                      description: "true or false"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Group'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
    delete:
      description: Delete group. Only available to group owner.
      tags:
        - groupService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]

  /groups/v1/groups/{groupId}/upload_logo:
    parameters:
      - $ref: '#/components/parameters/groupId'
    post:
      description: Update group. Only available to group owner.
      tags:
        - groupService
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                logo:
                  type: string
                  format: binary
                  description: The file to upload. If empty, deletes the logo.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Group'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]

  /groups/v1/groups/{groupId}/attachUser/{userId}:
    parameters:
      - $ref: '#/components/parameters/groupId'
      - $ref: '#/components/parameters/userId'

    patch:
      description:
        Adding a user to a group. Only available to group owner or moderator.
      tags:
        - groupService

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /groups/v1/groups/{groupId}/detachUser/{userId}:
    parameters:
      - $ref: '#/components/parameters/groupId'
      - $ref: '#/components/parameters/userId'

    patch:
      description:
        Remove user from group. Only available to group owner or moderator.
      tags:
        - groupService

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /groups/v1/groups/{groupId}/joinGroup:
    parameters:
      - $ref: '#/components/parameters/groupId'

    patch:
      description:
        Adding the current user to the group. Available to open groups or by invitation.
      tags:
        - groupService

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /groups/v1/groups/{groupId}/leaveGroup:
    parameters:
      - $ref: '#/components/parameters/groupId'

    patch:
      description:
        Remove the current user from the group..
      tags:
        - groupService

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /groups/v1/invites/:
    get:
      description: Getting a list of invitations to groups of the current user.
      tags:
        - groupService

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  groupId:
                    type: array
                    items:
                      type: string
                    example: [ "2", "5" ]

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      description: Sending invitations to groups. Only available to group owner.
      tags:
        - groupService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendInviteToGroup'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]

  /groups/v1/invites/{groupId}/:
    parameters:
      - $ref: '#/components/parameters/groupId'
    delete:
      description: Refusal of an invitation. Only available to the current user.
      tags:
        - groupService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]

  /groups/v1/transferToUser:
    post:
      description: Transfer groups to another user. Available only for admin users.
      tags:
        - groupService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransferGroup'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/TransferGroupSuccess'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /groups/v1/transferToDepartment:
    post:
      description: Transfer groups to another user. Available only for admin users.
      tags:
        - groupService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransferGroupToDepartment'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/TransferGroupSuccess'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /groups/v1/transferToGroupMembers:
    post:
      description: Transfer groups to another user. Available only for admin users.
      tags:
        - groupService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransferGroupToMembers'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/TransferGroupToMembersSuccess'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /groups/v1/join/{groupId}:
    parameters:
      - $ref: '#/components/parameters/groupId'
    get:
      description: Getting a list of invited users for particular private group
      tags:
        - groupService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: integer
                example: [ 2, 5 ]
                description: The list of user ids
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /groups/v1/join/{groupId}/request:
    parameters:
      - $ref: '#/components/parameters/groupId'
    post:
      description: Add join request for private group
      tags:
        - groupService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /groups/v1/join/{groupId}/request/{userId}:
    parameters:
      - $ref: '#/components/parameters/groupId'
      - $ref: '#/components/parameters/userId'
    get:
      description: Check if user sent join request to the private group
      tags:
        - groupService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/schemas/JoinRequestNotFound'
    delete:
      description: Decline private group join request
      tags:
        - groupService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/schemas/JoinRequestNotFound'
      security:
        - bearerAuth: [ ]
  # groups end


  # crm begin
  /crm/v1/entity/:
    get:
      description: Get available entities list. Available only for admin users.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Entity'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      description: Create entity. Available only for admin users.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/Entity'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Entity'
                  - type: object
                    properties:
                      id:
                        description: Entity ID
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/field_types/:
    get:
      description: Get available field types list. Available only for all users.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Field_Types_List'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/entities/{entity}/fields/:
    parameters:
      - $ref: '#/components/parameters/entity'
    get:
      description: Get available fields list. Available only for admin users.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/Field'
                        - type: object
                          properties:
                            code:
                              type: string
                              example: source
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      description: Create field. Available only for admin users.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/Field'

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Field'
                  - type: object
                    properties:
                      id:
                        description: Entity ID
                        type: integer
                        example: 11
                      code:
                        type: string
                        example: source

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/entities/{entity}/fields/{field}/:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/field'
    get:
      description: Get field by code. Available only for authorized users and users who have access to crm.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Field'
                  - type: object
                    properties:
                      id:
                        description: Entity ID
                        type: integer
                        example: 11
                      code:
                        type: string
                        example: source
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      description: Edit field by code. Available only for authorized users and crm maker.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/Field'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Field'
                  - type: object
                    properties:
                      id:
                        description: Entity ID
                        type: integer
                        example: 11
                      code:
                        type: string
                        example: source
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      description: Delete field by code. Available only for admin users.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]


  /crm/v1/entities/{entity}/lists/{field}/:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/field'
    get:
      description: Get list elements. Available  for all users.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SourceList'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      description: Creating or editing list items. Available only for admin users.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/SourceList'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SourceList'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/entities/{entity}/lists/{field}/{value}:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/field'
      - $ref: '#/components/parameters/value'
    delete:
      description: Deleting a list item. Available only for admin users.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/entities/{entity}/:
    parameters:
      - $ref: '#/components/parameters/entity'
    get:
      description: Get available  crm entity items list. Available only for admin users.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/CrmEntity'
                        - $ref: '#/components/schemas/CrmEAdditionalFields'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      description: Create  crm entity item. Available only for admin users.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateCrmEntity'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CrmEntityResponce'
                  - $ref: '#/components/schemas/CrmEAdditionalFields'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/entities/companies/:
    get:
      description: Get available companies list.
      tags:
        - crmService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        - in: query
          name: q
          description: Text search pattern
          schema:
            type: string
          example: expecting
        - allOf:
            - $ref: '#/components/parameters/filter_string_enum'
            - name: company_label
              example: [ "partner", "competitor" ]
        - allOf:
            - $ref: '#/components/parameters/filter_string_enum'
            - name: source
              example: [ "recommendation", "advertising" ]
        - allOf:
            - $ref: '#/components/parameters/filter_array_of_time_ranges'
            - name: created_at
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: owner
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: deals
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/CrmEntity'
                        - $ref: '#/components/schemas/CrmEAdditionalFields'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/entities/contacts/:
    get:
      description: Get available contacts list.
      tags:
        - crmService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        - in: query
          name: q
          description: Text search pattern
          schema:
            type: string
          example: expecting
        - allOf:
            - $ref: '#/components/parameters/filter_string_enum'
            - name: contact_label
              example: [ "partner", "competitor" ]
        - allOf:
            - $ref: '#/components/parameters/filter_string_enum'
            - name: source
              example: [ "recommendation", "advertising" ]
        - allOf:
            - $ref: '#/components/parameters/filter_array_of_time_ranges'
            - name: created_at
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: owner
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: deals
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/CrmEntity'
                        - $ref: '#/components/schemas/CrmEAdditionalFields'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/entities/deals/:
    get:
      description: Get available deals list.
      tags:
        - crmService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        - in: query
          name: q
          description: Text search pattern
          schema:
            type: string
          example: expecting
        - allOf:
            - $ref: '#/components/parameters/filter_string_enum'
            - name: kanban_status
              example: [ "FAIL", "SUCCESS" ]
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: stages
              example: [ "NEW", "SUCCESS" ]
        - in: query
          name: funnel_id
          description: filter by funnel id
          schema:
            type: integer
          example: 12
        - allOf:
            - $ref: '#/components/parameters/filter_array_of_time_ranges'
            - name: created_at
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: owner
        - allOf:
            - $ref: '#/components/parameters/filter_array_of_time_ranges'
            - name: tasks
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/CrmEntity'
                        - $ref: '#/components/schemas/CrmEAdditionalFields'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/entities/leads/:
    get:
      description: Get available leads list.
      tags:
        - crmService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        - in: query
          name: q
          description: Text search pattern
          schema:
            type: string
          example: expecting
        - allOf:
            - $ref: '#/components/parameters/filter_string_enum'
            - name: kanban_status
              example: [ "FAIL", "SUCCESS" ]
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: stages
              example: [ "NEW", "SUCCESS" ]
        - allOf:
            - $ref: '#/components/parameters/filter_string_enum'
            - name: source
              example: [ "recommendation", "advertising" ]
        - allOf:
            - $ref: '#/components/parameters/filter_array_of_time_ranges'
            - name: created_at
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: owner
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/CrmEntity'
                        - $ref: '#/components/schemas/CrmEAdditionalFields'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/entities/{entity}/{itemId}/:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/itemId'
    get:
      description: Get crm entity item. Available only for authorized users and users who have access to crm.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CrmEntity'
                  - $ref: '#/components/schemas/CrmEAdditionalFields'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      description: Edit crm entity item. Available only for authorized users and users who have access to crm.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CrmEntity'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CrmEntity'
                  - $ref: '#/components/schemas/CrmEAdditionalFields'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      description: Delete crm entity item. Available only for admin users and users who have access to crm.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/entities/{entity}/converting/{itemId}:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/itemId'
    post:
      description: Converting crm entity item. Available for all users.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/conversionBodyWithFunnelId'
                - $ref: '#/components/schemas/conversionBody'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: success
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/static/tasks/:
    get:
      description: Get available crm-task entity items list. Available only for admin users.
      tags:
        - crmService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        - in: query
          name: q
          description: Text search pattern
          schema:
            type: string
          example: expecting
        - allOf:
            - $ref: '#/components/parameters/filter_string_enum'
            - name: status
              example: [ "planned", "done" ]
        - allOf:
            - $ref: '#/components/parameters/filter_string_enum'
            - name: type
              example: [ "call", "meeting" ]
        - allOf:
            - $ref: '#/components/parameters/filter_array_of_time_ranges'
            - name: start_time
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: responsible_id
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: participants
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: company_id
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: contacts
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: deals
        - allOf:
            - $ref: '#/components/parameters/filter_number_enum'
            - name: leads
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CrmTaskEntity'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      description: Create crm-task entity item. Available only for admin users.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUpdateCrmTaskDto'

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CrmTaskEntity'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/static/task/{itemId}/:
    parameters:
      - $ref: '#/components/parameters/itemId'
    get:
      description: Get crm-task entity item. Available only for authorized users and users who have access to crm.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CrmTaskEntity'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      description: Edit crm-task entity item. Available only for authorized users and users who have access to crm.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUpdateCrmTaskDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CrmTaskEntity'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      description: Delete crm-task entity item. Available only for admin users and users who have access to crm.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/entities/{entity}/funnel:
    parameters:
      - $ref: '#/components/parameters/entity'
    get:
      description: Get funnels. Available only for admin users.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  allOf:
                    - $ref: '#/components/schemas/Funnel'
                    - type: object
                      properties:
                        id:
                          type: integer
                          example: 11

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      description: Funnel creating. Available only for admin users.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/Funnel'
                - type: object
                  properties:
                    funnel_code:
                      type: string
                      example: 'new_deal'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Funnel'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/entities/{entity}/funnel/{funnelId}:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/funnelId'
    get:
      description: Get funnels. Available only for admin users.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Funnel'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
                      stages:
                        type: array
                        items:
                          $ref: '#/components/schemas/CrmStage'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      description: Funnel editing. Available only for admin users.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/UpdateFunnel'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Funnel'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      description: Funnel deleting. Available only for admin users.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]


  /crm/v1/entities/{entity}/kanban/stage:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/filterFunnel'
    get:
      description: Get kanban stages. Available  for all users.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  oneOf:
                    - $ref: '#/components/schemas/CrmStage'
                    - allOf:
                        - $ref: '#/components/schemas/CrmStageWithReason'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      description: Create a kanban stage. Available only for admin users.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateCrmStage'
                - type: object
                  properties:
                    stage_code:
                      type: string
                      example: 'new_deal'
                    funnel_id:
                      type: integer
                      example: 5
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CrmStage'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/entities/{entity}/kanban/stage/{stageId}:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/stageId'
    get:
      description: Get kanban stage. Available for all users.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CrmStage'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      description: Editing a Kanban Stage. Available only for admin users.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateCrmStage'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CrmStage'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      description: Deleting a Kanban Stage. Available only for admin users.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/entities/{entity}/{entity_id}/move/stage/{stageId}:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/entity_id'
      - $ref: '#/components/parameters/stageId'
    post:
      description: Move a kanban stage. Available only for all users.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - type: object
                  properties:
                    reason_id:
                      type: integer
                      example: 3
                    reason_comment:
                      type: string
                      example: 'example'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CrmStage'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/reasons/{funnelId}:
    parameters:
      - $ref: '#/components/parameters/funnelId'
    get:
      description: Get funnels. Available only for admin users.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ReasonList'


        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      description: Funnel creating. Available only for admin users.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateReason'
                - type: object
                  properties:
                    type:
                      type: string
                      example: 'SUCCESS'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Reason'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/reasons/{reasonId}:
    parameters:
      - $ref: '#/components/parameters/reasonId'
    patch:
      description: Funnel editing. Available only for admin users.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateReason'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Reason'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      description: Funnel deleting. Available only for admin users.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/events/call:
    get:
      description: Get call event data
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/EventCallList'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      tags:
        - crmService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CallEventDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/EventCallList'

  /crm/v1/events/call/{call_event_id}:
    patch:
      tags:
        - crmService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CallEventDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/EventCallList'
    delete:
      parameters:
        - $ref: '#/components/parameters/call_event_id'
      description:
        Delete call event. Available only for users with admin permissions.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  # crm end


  # search begin
  /search/v1/search:
    parameters:
      - description: Name search by q
        in: query
        name: q
    get:
      description: Search data from all services
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SearchResponse'
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
          $ref: '#/components/responses/UnauthorizedError'
        "500":
          description: Internal Server Error
          $ref: '#/components/responses/NoContent'
      tags:
        - searchService
      security:
        - bearerAuth: [ ]

    # search end


  # fileimport begin
  /fileimport/v1/csv-import:
    post:
      parameters:
        - name: file
          in: formData
          type: file
        - name: data
          in: formData
          type: string

      responses:
        '200':
          description: OK

        '413':
          description: StatusRequestEntityTooLarge

        '400':
          description: StatusBadRequest

        '500':
          description: StatusInternalError
      tags:
        - fileImport
      security:
        - bearerAuth: [ ]
  # fileimport end

  # appService being
  /apps/v1/apps/:
    get:
      description: Get applications list.
      tags:
        - appService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/App'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      description: Create app
      tags:
        - appService
      requestBody:
        content:
          multipart/form-data:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateUpdateAppDto'
                - type: object
                  properties:
                    logo:
                      type: string
                      format: binary
                      description: The file to upload.
                  required:
                    - name
                    - code
                    - short_description
                    - redirect_url
                    - callback_url
                    - developer_name
                    - logo
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/App'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /apps/v1/apps/{app_id}:
    patch:
      description: Update app data
      tags:
        - appService
      parameters:
        - $ref: '#/components/parameters/app_id'
      requestBody:
        content:
          multipart/form-data:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateUpdateAppDto'
                - type: object
                  properties:
                    logo:
                      type: string
                      format: binary
                      description: The file to upload.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/App'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
    delete:
      description: Delete app
      tags:
        - appService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  # appService end



components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  responses:
    UnauthorizedError:
      description: Access token is missing or invalid
    Forbidden:
      description: Forbidden
    NoContent:
      description: No Content

    # search serivce
    SearchErrorMessage:
      description: Custom error





  parameters:
    userId:
      name: userId
      in: path
      description: User id
      required: true
      schema:
        type: string
    departmentId:
      name: departmentId
      in: path
      description: Department id
      required: true
      schema:
        type: string
    roleId:
      name: roleId
      in: path
      description: Role id
      required: true
      schema:
        type: string
    page:
      name: page
      in: query
      description: current page
      required: false
      schema:
        type: integer
        default: 1
      example: 1
    searchEmail:
      name: email
      in: query
      required: false
      schema:
        type: string
      example: rar.stas@gmail.com
    searchFirstName:
      name: firstName
      in: query
      required: false
      schema:
        type: string
      example: Stas
    searchLastName:
      name: LastName
      in: query
      required: false
      schema:
        type: string
      example: Raranetskyi
    searchPortalDomain:
      name: domain
      in: query
      required: false
      schema:
        type: string
      example: alter_ego
    list:
      name: list
      in: query
      description: how many items should be per page
      required: false
      schema:
        type: number
        default: 20
      example: 10
    childList:
      name: childList
      in: query
      description: >
        Use this to define the number of child comments to retrieve.
        Retrieve all if missing or retrieve the rest if `lastId` is present.
      required: false
      schema:
        type: integer
        format: int32
        default: 2
      example: 2
    nextId:
      name: nextId
      in: query
      description: >
        The top level comments are being paginated starting from the last page but in the ascending order.
        This parameter used to point the topmost comment on the previous page. For example: to get the
        previous page in the sample below `nextId` must be 22.

        * comment-22

        * comment-23

        * comment-24


        and the entire query should look like the following:


        ```
        ?entityType=post&entityId=123&list=3&childList=2&nextId=22
        ```


        This means: to get the previous 3 comments of the entity `post-123` along with the possible
        child comments (no more then 2 child comments per parent) relating to the `comment-22`
      required: false
      schema:
        type: integer
        format: int64
    lastId:
      name: lastId
      in: query
      description: >
        This parameter used to point the bottom child comment on the previous page. For example: to get the
        next page if the child comments in the sample below, `lastId` must be 27, `entityType` must be "comment"
        and `entityId` must be 25.

          * comment-23

          * comment-24

          * comment-25

          * child-comment-26-of-parent-25

          * child-comment-27-of-parent-25


          and the entire query should look like the following:



          ```
          ?entityType=post&entityId=123&childList=2&entityType=comment&entityId=25&lastId=27
          ```


          This means: to get the next 2 child comments of parent `comment-25` of the entity `post-123` relating to the `child-comment-27`
      required: false
      schema:
        type: integer
        format: int64
    query:
      name: query
      in: query
      description: search query
      required: false
      schema:
        type: string
        default: ""
      example: "some query string"
    filter:
      name: filter
      in: query
      description: Fields, corresponding to the available list of entity.
      required: false
      style: deepObject
      schema:
        type: object
    filterUsers:
      allOf:
        - $ref: '#/components/parameters/filter'
        - type: object
          description: Fields, corresponding to the available list of fields user.
          example:
            email: rar.stas@gmail.com
            firstName: Stas
            lastName: Raranetskyi
            phone: "+3801234567"
            position: CTO
            active: true
            departmentsIds: [ "1111", "2222" ]
            roles:
              - OWNER
              - ADMIN
    queryUsers:
      allOf:
        - $ref: '#/components/parameters/query'
        - type: string
          description: Search by email, firstName, lastName
          example: rar.stas@gmail.com
    filterDepartments:
      allOf:
        - $ref: '#/components/parameters/filter'
        - type: object
          description: Fields, corresponding to the available list of fields department.
          example:
            name: "Frontend department"
            headId: "1111"
            parentDepartmentId: "1111"
            usersIds: [ "1111", "2222", "3333" ]
    queryDepartments:
      allOf:
        - $ref: '#/components/parameters/query'
        - type: string
          description: Search by name department
          example: Frontend department
    postId:
      name: postId
      in: path
      description: Post id
      required: true
      schema:
        type: string
    commentId:
      name: commentId
      in: path
      description: Comment id
      required: true
      schema:
        type: string
    taskId:
      name: taskId
      in: path
      description: Task id
      required: true
      schema:
        type: string
    stageId:
      name: stageId
      in: path
      description: Stage id
      required: true
      schema:
        type: string
    order_by:
      name: order_by
      in: query
      description: sorting direction
      required: false
      schema:
        type: string
        default: desc
      example: order_by=asc
    field_name:
      name: field_name
      in: query
      description: the field we are looking for
      required: false
      schema:
        type: string
      example: priority=Low
    sort_by:
      name: sort_by
      in: query
      description: the field by which to sort
      required: false
      schema:
        type: string
      example: sort_by=deadline
    checkListId:
      name: checkListId
      in: path
      description: checklist id
      required: true
      schema:
        type: string
    checkListItemId:
      name: checkListItemId
      in: path
      description: checklist item id
      required: true
      schema:
        type: string
    entityType:
      in: query
      name: entityType
      schema:
        $ref: '#/components/schemas/EntityTypes'
      required: true
      description: Entity type name
    entityId:
      in: query
      name: entityId
      schema:
        type: integer
        format: int64
      required: true
      description: Entity ID
    entity_id:
      in: path
      name: entity_id
      schema:
        type: integer
        format: int64
      required: true
      description: Entity ID
    entityIds:
      in: query
      name: entityIds
      description: >
        Use this parameter instead of `entityId` to list files for multiple entities at once. The response differs in this case.
      schema:
        type: array
        items:
          type: integer
          format: int64
      required: true
    groupId:
      name: groupId
      in: path
      description: Group id
      required: true
      schema:
        type: string
    app_id:
      name: app_id
      in: path
      description: App id
      required: true
      schema:
        type: string
    archived:
      name: archived
      in: query
      description: filter archived or non-archived group
      required: false
      schema:
        type: boolean
        default: false
      example: true, false, 1, 0, yes, no, ""
    entity:
      name: entity
      in: path
      description: entity code
      required: true
      schema:
        type: string
    itemId:
      name: itemId
      in: path
      description: Item id
      required: true
      schema:
        type: string
    field:
      name: field
      in: path
      description: field code
      required: true
      schema:
        type: string
    value:
      name: value
      in: path
      description: list value code
      required: true
      schema:
        type: string
    funnelId:
      name: funnelId
      in: path
      description: funnel id
      required: true
      schema:
        type: string
    reasonId:
      name: reasonId
      in: path
      description: reason id
      required: true
      schema:
        type: string
    call_event_id:
      name: call_event_id
      in: path
      description: call event id
      required: true
      schema:
        type: string

    filter_number_enum:
      name: filterNumberEnum
      in: query
      description: Array of numeric values
      schema:
        type: array
        items:
          type: integer
          format: int64
    filter_string_enum:
      name: filterStringEnum
      in: query
      description: Array of string values
      schema:
        type: array
        items:
          type: string
    filter_array_of_time_ranges:
      name: filterArrayOfTimeRanges
      in: query
      description: Array of strings formatted in the following way - <start_time>,<end_time>
      schema:
        type: array
        items:
          type: string
      example: [ "1674432000,1679529600" ]
    filterFunnel:
      name: funnel_id
      in: query
      description: funnel id
      required: false
      schema:
        type: string


  schemas:
    # common begin
    Meta:
      type: object
      properties:
        total:
          type: number
          example: 100
        page:
          type: number
          example: 1
        list:
          type: number
          example: 10

    Roles:
      type: array
      items:
        type: string
      example:
        - OWNER
        - Employee
        - ADMIN
    Email:
      type: string
      example: 'rar.stas@gmail.com'
    multipleEmail:
      type: array
      items:
        properties:
          id:
            type: string
            example: '01gdnpddf5xgzxqvcn4x83mc2s'
          type:
            type: string
            example: main
          value:
            type: string
            example: 'stark@gmail.com'
          main:
            type: boolean
            example: true
      example:
        - id: ''
          type: main
          value: stark@gmail.com
          main: true
        - id: '01gdnpddf5xgzxqvcn4x83mc2s'
          type: work
          value: benner@gmail.com
          main: false
    Phone:
      type: array
      items:
        properties:
          id:
            type: string
            example: '01gdnpddf5xgzxqvcn4x83mc2s'
          type:
            type: string
            enum: [ WORK, MOBILE, HOME ]
            example: WORK
          value:
            type: string
            example: '+380123456789'

    Date:
      type: number
      description: timestamp in seconds
      default: 0
      example: 1654180120
    Files:
      type: array
      items:
        type: string
      example:
        - path/to/image.jpg
        - path/to/image.png
    # common end

    # users begin
    User:
      type: object
      properties:
        id:
          type: string
          example: 1
        firstName:
          type: string
          example: Stas
        lastName:
          type: string
          example: Raranetskyi
        patronymic:
          type: string
          example: ""
        position:
          type: string
          example: CTO
        specialization:
          type: string
          example: Specialist
        country:
          type: string
          example: Ukraine
        city:
          type: string
          example: Kiyv
        avatar:
          type: string
          example: /storage/avatars/c4ca423/avatar.jpeg
        aboutMyself:
          type: string
          example: about me
        active:
          type: boolean
        registered:
          type: boolean
          example: true
        birthday:
          $ref: '#/components/schemas/Date'
        dateOfDismiss:
          $ref: '#/components/schemas/Date'
        showBirthYear:
          type: boolean
          default: false
          example: true
        email:
          $ref: '#/components/schemas/multipleEmail'
        phone:
          $ref: '#/components/schemas/Phone'
        roles:
          $ref: '#/components/schemas/Roles'
        departmentsIds:
          type: array
          items:
            type: string
          example:
            - '1'
            - '2'
        socialMedia:
          $ref: '#/components/schemas/SocialMedia'
        emailInvitation:
          type: boolean
          example: true
        dateOfInvitation:
          $ref: '#/components/schemas/Date'
    TwoFactorStatus:
      type: object
      properties:
        enabled:
          type: integer
          enum:
            - 0
            - 1
    TwoFactorEnable:
      type: object
      properties:
        step:
          type: string
          enum:
            - get-qr-code
            - verify-secret
        code:
          type: integer
          example: 555406
          description: Available on a second step (check-code)
    TwoFactorGetQr:
      type: object
      properties:
        secretKey:
          type: string
          example: RWPIRBJCIUJITLPC
        qrCodeUri:
          type: text
          example: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAIAAACzY+a1AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAIIUlEQVR4nO2dwY7zNgyEm6Lv/8rbgy8CiJn9hkr+gg3ntLBlio41Ijl0sq+fn5+/FpPx93/twOIW+wjHYx/heOwjHI99hOOxj3A89hGOxz7C8dhHOB7/+NOv1wsaelQeNf48q/Sg86waedpXM1YL3nI9S+6xjuf+1Hvx8ArasnA8fmHhA78KyGrynDhn8UxVvp12FA+Iz5wx3gK3fP/ZLgvHA7HwAVnd6uxzrVqD59lzvGJqHUNmJDsBicec08pzP5KMP7EsHI+AhQSKJT6u8CiY5pM+MnnLanZuoe4xn+jOLgvH480sPOGjjgKp4U779Xi1Rux7Bqsxvi5UO9B7ubgsHI+AhWTt+Gih1n4v/1SW1ew+BvN78XP5PYPHZo5l4XggFnI17wFRJvn43t+n54pDveNpTen9ST/bimXheLzemx1x5nElM60avTU/Y52XHPcWuEbTw7JwPAIW9jpz50hiR43nK5pEF9I7rNZ4pZtGO/L5KCwLxwOxMF0XqULv9ZGU/cSysu8tqPH+8+nFYB53l4XjEbw7Q/b3m6zSrzjSKexVXVyjqeP5fuOv4nVkxbJwPOJORY9VamWljPG9Au8h4ai6I6/3qnmJV/dYFo7HLywk65GsvgoSRW6qQ+ID6YQQNvuuC9eAeuxcFo7H1dvc9yzxNZbP3Lyd6ifZDzhvSKXoWVtn9zMqLAvH4w1d+3THr8drjqpYRfoP3OdzDNeA1Fk/L4/9aURcFo5H3C/s6YG8g5HqpcSTm/1D3YUf433z2E7F16GpkSr2kLXGdQ3SN6h+9vRGsva9P573ZP/YuvBLEX+/UOWQJwiTuK6v5q1z9dRREr+J/z5G+py8YvuFX4S3vTtzHqnjb7QV5UnPc55PvstnrtASaxXLwvGI3+YmlZyPIn5V9lQM0mskq57XiPUsUT5JBkBmPLEsHI9fYmGqcAYTA2aruc6r0i4B8SpluVeUqv37MSeWheMRd+15FVXHk3rLX1W9Igpt6j+J1jxzPq/19nlMPbEsHA+kkSp15hyjruX2SaeCW/ao2ibfIar/1cN6Vik79/eyLByP5rd80zXreebt8z5G9dkrmYrxJA9XFkikJFoxZ+eycDzibzbxGpErFKTy4+or71F4pD0EHr95HUmwLByPj3ynItX7ecRSFWFvFjWjupbsN0TN4XsGwbJwPIJY6HXLXhzq5WO8jkzrPD8mjWdpx8Zn3QrLwvEIOhW9nkDaZ/A+oFsCmTCP1t4Hrt1UH5SdNDouC8cjUGeqYqLOKgsVvatIpegtEFQNJY189Sy3wPeeZeF4NGPhiTQWkohC4i7xJGUhyUIr+K5wb7liWTgeTY2U1231uJ8ltU+0Su5bT1e6qSP9fS0LvwLxN5tI10KNryPJHsCjGvGN+HOOVB6mSib3LY3iy8LxQG+w+TXS61d4Tn+itque1LnUkTS++mqS+MZZviwcj+a3fE/wNZt2RdIeyH20VvZ7nY0TXBNedebrEMTCB+pvf1UdTzjNewj8uALvL/q8kTDY+0byjBPLwvF4wxtsfvx5VdqTS+14fnB9lcxIeg7qrBqj7CwL/+dAnYoTPY1RjeQxhnfsbtCrCOv4+4x668IvQvwGG1kjXK9Rxznbeup+taOs+Tuq1pQ/CmmHpGJZOB5X/8uXZ6q+RkyRxj/PaaIDkxhJKlrVD1FXbUb6FQh+g02tCL9m02rvPufk9R+5l5u5HvCcthfRl4XjEX/X/kQvA/TdAB8tzpGnTQ+ir5K61vc7U0/87rV14Reh+Tb3iV5l4+s8Zbn6w73lVSmxc3Kxzl79JxG6h2XheFypMz09nttJ9Q6e9xKfSVdEeVvtpPa9hRPLwvFo/vpT/fs+cyPW1Ph6lV+5PuP1s1T0uhA33YkTy8LxaMbCB0SXqSNJBkvWdZ1R+UzuriKN2QppdEz9XxaOR/wL+TfMU2PqLP5symN/R/4u0nv0uxRBGhGXheMRvDvT2/frWWKBc7Ee6bGzV8P1skpSa57+eywLxyP+hfxelXOjlfB5yVXpXAqpMuXnqnZ4jbssHI/4PdITXBtM+xhp1pryUt1FnZFrs/xzSGtcj2XheMRvsPHqh+ddZKWn6GV33pqP7mp2omedam2a3y4LxyP4bzE30cJbU2N6driWWzsVavbUK16z+jsiXFwWjkfz3Zm6gjwb6jqqV/nKz4PUUrw65PGYKyxc50pzgmXheHzwOxU8R63gio+KKMpDtX+kKlUa+/muoMYrLAvH4+oX8h8QFUYd8SPr7LyfQHyrx6tX/lrvYarQkp2mYlk4Hs3/a8/3cd6fSzsJdWRPz0wV1zT35l5V+6vOfAWC90h5H4szj8BfxfsY9Wy1oEbWz0HNpWbxI0l2rbAsHI+r3+bmuRaxXO0T3GgrZF7eneAZAPeHYFk4HkFGisxZvp5jPrG6SWbocZ9pe3+Ib1wzerAsHI/gV4E9VNaqRp72+RGVFae5sfKT6yO8pjzt+LlS/j1YFo5H8LszCopzvM9wHx1Tz3ns8XGX18rEt15vZ1k4Hlf/OY1r8zdn1Yzp2XPMeXf+jk7wfoVCb8/wWBaOx1XXvgcSh9Qa51GHx0viZ/U2rT7V3ZGq0WNZOB4fZyGpe3gsPKFY4nsaRAVNdSU1L1GAeYWqsCwcj4CFZEWkfYy0IvR2lAXeaySqiprR7x9pPObRcVk4HlffLzzB6yQfCXqVH1d5eFWadi28JwrEvseycDze3C9c/HksC8djH+F47CMcj32E47GPcDz2EY7HPsLx2Ec4HvsIx+NfuxthdynJNh4AAAAASUVORK5CYII="
    TwoFactorStatusEnabled:
      type: object
      properties:
        status:
          type: boolean
          example: true
        message:
          type: string
          example: Two-factor authentication was successfully enabled
    TwoFactorStatusDisabled:
      type: object
      properties:
        status:
          type: boolean
          example: true
        message:
          type: string
          example: Two-factor authentication was successfully disabled
    UpdateUserDto:
      type: object
      properties:
        email:
          $ref: '#/components/schemas/Email'
        firstName:
          type: string
          example: Stas
        lastName:
          type: string
          example: Raranetskyi
        specialization:
          type: string
          example: Specialist
        country:
          type: string
          example: Ukraine
        city:
          type: string
          example: Kiyv
        avatar:
          type: string
          example: /storage/avatars/c4ca423/avatar.jpeg
        aboutMyself:
          type: string
          example: about me
        phone:
          $ref: '#/components/schemas/Phone'
        birthday:
          $ref: '#/components/schemas/Date'
        showBirthYear:
          type: boolean
          default: false
          example: true
        socialMedia:
          $ref: '#/components/schemas/SocialMedia'
    UpdateRolesDto:
      allOf:
        - $ref: '#/components/schemas/Roles'
    UpdateUserPosition:
      type: object
      properties:
        position:
          type: string
      example:
        position: new position
    getUsersByField:
      type: object
      properties:
        ids:
          type: array
          items:
            type: string
          example:
            - '1'
            - '2'
    personalSettings:
      type: object
      properties:
        nameFormat:
          type: string
          example: first-last
        lang:
          type: string
          example: ua
        timeFormat:
          type: string
          example: 24-hours
        dateFormat:
          type: string
          example: hh:mm:ss
        timezone:
          type: string
          example: Kiev +2
        firstDay:
          type: string
          example: monday
        themeAccentColor:
          type: string
          example: '#ff0000'
        themeDecor:
          type: string
          enum:
            - standard
            - framed
        themeName:
          type: string
          enum:
            - dark
            - light
            - highlighted
    # users begin

    # auth begin
    SocialMedia:
      type: array
      items:
        properties:
          id:
            type: string
            example: '01gdnpddf5xgzxqvcn4x83bn2s'
          name:
            type: string
            example: facebook
          link:
            type: string
            example: https://www.facebook.com
    Token:
      type: object
      properties:
        expireInSeconds:
          type: number
          example: 720
        jwt:
          type: string
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjEyMzEyMzEyMyIsImZpcnN0TmFtZSI6IlN0YXMiLCJsYXN0TmFtZSI6IlJhcmFuZXRza3lpIiwiZW1haWwiOiJyYXIuc3Rhc0BnbWFpbC5jb20iLCJyb2xlcyI6WyJVU0VSIiwiQURNSU4iLCJPV05FUiJdfQ.au16u5LHJqdvhiPrpXDhN4NZn8Cae09I6BEmed7mt8w
        refreshToken:
          type: string
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjEyMzEyMzEyMyIsImZpcnN0TmFtZSI6IlN0YXMiLCJsYXN0TmFtZSI6IlJhcmFuZXRza3lpIiwiZW1haWwiOiJyYXIuc3Rhc0BnbWFpbC5jb20iLCJyb2xlcyI6WyJVU0VSIiwiQURNSU4iLCJPV05FUiJdfQ.au16u5LHJqdvhiPrpXDhN4NZn8Cae09I6BEmed7mt8w
    SignUpDto:
      type: object
      properties:
        email:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        password:
          type: string
      example:
        email: "example@gmail.com"
        password: "12345678"
        firstName: Stas
        lastName: Raranetskyi
    JWT:
      type: object
      properties:
        id:
          type: string
          example: 1
        email:
          $ref: '#/components/schemas/Email'
        firstName:
          type: string
          example: Stas
        lastName:
          type: string
          example: Raranetskyi
        workspaceId:
          type: string
          example: 123123
        roles:
          $ref: '#/components/schemas/Roles'
        departmentsIds:
          type: array
          items:
            type: string
          example:
            - 1
            - 2
          description: All departments from the parent
    SignInDto:
      type: object
      properties:
        email:
          $ref: '#/components/schemas/Email'
        password:
          type: string
          example: 12345678
        code:
          type: string
          example: 237419
          description: filled on second auth step if 2FA is eneabled
    ConfirmEmailDto:
      type: object
      properties:
        email:
          $ref: '#/components/schemas/Email'
        token:
          type: string
          example: r6pvb5pllte
    ChangePasswordDto:
      type: object
      properties:
        password:
          type: string
          example: 12345678
    ChangeSelfPasswordDto:
      type: object
      properties:
        oldPassword:
          type: string
          example: 12345678
        newPassword:
          type: string
          example: 12345678
    EmailPasswordDto:
      type: object
      properties:
        email:
          type: string
          example: example@gmail.com
    EmailPasswordTokenDto:
      type: object
      properties:
        email:
          $ref: '#/components/schemas/Email'
        password:
          type: string
          example: 12345678
        token:
          type: string
          example: r6pvb5pllte
    RegistrationByInvitation:
      type: object
      properties:
        email:
          $ref: '#/components/schemas/Email'
        password:
          type: string
          example: 12345678
        firstName:
          type: string
          example: Tony
        lastName:
          type: string
          example: Stark
          required: false
        domain:
          type: string
          example: stark
    CreatePortal:
      type: object
      properties:
        portalName:
          type: string
          example: alter_ego
        domain:
          type: string
          example: alter_ego
        tariffId:
          type: string
          example: 1
        firstName:
          type: string
          example: Root
          description: Portal owner name
        email:
          type: string
          example: root@gmail.com
          description: Portal owner email
        password:
          type: string
          example: 12345678
          description: Portal owner password (of existing user or new one)
    Portal:
      type: object
      properties:
        id:
          type: string
          example: 1
        portal_name:
          type: string
          example: alter_ego
        domain:
          type: string
          example: alter_ego
        ending_date:
          type: integer
          example: 1680020176
        active:
          type: boolean
        jwt_secret:
          type: string
          example: F8Ka2ovT3OyztOY4FiH7OvbU2nLprrQDllrWFMJ5DVk
        s3_bucket:
          type: string
          example: alter_ego
        creator_ip:
          type: string
          example: 172.70.174.228
    # auth end

    # Departments begin
    Department:
      type: object
      properties:
        id:
          type: string
          example: 1
        name:
          type: string
          example: Frontend department
        headId:
          type: string
          example: 1
        parentDepartmentId:
          type: string
          default: null
          example: 1
        usersIds:
          type: string
          example:
            - '1'
            - '2'
        roles:
          $ref: '#/components/schemas/Roles'
    DepartmentPatch:
      type: object
      properties:
        name:
          type: string
          example: Frontend department
        headId:
          type: string
          example: 1
        description:
          type: string
          example: example
        parentDepartmentId:
          type: string
          default: ""
          example: 1
    UserIds:
      type: array
      items:
        type: string
      example:
        - '1'
        - '2'
    # Departments end

    # news feed begin
    Post:
      type: object
      properties:
        id:
          type: string
          example: 1
        title:
          type: string
          example: Title post
        message:
          type: string
          example: Message post
        authorId:
          type: string
          example: 1
        author_mood:
          $ref: '#/components/schemas/AuthorMood'
        files:
          type: array
          items:
            $ref: '#/components/schemas/FileInfoDto'
        date:
          $ref: '#/components/schemas/Date'
        comments:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/CommentServiceDto'
              - $ref: '#/components/schemas/CommentExtrasServiceDto'
        reactions:
          type: array
          items:
            $ref: '#/components/schemas/ReactionServiceDto'
    RecipientsPost:
      type: object
      properties:
        exclude:
          type: object
          description: A field by which you can exclude the viewing of a post for users and / or departments
          properties:
            departmentsIds:
              type: array
              items:
                type: string
              example:
                - "1"
                - "2"
              examples:
                arrayDepartmentsIds:
                  - "1"
                  - "2"
                empty: [ ]
            usersIds:
              type: array
              items:
                type: string
              example:
                - "1"
                - "2"
              examples:
                arrayUsersIds:
                  - "1"
                  - "2"
                empty: [ ]
        include:
          type: object
          description: A field by which you can include the viewing of a post for users and / or departments
          properties:
            departmentsIds:
              type: array
              items:
                type: string
              example:
                - "3"
                - "4"
              examples:
                arrayDepartmentsIds:
                  - "1"
                  - "2"
                empty: [ ]
            usersIds:
              type: array
              items:
                type: string
              example:
                - "3"
                - "4"
              examples:
                arrayUsersIds:
                  - "1"
                  - "2"
                empty: [ ]
    CreatePostDto:
      type: object
      properties:
        title:
          type: string
          example: Title post
        message:
          type: string
          example: Message post
        author_mood:
          $ref: '#/components/schemas/AuthorMood'
        fileIds:
          type: array
          description: Defines the array of fileIds uploaded earlier that need to be bound to the post
          items:
            type: integer
            format: int64
        uploadId:
          description: Defines the earlier uploaded file bundle that need to be bound to the post
          type: string
          format: uuid
        recipients:
          $ref: '#/components/schemas/RecipientsPost'
    UpdatePostDto:
      type: object
      properties:
        title:
          type: string
          example: Title post
        message:
          type: string
          example: Message post
        author_mood:
          $ref: '#/components/schemas/AuthorMood'
        recipients:
          $ref: '#/components/schemas/RecipientsPost'
    AuthorMood:
      type: string
      enum:
        - happy
        - proud
        - thankful
        - inspired
        - excited
        - festive
        - worried
        - sad
        - angry
    # news feed end

    # tasks begin
    Task:
      type: object
      properties:
        id:
          type: string
          example: 5
        title:
          type: string
          example: Describe swagger api for tasksService
        deadline:
          $ref: '#/components/schemas/Date'
        closedDate:
          $ref: '#/components/schemas/Date'
        createdBy:
          type: string
          example: 1
        closedBy:
          type: string
          example: 1
        createdDate:
          $ref: '#/components/schemas/Date'
        responsibleId:
          description: ID of responsible person
          type: string
          example: 1
        accomplicesIds:
          type: array
          items:
            type: string
          example: [ "2", "3" ]
        auditorsIds:
          type: array
          items:
            type: string
          example: [ "4", "5" ]
        body:
          type: string
          example: <b>need use swagger-ui@4.x</b>
        status:
          $ref: '#/components/schemas/TaskStatus'
        kanbanStageId:
          type: string
          example: 2
        priority:
          type: string
          enum:
            - Low
            - Average
            - High
        acceptResult:
          type: boolean
          default: false
          example: true
        requiredResult:
          type: boolean
          default: false
          example: true
        resultCommentId:
          type: string
          example: 1
        fixed:
          type: boolean
          default: false
          example: true
        archive:
          type: boolean
          default: false
          example: false
        departmentId:
          description: Department ID
          type: string
          example: 1
        groupId:
          description: Group ID
          type: string
          example: 1
        files:
          type: array
          items:
            $ref: '#/components/schemas/FileInfoDto'
          example:
            - id: 7
              entityType: "task"
              entityId: 5
              uploadId: "369c4620-adee-4526-a0d8-a1db20bcf5b2"
              originalFilename: "sample.jpg"
              lastModified: 1664629542
              size: 123456
              url: "https://aws.s3.amazonaws.com/my-bucket/61/dd/61ddc0045c05ba7537b63e63184b9203.jpg"
        comments:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/CommentServiceDto'
              - $ref: '#/components/schemas/CommentExtrasServiceDto'
            example:
              id: 2
              entityType: "task"
              entityId: 5
              message: "Message comment"
              authorId: "1"
              date: 1654180120
              reactions:
                - reaction: 128513
                  amount: 23
                  entityId: 2
              nextId: 12
              prevId: 5
        reactions:
          type: array
          items:
            $ref: '#/components/schemas/ReactionServiceDto'

    CreateEditTaskDto:
      type: object
      properties:
        parentId:
          type: integer
          format: int64
        title:
          type: string
          example: Describe swagger api for tasksService
        deadline:
          $ref: '#/components/schemas/Date'
        responsibleId:
          description: ID of responsible person
          type: string
          example: 1
        accomplicesIds:
          type: array
          items:
            type: string
          example: [ "2", "3" ]
        auditorsIds:
          type: array
          items:
            type: string
          example: [ "4", "5" ]
        body:
          type: string
          example: <b>need use swagger-ui@4.x</b>
        priority:
          type: string
          enum:
            - LOW
            - AVERAGE
            - HIGH
        departmentId:
          description: Department ID
          default: 'current department id'
          type: string
          example: 1

    TaskStatus:
      type: string
      enum:
        - TO_DO
        - IN_PROGRESS
        - READY_FOR_REVIEW
        - DONE
        - BLOCKED

    CanbanStage:
      type: object
      properties:
        id:
          type: string
          example: 1
        title:
          type: string
          example: To do
        color:
          type: string
          example: "#ff0000"
        afterId:
          type: string
          description: The ID of the stage to add after.
          example: 0

    CreateEditCanbanStageDto:
      type: object
      properties:
        title:
          type: string
          example: In progress
        color:
          type: string
          example: "#ff0000"
        afterId:
          type: string
          description: The ID of the stage to add after.
          example: 1
    MoveTaskCanbanStageDto:
      type: object
      properties:
        id:
          type: string
          description: Task id
          example: 1

    CreateDenial:
      type: object
      properties:
        reason:
          type: string
          example: No time

    CreateUpdateCheckList:
      type: object
      properties:
        title:
          type: string
          example: New checklist

    CheckList:
      type: object
      properties:
        id:
          type: string
          description: checklist id
          example: 1
        title:
          type: string
          example: New checklist

    CheckListItem:
      type: object
      properties:
        title:
          type: string
          example: First item
        responsibleId:
          description: ID of responsible person
          type: string
          example: 1
        deadline:
          $ref: '#/components/schemas/Date'

    MassEditIds:
      type: object
      properties:
        ids:
          type: array
          items:
            type: string
          example: [ "1", "2" ]

    TransferTask:
      type: object
      properties:
        oldUserId:
          type: string
          example: 2
        newUserId:
          type: string
          example: 55
        owner:
          type: boolean
          example: true
        responsible:
          type: boolean
          example: false
      required:
        - oldUserId
        - newUserId

    TransferTasksSuccess:
      type: object
      properties:
        status:
          type: boolean
          example: true
        countOwnerTasks:
          type: integer
          example: 2
        countResponsibleTasks:
          type: integer
          example: 4

    TransferTasksToDepartment:
      type: object
      properties:
        oldUserId:
          type: string
          example: 2
        departmentUserIds:
          type: array
          items:
            type: string
          example:
            - "11"
            - "22"
        owner:
          type: boolean
          example: true
          default: false
        responsible:
          type: boolean
          example: false
          default: false
      required:
        - oldUserId
        - newUserId

    CompleteComment:
      type: object
      properties:
        resultCommentId:
          type: integer
          example: 11

    TaskSettings:
      type: object
      properties:
        fixingResult:
          type: boolean
          example: true
          default: false
        fixingResultRequiredFor:
          type: array
          items:
            type: string
          example: [ "2", "3" ]
        acceptResult:
          type: boolean
          example: true
          default: false
        acceptResultRequiredFor:
          type: array
          items:
            type: string
          example: [ "4", "5" ]

    # tasks end

    # files begin

    EntityTypes:
      type: string
      enum:
        - comment
        - post
        - task

    UploadContainer:
      type: object
      properties:
        files:
          type: array
          items:
            type: string
            format: binary
        entityType:
          $ref: '#/components/schemas/EntityTypes'
        entityId:
          type: integer
          format: int64
      required:
        - files
        - entityType

    FileInfoDto:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 1
        entityType:
          allOf:
            - $ref: '#/components/schemas/EntityTypes'
            - example: 'post'
        entityId:
          type: integer
          format: int64
          example: 1
        uploadId:
          type: string
          format: uuid
          example: '369c4620-adee-4526-a0d8-a1db20bcf5b2'
        originalFilename:
          type: string
          example: sample.jpg
        lastModified:
          type: integer
          format: int64
          example: 1664629542
        size:
          type: integer
          format: int64
          example: 123456
        url:
          type: string
          example: 'https://aws.s3.amazonaws.com/my-bucket/61/dd/61ddc0045c05ba7537b63e63184b9203.jpg'

    FileList:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/FileInfoDto'

    IndexedFileList:
      type: object
      properties:
        data:
          type: object
          properties:
            id:
              type: array
              items:
                $ref: '#/components/schemas/FileInfoDto'

    # files end

    # roles begin
    NewRoleList:
      type: object
      properties:
        id:
          type: string
          example: 1
        title:
          type: string
          example: Admin
        code:
          type: string
          example: ADMIN
        permissions:
          $ref: '#/components/schemas/PermissionsAction'

    PermissionsAction:
      type: object
      properties:
        create:
          type: string
          example:
            - crm.lead.create.mine
            - crm.lead.create.allowed
            - crm.lead.create.department
        view:
          type: string
          example:
            - crm.lead.view.mine
            - crm.lead.view.allowed
            - crm.lead.view.department
        edit:
          type: string
          example:
            - crm.lead.edit.mine
            - crm.lead.edit.allowed
            - crm.lead.edit.department
        delete:
          type: string
          example:
            - crm.lead.delete.mine
            - crm.lead.delete.allowed
            - crm.lead.delete.department
        export:
          type: string
          example:
            - crm.lead.export.mine
            - crm.lead.export.allowed
            - crm.lead.export.department

    RoleList:
      type: object
      properties:
        id:
          type: string
          example: 1
        title:
          type: string
          example: Admin
        code:
          type: string
          example: ADMIN
        userlist:
          $ref: '#/components/schemas/Userlist'
        departmentlist:
          $ref: '#/components/schemas/Departmentlist'

    Departmentlist:
      type: array
      items:
        $ref: '#/components/schemas/DepartmentForRole'

    DepartmentForRole:
      type: object
      properties:
        id:
          type: string
          example: 1
        name:
          type: string
          example: Employee
        dateUpdate:
          $ref: '#/components/schemas/Date'

    Userlist:
      type: array
      items:
        $ref: '#/components/schemas/UserForRole'

    UserForRole:
      type: object
      properties:
        id:
          type: string
          example: 1
        firstName:
          type: string
          example: Stas
        lastName:
          type: string
          example: Raranetskyi
        avatar:
          type: string
          example: path to avatar
        dateUpdate:
          $ref: '#/components/schemas/Date'

    RoleStore:
      type: object
      properties:
        title:
          type: string
          example: Admin
        code:
          type: string
          example: ADMIN
        permissions:
          $ref: '#/components/schemas/PermissionsStore'

    RoleUpdate:
      type: object
      properties:
        title:
          type: string
          example: Admin
        permissions:
          $ref: '#/components/schemas/PermissionsStore'

    PermissionsStore:
      type: array
      items:
        type: string
      example:
        - crm.lead.edit.mine
        - crm.lead.delete.allowed
        - crm.lead.edit.department

    PermissionsList:
      type: object
      properties:
        create:
          type: string
          example:
            - crm.lead.create.allowed
            - crm.contact.create.allowed
            - crm.company.create.allowed
            - crm.deal.create.allowed
            - crm.invoice.create.allowed
            - crm.product.create.allowed
            - crm.activity.create.allowed
            - hrm.hiring.create.allowed
            - hrm.candidate.create.allowed
            - hrm.department.create.allowed
            - hrm.employee.create.allowed
            - tasks.task.create.allowed
            - tasks.board.create.allowed
            - tasks.template.create.allowed
        view:
          type: string
          example:
            - crm.lead.view.allowed
            - crm.lead.view.department
            - crm.lead.view.mine
            - crm.contact.view.allowed
            - crm.contact.view.department
            - crm.contact.view.mine
            - crm.company.view.allowed
            - crm.company.view.mine
            - crm.deal.view.allowed
            - crm.deal.view.mine
            - crm.invoice.view.allowed
            - crm.invoice.view.mine
            - crm.product.view.allowed
            - crm.activity.view.allowed
            - crm.activity.view.mine
            - hrm.hiring.view.allowed
            - hrm.candidate.view.allowed
            - hrm.department.view.allowed
            - hrm.employee.view.allowed
            - hrm.employee.view.mine
            - tasks.task.view.allowed
            - tasks.task.view.department
            - tasks.task.view.mine
            - tasks.board.view.allowed
            - tasks.board.view.department
            - tasks.template.view.allowed
            - tasks.template.view.department
        edit:
          type: string
          example:
            - crm.lead.edit.allowed
            - crm.lead.edit.department
            - crm.lead.edit.mine
            - crm.contact.edit.allowed
            - crm.contact.edit.department
            - crm.contact.edit.mine
            - crm.company.edit.allowed
            - crm.company.edit.mine
            - crm.deal.edit.allowed
            - crm.deal.edit.mine
            - crm.invoice.edit.allowed
            - crm.invoice.edit.mine
            - crm.product.edit.allowed
            - crm.activity.edit.allowed
            - crm.activity.edit.mine
            - hrm.hiring.edit.allowed
            - hrm.candidate.edit.allowed
            - hrm.department.edit.allowed
            - hrm.employee.edit.allowed
            - hrm.employee.edit.mine
            - tasks.task.edit.allowed
            - tasks.task.edit.department
            - tasks.task.edit.mine
            - tasks.board.edit.allowed
            - tasks.board.edit.mine
            - tasks.template.edit.allowed
            - tasks.template.edit.mine
            - news_feed.news.edit.allowed
        delete:
          type: string
          example:
            - crm.lead.delete.allowed
            - crm.contact.delete.allowed
            - crm.company.delete.allowed
            - crm.deal.delete.allowed
            - crm.invoice.delete.allowed
            - crm.product.delete.allowed
            - crm.activity.delete.allowed
            - crm.activity.delete.mine
            - hrm.hiring.delete.allowed
            - hrm.candidate.delete.allowed
            - hrm.department.delete.allowed
            - hrm.employee.delete.allowed
            - tasks.task.delete.allowed
            - tasks.task.delete.mine
            - tasks.board.delete.allowed
            - tasks.board.delete.mine
            - tasks.template.delete.allowed
            - tasks.template.delete.mine
            - news_feed.news.delete.allowed
        export:
          type: string
          example:
            - crm.lead.export.allowed
            - crm.contact.export.allowed
            - crm.company.export.allowed
            - crm.deal.export.allowed
            - crm.invoice.export.allowed
            - crm.product.export.allowed
            - crm.activity.export.allowed
            - hrm.hiring.export.allowed
            - hrm.candidate.export.allowed
            - hrm.department.export.allowed
            - hrm.employee.export.allowed
            - tasks.task.export.allowed
            - tasks.template.export.allowed

    # roles end

    # comments begin

    CommentServiceDto:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 1
        entityType:
          allOf:
            - $ref: '#/components/schemas/EntityTypes'
            - example: 'post'
        entityId:
          type: integer
          format: int64
          example: 1
        message:
          type: string
          example: Message comment
        authorId:
          type: string
          example: 1
        date:
          $ref: '#/components/schemas/Date'

    CommentExtrasServiceDto:
      type: object
      properties:
        reactions:
          type: array
          items:
            $ref: '#/components/schemas/ReactionServiceDto'
        nextId:
          type: integer
          format: int64
          example: 3
          description: If NULL, this is the last comment if the (sub)thread
        prevId:
          type: integer
          format: int64
          example: 1
          description: If NULL, this is the first comment if the (sub)thread

    ReactionServiceDto:
      type: object
      properties:
        reaction:
          type: integer
          format: int64
          example: 128513
          description: Represents the UNICODE symbol such as 0x0001F601
        amount:
          type: integer
          format: int32
          example: 53
        entityId:
          type: integer
          format: int64
          example: 1

    CreateCommentServiceDto:
      type: object
      properties:
        entityType:
          allOf:
            - $ref: '#/components/schemas/EntityTypes'
            - example: 'post'
        entityId:
          type: integer
          format: int64
          example: 1
        message:
          type: string
          example: Message post
      required:
        - entityType
        - entityId

    UpdateCommentServiceDto:
      type: object
      properties:
        message:
          type: string
          example: Message post

    # comments end

    # invite begin
    InvitesStore:
      type: array
      items:
        $ref: '#/components/schemas/InviteExample'
      example:
        - email: stark@gmail.com
          firstName: Tony
          lastName: Stark
        - email: benner@gmail.com
          firstName: Bruce
          lastName: Benner


    InviteExample:
      type: object
      properties:
        email:
          type: string
          example: stark@gmail.com
        firstName:
          type: string
          example: Tony
        lastName:
          type: string
          example: Stark

    InvitesBatchStore:
      type: array
      items:
        type: string
      example:
        - stark@gmail.com
        - benner@gmail.com

    Success:
      type: object
      properties:
        status:
          type: boolean
          example: true
        message:
          type: string
          example: success

    # invite end

    # group begin
    TransferGroup:
      type: object
      properties:
        oldUserId:
          type: string
          example: 2
        newUserId:
          type: string
          example: 55
        owner:
          type: boolean
          example: true
          default: false
        moderator:
          type: boolean
          example: false
          default: false
      required:
        - oldUserId
        - newUserId

    TransferGroupToDepartment:
      type: object
      properties:
        oldUserId:
          type: string
          example: 2
        departmentUserIds:
          type: array
          items:
            type: string
          example:
            - "11"
            - "22"
        owner:
          type: boolean
          example: true
          default: false
        moderator:
          type: boolean
          example: false
          default: false
      required:
        - oldUserId
        - newUserId

    TransferGroupToMembers:
      type: object
      properties:
        oldUserId:
          type: string
          example: 2
      required:
        - oldUserId

    TransferGroupSuccess:
      type: object
      properties:
        status:
          type: boolean
          example: true
        countGroups:
          type: integer
          example: 2
        countModerator:
          type: integer
          example: 4

    TransferGroupToMembersSuccess:
      type: object
      properties:
        status:
          type: boolean
          example: true
        countGroups:
          type: integer
          example: 2

    CreateUpdateGroupDto:
      type: object
      properties:
        name:
          type: string
          example: Title group
        groupType:
          type: string
          example: public
          description: Available values - public, private, secret.
        description:
          type: string
          example: description group
        groupTheme:
          type: string
          example: group theme
        ownerId:
          type: string
          example: 1
          description: "1"
        moderatorsIds:
          type: array
          items:
            type: string
            format: binary
        usersIds:
          type: array
          items:
            type: string
            format: binary
      required:
        - name
        - groupType

    Group:
      type: object
      properties:
        id:
          type: string
          example: 1
        name:
          type: string
          example: Title group
        groupType:
          type: string
          example: private
        ownerId:
          type: string
          example: 1
        archival:
          type: boolean
        description:
          type: string
          example: private
        groupTheme:
          type: string
          example: private
        logo:
          type: string
          example: /8c/nsfkjnns486sd4f56.jpg
        moderatorsIds:
          type: array
          items:
            type: string
          example:
            - "11"
            - "22"
        usersIds:
          type: array
          items:
            type: string
          example:
            - "1"
            - "2"

    SendInviteToGroup:
      type: object
      properties:
        groupId:
          type: string
          example: 1
        userIds:
          type: array
          items:
            type: string
          example:
            - "11"
            - "22"

    JoinRequestNotFound:
      content:
        application/json:
          schema:
            type: object
            properties:
              errors:
                type: object
                properties:
                  text:
                    type: array
                    items:
                      type: string
                      example: join request not found
              status:
                type: boolean
                example: true

    # group end

    # crm begin
    Entity:
      type: object
      properties:
        title:
          type: string
          example: Leads
        tableName:
          type: string
          example: leads
        type:
          type: string
          example: leads
        sort:
          type: integer
          example: 1

    Field_Type:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: String
        type:
          type: string
          example: string
        multiple:
          type: boolean
          example: true

    Field_Types_List:
      type: array
      items:
        $ref: '#/components/schemas/Field_Type'
      example:
        - id: 1
          name: String
          type: string
          multiple: false
        - id: 2
          name: Textarea
          type: textarea
          multiple: false
        - id: 3
          name: Integer
          type: integer
          multiple: false
        - id: 3
          name: List
          type: list
          multiple: false
        - id: 4
          name: Date and time
          type: datetime
          multiple: false
        - id: 5
          name: Money
          type: money
          multiple: false
        - id: 6
          name: Label
          type: label
          multiple: true
        - id: 7
          name: Phone
          type: phone
          multiple: true
        - id: 8
          name: Email
          type: email
          multiple: true
        - id: 9
          name: Social
          type: social
          multiple: true
        - id: 10
          name: Link
          type: link
          multiple: false
        - id: 11
          name: Boolean
          type: boolean
          multiple: false
        - id: 12
          name: User
          type: user_id
          multiple: false
        - id: 13
          name: Photo
          type: photo
          multiple: false
        - id: 14
          name: File
          type: file
          multiple: false
        - id: 15
          name: Address
          type: address
          multiple: false
        - id: 16
          name: Legal details
          type: legal_details
          multiple: false
        - id: 17
          name: Entity_reference
          type: entity_reference
          multiple: false
        - id: 18
          name: UTM
          type: utm
          multiple: false

    Field:
      type: object
      properties:
        name:
          type: string
          example: Source
        code:
          type: string
          example: source
        required:
          type: boolean
          example: false
        editable:
          type: boolean
          example: true
        show:
          type: boolean
          example: true
        hidden:
          type: boolean
          example: false
        multiple:
          type: boolean
          example: false
        fieldSectionId:
          type: integer
          example: 11
        default_value:
          type: string
          example: value
        tooltip:
          type: string
          example: example
        type:
          type: string
          example: entity_reference
        entity_reference_id:
          type: integer
          example: 123
        sort:
          type: integer
          example: 90

    CreateCrmEntity:
      type: object
      properties:
        title:
          type: string
          example: Lead example
        owner:
          type: integer
          example: 1
        source:
          type: string
          example: shop
        funnel_id:
          type: integer
          example: 5
        email:
          $ref: '#/components/schemas/multipleEmail'
        phone:
          $ref: '#/components/schemas/Phone'
        messengers:
          $ref: '#/components/schemas/SocialMedia'

    CrmEntity:
      type: object
      properties:
        title:
          type: string
          example: Lead example
        owner:
          type: integer
          example: 1
        source:
          type: string
          example: shop
        email:
          $ref: '#/components/schemas/multipleEmail'
        phone:
          $ref: '#/components/schemas/Phone'
        messengers:
          $ref: '#/components/schemas/SocialMedia'

    CrmEntityResponce:
      type: object
      properties:
        title:
          type: string
          example: Lead example
        owner:
          type: integer
          example: 1
        created_by:
          type: integer
          example: 1
        changed_by:
          type: integer
          example: 1
        converted:
          type: boolean
          example: false
        first_name:
          type: string
          example: Johnny
        last_name:
          type: string
          example: Stark
        patronymic:
          type: string
          example: ""
        company_name:
          type: string
          example: ""
        position:
          type: string
          example: Owner
        utm_source:
          type: string
          example: ""
        utm_medium:
          type: string
          example: ""
        utm_campaign:
          type: string
          example: ""
        utm_content:
          type: string
          example: ""
        utm_term:
          type: string
          example: ""
        source:
          $ref: '#/components/schemas/SourceList'
        email:
          $ref: '#/components/schemas/multipleEmail'
        phone:
          $ref: '#/components/schemas/Phone'
        messengers:
          $ref: '#/components/schemas/SocialMedia'
        kanban_status:
          type: string
          example: IN_WORK
        kanban_reason_id:
          type: integer
          example: 11
        kanban_stage_id:
          type: integer
          example: 22


    SourceList:
      properties:
        title:
          type: string
          example: 'Shop'
        value:
          type: string
          example: shop
        color:
          type: string
          example: '#6AD01F'
        sort:
          type: integer
          example: 20
        selected:
          type: boolean
          example: true
      example:
        - title: 'Shop'
          value: shop
          color: ''
          sort: 10
          selected: true
        - title: 'Site'
          value: site
          color: ''
          sort: 20
          selected: false

    Funnel:
      type: object
      properties:
        title:
          type: string
          example: 'Sales funnel'
        funnel_code:
          type: string
          example: 'sales_funnel'
        active:
          type: boolean
          example: true
        default:
          type: boolean
          example: false

    UpdateFunnel:
      type: object
      properties:
        title:
          type: string
          example: 'Sales funnel'
        active:
          type: boolean
          example: true
        default:
          type: boolean
          example: false

    CreateCrmStage:
      type: object
      properties:
        title:
          type: string
          example: 'New Deal'
        color:
          type: string
          example: '#6AD01F'
        sort:
          type: integer
          example: 10


    CrmStage:
      type: object
      properties:
        title:
          type: string
          example: 'New Deal'
        color:
          type: string
          example: '#6AD01F'
        stage_code:
          type: string
          example: 'new_deal'
        system_stage:
          type: boolean
          example: false
        sort:
          type: integer
          example: 10
        reasons:
          type: string
          example: [ ]

    CrmStageWithReason:
      type: object
      properties:
        title:
          type: string
          example: 'New Deal'
        color:
          type: string
          example: '#6AD01F'
        stage_code:
          type: string
          example: 'new_deal'
        system_stage:
          type: boolean
          example: true
        sort:
          type: integer
          example: 10
        reasons:
          $ref: '#/components/schemas/CrmReason'

    CrmReason:
      properties:
        id:
          type: integer
          example: 1
        title:
          type: string
          example: 'New'
        sort:
          type: integer
          example: 20
      example:
        - id: 1
          title: 'Shop'
          sort: 10
        - id: 2
          title: 'Site'
          sort: 20

    CrmEAdditionalFields:
      type: object
      properties:
        id:
          type: integer
          example: 12
        created_by:
          type: integer
          example: 1
        changed_by:
          type: integer
          example: 1
        created_at:
          type: integer
          example: 12156465
        updated_at:
          type: integer
          example: 12156465

    CrmTaskTypes:
      type: string
      enum:
        - task
        - call
        - meeting
        - chat
        - email

    CrmTaskStatuses:
      type: string
      enum:
        - planned
        - done
        - cancelled

    CrmTaskEntity:
      type: object
      properties:
        id:
          type: integer
          format: int64
        createdBy:
          type: integer
          format: int64
        title:
          type: string
          example: Title example
        type:
          $ref: '#/components/schemas/CrmTaskTypes'
        status:
          $ref: '#/components/schemas/CrmTaskStatuses'
        description:
          type: string
        startTime:
          type: integer
          format: int64
          example: 1674950100
        endTime:
          type: integer
          format: int64
          example: 1674951000
        responsibleId:
          type: integer
          format: int64
          example: 5
        companyId:
          type: integer
          format: int64
        participants:
          type: array
          items:
            type: integer
            format: int64
          example: [ 123,234,345 ]
        contacts:
          type: array
          items:
            $ref: '#/components/schemas/CrmEntity'
        deals:
          type: array
          items:
            $ref: '#/components/schemas/CrmEntity'
        leads:
          type: array
          items:
            $ref: '#/components/schemas/CrmEntity'
        company:
          $ref: '#/components/schemas/CrmEntity'

    CreateUpdateCrmTaskDto:
      type: object
      properties:
        title:
          type: string
          example: Sed non massa
        createdBy:
          type: integer
          format: int64
          example: 5
        type:
          allOf:
            - $ref: '#/components/schemas/CrmTaskTypes'
            - example: meeting
        status:
          allOf:
            - $ref: '#/components/schemas/CrmTaskStatuses'
            - example: planned
        description:
          type: string
          example: Duis id rutrum risus. Sed in urna.
        startTime:
          type: integer
          format: int64
          example: 1674950100
        endTime:
          type: integer
          format: int64
          example: 1674951000
        responsibleId:
          type: integer
          format: int64
          example: 5
        companyId:
          type: integer
          format: int64
          example: 67
        participants:
          type: array
          items:
            type: integer
            format: int64
          example: [ 123,234,345 ]
        deals:
          type: array
          items:
            type: integer
            format: int64
          example: [ 56 ]
        leads:
          type: array
          items:
            type: integer
            format: int64
          example: [ 34 ]
        contacts:
          type: array
          items:
            type: integer
            format: int64
          example: [ 12,32 ]

    conversionBody:
      type: array
      items:
        properties:
          table_name:
            type: string
            example: 'companies'
      example:
        - table_name: 'contacts'
        - table_name: 'companies'


    conversionBodyWithFunnelId:
      type: array
      items:
        properties:
          table_name:
            type: string
            example: 'deals'
          funnel_id:
            type: integer
            example: 11
      example:
        - table_name: 'deals'
          funnel_id: 11


    ReasonList:
      type: object
      properties:
        SUCCESS:
          type: array
          items:
            properties:
              id:
                type: integer
                example: 11
              title:
                type: string
                example: 'Won'
              sort:
                type: integer
                example: 10
        FAIL:
          type: array
          items:
            $ref: '#/components/schemas/Reason'

    Reason:
      type: object
      properties:
        id:
          type: integer
          example: 11
        title:
          type: string
          example: 'Other'
        sort:
          type: integer
          example: 10

    CreateReason:
      type: object
      properties:
        title:
          type: string
          example: 'Won'
        sort:
          type: integer
          example: 10

    EventCallList:
      type: array
      items:
        type: object
        properties:
          id:
            type: integer
            example: 1
          task_id:
            type: integer
            example: 1
          contact_id:
            type: integer
            example: null
          company_id:
            type: integer
            example: null
          deal_id:
            type: integer
            example: 1
          lead_id:
            type: integer
            example: null
          entity_table:
            type: string
            example: deals
          subject:
            type: string
            example: Sales contract negotiation
          call_type:
            type: string
            example: incoming
            enum:
              - outgoing
              - incoming
          ended_call_status:
            type: string
            example: missed
            enum:
              - null
              - success
              - missed
              - declined
              - subscriber_unavailable
              - number_not_exist
              - call_failure
          from:
            type: string
            example: 380632232232
          to:
            type: string
            example: 380632232232
          begin_time:
            type: integer
            example: 1681893335
          end_time:
            type: integer
            example: 1681893685
          duration:
            type: integer
            example: 350
          call_record_link:
            type: string
            example: null
          note:
            type: string
            example: Call from the client
          integration_code:
            type: string
            example: unitalk_integration
          external_id:
            type: integer
            example: null
            description: Non-required. Used for communication with integrations
          tmp_id:
            type: integer
            example: null
            description: Non-required. Used for communication with integrations
          contacts:
            items:
              $ref: '#/components/schemas/CallEventContacts'
            type: array
          companies:
            type: array
            example: []
            description: Having same format as contacts field. Or could be empty array
          employees:
            type: array
            description: Employees that have been dialed during the call. Could be omitted if don't have such information
            example: [1, 2, 3]
          tasks:
            type: object
            description: The task data for provided task_id
            properties:
              id:
                type: integer
                example: 1
              title:
                type: string
                example: Missed call from 380667654321

    CallEventDto:
      type: object
      properties:
        integration_code:
            type: string
            example: unitalk_integration
            description: It could be integration_code or unique code of source where data are imported from
            required: true
        external_id:
          type: integer
          example: 1
          description: It should be unique for one particular integration_code or null if adding call event directly (e.g. import)
          required: false
        tmp_id:
          type: integer
          example: 1
          description: It should be unique for one particular integration_code or null if adding call event directly (e.g. import)
          required: false
        task_id:
          type: integer
          example: null
          description: If task_id is provided the task's creation for missed incoming call is passing away
          required: false
        contact_id:
          type: integer
          example: null
          description: If one of dynamic binding fields (deal_id, lead_id, contact_id, company_id) is provided
                       the automatic binding with existing crm entities is passing away
          required: false
        company_id:
          type: integer
          example: null
          description: If one of dynamic binding fields (deal_id, lead_id, contact_id, company_id) is provided
                       the automatic binding with existing crm entities is passing away
          required: false
        lead_id:
          type: integer
          example: null
          description: If one of dynamic binding fields (deal_id, lead_id, contact_id, company_id) is provided
                       the automatic binding with existing crm entities is passing away
          required: false
        deal_id:
          type: integer
          example: null
          description: If one of dynamic binding fields (deal_id, lead_id, contact_id, company_id) is provided
                       the automatic binding with existing crm entities is passing away
          required: false
        entity_table:
          type: string
          description: The base entity the call event connected to could be provided or could be omitted in a case
                       if just have usual call. In this the "empty" value will be automatically filled and
                       the call event will be shown just in call logs history
          enum:
            - empty
            - leads,
            - deals
            - contacts
            - companies
          required: false
        employees:
          type: array
          description: Employees that have been dialed during the call. Could be omitted if don't have such information
          example: [1, 2, 3]
          required: false
        contacts:
          type: array
          description: The contacts that have connection with particulat call event. Could be omitted if don't have such information
          example: [1, 2, 3]
          required: false
        companies:
          type: array
          description: The companies that have connection with particulat call event. Could be omitted if don't have such information
          example: [1, 2, 3]
          required: false
        subject:
          type: string
          example: First call
          description: Could be omitted. In such case the default value will be "Call"
          required: false
        call_type:
          type: string
          enum:
            - outgoing
            - incoming
          required: true
        ended_call_status:
          type: string
          enum:
            - null
            - success
            - missed
            - declined
            - subscriber_unavailable
            - number_not_exist
            - call_failure
        from:
          type: string
          example: 380632232232
          required: true
        to:
          type: string
          example: null
          description: Could be null cause on new event call from telephony we don't have "to" value for sure
          required: false
        begin_time:
          type: integer
          example: 1681893335
          required: false
        end_time:
          type: integer
          example: 1681893685
          required: false
        duration:
          type: integer
          example: 350
          required: false
        call_record_link:
          type: string
          example: null
          required: false
          description: It could be call link that telephony provides or link issued by import flow (via files-backend)
        note:
          type: string
          example: Fixed agenda
          required: false


    CallEventContacts:
      properties:
        id:
          example: 1
          type: integer
        title:
          example: George Everest
          type: string
      type: object
    # crm end


    # search begin
    SearchDepartment:
      properties:
        headId:
          example: "41"
          type: string
        id:
          example: 1
          type: integer
        name:
          example: Відділ продукту
          type: string
      type: object

    SearchGroup:
      properties:
        description:
          example: <b>need use swagger-ui@4.x</b>
          type: string
        id:
          example: 1231
          type: integer
        logo:
          example: https://uspacy-stage-s3-bucket.s3.eu-west-1.amazonaws.com/02/c4/02c46a2bdffc39bd2cdb8582e4afe3bc.jpg
          type: string
        name:
          example: Describe swagger api for
          type: string
      type: object

    SearchNewsfeed:
      properties:
        id:
          example: 1231
          type: integer
        message:
          example: <b>need use swagger-ui@4.x</b>
          type: string
        title:
          example: Describe swagger api for
          type: string
      type: object

    SearchTask:
      properties:
        body:
          example: <b>need use swagger-ui@4.x</b>
          type: string
        deadline:
          example: 1654180120
          type: integer
        id:
          example: 1231
          type: integer
        responsibleId:
          example: 223
          type: integer
        title:
          example: Describe swagger api for
          type: string
      type: object

    SearchUser:
      properties:
        id:
          example: 1
          type: integer
      type: object

    SearchResponse:
      properties:
        data:
          properties:
            departments:
              items:
                $ref: '#/components/schemas/SearchDepartment'
              type: array
            groups:
              items:
                $ref: '#/components/schemas/SearchGroup'
              type: array
            newsfeed:
              items:
                $ref: '#/components/schemas/SearchNewsfeed'
              type: array
            tasks:
              items:
                $ref: '#/components/schemas/SearchTask'
              type: array
            users:
              items:
                $ref: '#/components/schemas/SearchUser'
              type: array
          type: object
      type: object


    # search end

    # apps begin
    App:
      type: array
      items:
        type: object
        properties:
          id:
            type: integer
            example: 3
          name:
            type: string
            example: Unitalk telelephony
          code:
            type: string
            example: unitalk_integration
          short_description:
            type: string
            example: Take customer interaction to the next level with industry-leading telephony capabilities
          position:
            type: string
            example: CTO
          description:
            type: string
            example: null
          logo:
            type: string
            example: bb/d6/bbd61f630cfebb0aaca6c90bd2a57eb7.svg
          active:
            type: boolean
            example: true
          paid:
            type: boolean
            example: false
          price:
            type: string
            example: null
          developer_name:
            type: string
            example: Mahoney
          developer_link:
            type: string
            example: null

    CreateUpdateAppDto:
      type: object
      properties:
        name:
          type: string
          example: Unitalk telelephony
        code:
          type: string
          example: unitalk_integration
        short_description:
          type: string
          example: Take customer interaction to the next level with industry-leading telephony capabilities
        redirect_url:
          type: string
          example: http://localhost:8080
        callback_url:
          type: string
          example: http://localhost:8080
        developer_name:
          type: string
          example: Mahoney
        developer_link:
          type: string
          example: https://blue-oyster.org
    # apps end
