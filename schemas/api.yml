openapi: '3.1.0'
info:
  description: |
    This is [Uspacy](https://uspacy.com)  API documentation. You can find out more about Swagger at [http://swagger.io](http://swagger.io) or on [irc.freenode.net, #swagger](http://swagger.io/irc/).
    or on [irc.freenode.net, #swagger](http://swagger.io/irc/).

    # Introduction
    To use this API you need to get Bearer token. To get Bearer token you have two options:
      - sign in on user's Uspacy using email and password
      - create Marketplace application and get token in callback after your application was installed by user

    # SDKs and boilerplates
    We provide SDKs for different languages to simplify integration with Uspacy API. You can find them on [Uspacy GitHub](https://github.com/Uspacy/)
    We have also prepared a few boilerplates to help you start developing your application
      - [Uspacy Marketplace application boilerplate](https://github.com/Uspacy/app-laravel-template) - Laravel application with Uspacy authentication and token refreshment
      - [Uspacy Golang SDK](https://github.com/Uspacy/uspacy-go-sdk) – Golang SDK for Uspacy API, in active development
      - [Uspacy TypeScript SDK](https://github.com/Uspacy/uspacy-sdk) – TypeScript SDK for Uspacy API, deprecated

    # Marketplace applications development
    To develop Marketplace application you need to create an application in Uspacy Marketplace. You can do it via request to [Uspacy support](mailto:support@uspacy.com).
    You will receive ```client_id``` and ```client_secret``` for your application. You will also need to provide ```callback_url``` for your application.
    After that, the install/uninstall endpoints for your applications should be implemented. Please note that the path for these endpoints should follow this format:
    ```{{callback_url}}/portals/install``` and ```{{callback_url}}/portals/uninstall```, respectively.
    For example, if your ```callback_url``` is ```https://google.com/handler/v1```, we will send webhook to ```https://google.com/handler/v1/portals/install``` on install and ```https://google.com/handler/v1/portals/uninstall``` on uninstall.
    After a user installs your application, you will receive a POST request with JSON in the callback.
    This will contain the ```token```, ```refresh_token```, and ```expiry_date``` fields.
    Additionally, the ```integration_token``` will be provided as a Bearer token in the Authorization header.
    It is signed using the ```client_secret``` and the SHA-256 algorithm. All future requests from your application's frontend to its backend should be secured with the ```integration_token```.
    The ```integration_token``` is accessible through using the [appService](#tag/appService) for users with administrative rights.
    Example of request:
    ```json
    {
      "expiry_date": 1683649235,
      "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjEyMzEyMzEyMyIsImZpcnN0TmFtZSI6IlN0YXMiLCJsYXN0TmFtZSI6IlJhcmFuZXRza3lpIiwiZW1haWwiOiJyYXIuc3Rhc0BnbWFpbC5jb20iLCJyb2xlcyI6WyJVU0VSIiwiQURNSU4iLCJPV05FUiJdfQ.au16u5LHJqdvhiPrpXDhN4NZn8Cae09I6BEmed7mt8w",
      "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjEyMzEyMzEyMyIsImZpcnN0TmFtZSI6IlN0YXMiLCJsYXN0TmFtZSI6IlJhcmFuZXRza3lpIiwiZW1haWwiOiJyYXIuc3Rhc0BnbWFpbC5jb20iLCJyb2xlcyI6WyJVU0VSIiwiQURNSU4iLCJPV05FUiJdfQ.au16u5LHJqdvhiPrpXDhN4NZn8Cae09I6BEmed7mt8w"
    }
    ```
    You need to save ```token```, ```refresh_token``` and ```expiry_date```  in your database. You will need to use ```token``` to make requests to Uspacy API. ```refresh_token``` is used to refresh ```token``` when it expires.
    You should refresh the ```token``` before it expires. To do this, make a POST request to ```https://{domain}/auth/v1/auth/refresh_token/``` with the ```refresh_token``` in the body. The ```domain``` refers to the portal's domain that you received from the user's token headers upon application installation.
    You will receive new ```jwt```, ```refreshToken``` and ```expireInSeconds``` in response. You need to save new ```token```, ```refresh_token``` and update ```expiry_date``` in your database.


  title: Uspacy api
  version: v1
servers:
  - url: https://{domain}.uspacy.ua
    description: Ukrainian server
  - url: https://{domain}.uspacy.eu
    description: EU server
  - url: https://{domain}.uspacy.com.br
    description: Brazilian server
  - url: https://{domain}.uspacy.com
    description: International server
tags:
  - name: authService
  - name: usersService
  - name: departments (usersService)
  - name: roles (usersService)
  - name: invite (usersService)
  - name: newsFeedService
  - name: tasksService
  - name: filesService
  - name: commentsService
  - name: groupService
  - name: crmService
  - name: searchService
  - name: fileImport
  - name: appService
  - name: history
  - name: activitiesService

paths:

  # auth begin
  /auth/v1/auth/sign_in:
    post:
      summary: Sign in
      description: Sign in user by email, password. Returns token, refreshToken
      tags:
        - authService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignInDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
        '403':
          description: Access Denied
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: object
                    properties:
                      text:
                        type: array
                        items:
                          type: string
                          enum:
                            - You need to provide a verification code
                            - Incorrect verification code
                            - Attempts count exceeded. Try again later
                  status:
                    type: boolean
                    example: true
  /auth/v1/auth/confirm_email:
    post:
      summary: Confirm user email
      description: Confirm email user. Returns token, refreshToken
      tags:
        - authService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConfirmEmailDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
        '403':
          $ref: '#/components/responses/Forbidden'
        '422':
          $ref: '#/components/responses/ValidationError'
  /auth/v1/auth/refresh_token:
    post:
      summary: Refresh token
      description: refreshToken exprired token. Returns new token, refreshToken
      tags:
        - authService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /auth/v1/auth/register:
    post:
      summary: New user registration by invitation
      description: New user registration by invitation. Returns token, refreshToken
      tags:
        - authService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegistrationByInvitation'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Token'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /auth/v1/users:
    post:
      summary: Sign up
      description: Sign up user by firstName, lastName, email, password.  Returns created user
      tags:
        - authService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignUpDto'
      responses:
        '201':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/User'
                  - type: object
                    properties:
                      position:
                        example: ''
                      phone:
                        example: "[]"
                      birthday:
                        example: 0
                      roles:
                        example: '["Employee"]'
                      departmentsIds:
                        example: "[]"
                      socialMedia:
                        example: "[]"

          description: Created
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '422':
          $ref: '#/components/responses/ValidationError'
      security:
        - bearerAuth: [ ]
  /auth/v1/users/forgot_password:
    post:
      summary: Initiate password reset
      description: Reset password. Available to unauthorized users.
      tags:
        - authService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EmailPasswordDto'
      responses:
        '200':
          description: OK
        '403':
          $ref: '#/components/responses/Forbidden'
  /auth/v1/users/reset_password:
    post:
      summary: Change password with token
      description: Reset password. Available to unauthorized users.
      tags:
        - authService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EmailPasswordTokenDto'
      responses:
        '200':
          description: OK
        '403':
          $ref: '#/components/responses/Forbidden'
  /auth/v1/users/{userId}/change_password:
    patch:
      summary: Update user password
      parameters:
        - $ref: '#/components/parameters/userId'
      description: Update user password by id.
      tags:
        - authService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangePasswordDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - bearerAuth: [ ]
  /auth/v1/users/change_password:
    patch:
      summary: Update password
      description: Update self password
      tags:
        - authService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangeSelfPasswordDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /auth/v1/users/check_email:
    get:
      summary: Email existence check
      description: Email existence check.
      tags:
        - authService
      parameters:
        - $ref: '#/components/parameters/searchEmail'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: email already exist
        '204':
          $ref: '#/components/responses/NoContent'
      security:
        - bearerAuth: [ ]
  # auth end

  # activities begin
  /activities/v1/activities:
    get:
      tags:
        - activitiesService
      summary: Get activities list
      parameters:
        - name: responsible_id
          in: query
          schema:
            type: array
            items:
              type: integer
        - name: title
          in: query
          schema:
            type: string
        - $ref: '#/components/parameters/list'
        - $ref: '#/components/parameters/page'
        - name: params
          in: query
          schema:
            type: object
            additionalProperties:
              type: array
              items:
                type: integer
          style: form
          explode: true
          example:
            leads[]: 1
            companies[]: 23
            contacts[]: 41
        - name: id
          in: query
          schema:
            type: array
            items:
              type: integer
        - name: start_time
          in: query
          schema:
            type: array
            items:
              type: array
              items:
                type: integer
        - name: type
          in: query
          schema:
            type: array
            items:
              $ref: '#/components/schemas/ActivityType'
        - name: priority
          in: query
          schema:
            type: array
            items:
              $ref: '#/components/schemas/ActivityPriority'
        - name: status
          in: query
          schema:
            $ref: '#/components/schemas/ActivityStatus'
        - name: boolean_operator
          in: query
          schema:
            type: string
            enum:
              - AND
              - OR
        - name: old_filter
          in: query
          schema:
            type: boolean
        - name: sort_by
          in: query
          schema:
            type: object
            additionalProperties:
              type: string
              enum:
                - desc
                - asc
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Activity'
                  - type: object
                    properties:
                      meta:
                        $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      tags:
        - activitiesService
      summary: Create activity
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - required:
                    - title
                    - start_time
                    - end_time
                - $ref: '#/components/schemas/CreateOrUpdateActivity'
                - type: object
                  properties:
                    created_by:
                      type: integer
                    created_at:
                      type: integer
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Activity'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '422':
          $ref: '#/components/responses/ValidationError'
      security:
        - bearerAuth: [ ]
  /activities/v1/activities/{activityId}:
    parameters:
      - $ref: '#/components/parameters/activityId'
    get:
      tags:
        - activitiesService
      summary: Show activity
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Activity'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - bearerAuth: [ ]
    patch:
      tags:
        - activitiesService
      summary: Update activity
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrUpdateActivity'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateOrUpdateActivity'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/ValidationError'
      security:
        - bearerAuth: [ ]
    delete:
      tags:
        - activitiesService
      summary: Delete activity by id
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - bearerAuth: [ ]
  /activities/v1/activities/mass_deletion:
    delete:
      tags:
        - activitiesService
      summary: Bulk deletion activities
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MassActionActivity'
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  # activities end

  # users begin
  /company/v1/users:
    get:
      summary: Get users list
      description: Get users list
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/User'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /company/v1/users/{userId}:
    parameters:
      - $ref: '#/components/parameters/userId'
    get:
      tags:
        - usersService
      summary: Get user by id
      description: Get user by id.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      summary: Update user data by id.
      description: Update user data by id.
      tags:
        - usersService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/ValidationError'
      security:
        - bearerAuth: [ ]
  /company/v1/users/{userId}/deactivate:
    post:
      summary: Deactivate user by id
      description: "Deactivate user by id.  Returns user data with active: false"
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/userId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/User'
                  - type: object
                    properties:
                      active:
                        example: false
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /company/v1/users/{userId}/activate:
    post:
      summary: Activate user by id
      description: "Activate user by id.  Returns user data with active: true"
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/userId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /company/v1/users/{userId}/update_roles:
    patch:
      summary: Update user roles by id.  Returns user data with new roles
      description: Update user roles by id.  Returns user data with new roles
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/userId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateRolesDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /company/v1/users/{userId}/update_position:
    patch:
      summary: Update user position by id.  Returns user data with new position
      description: Update user position by id.  Returns user data with new position
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/userId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserPosition'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]

  /company/v1/users/{userId}/settings:
    get:
      summary: Get user account settings by id.
      description: Get user account settings by id.
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/userId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/personalSettings'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - bearerAuth: [ ]
    patch:
      summary: Update user account settings by id.
      description: Update user account settings by id.
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/userId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/personalSettings'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/personalSettings'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/ValidationError'
      security:
        - bearerAuth: [ ]
  /company/v1/users/{userId}/twofa_status:
    get:
      summary: Get two-factor authentication status by id.
      description: Get two-factor authentication status by id.
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/userId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TwoFactorStatus'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - bearerAuth: [ ]
  /company/v1/users/{userId}/twofa_disable:
    patch:
      summary: Disable two-factor authentication by id.
      description: Disable two-factor authentication by id.
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/userId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TwoFactorStatusDisabled'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - bearerAuth: [ ]
  /company/v1/users/me:
    get:
      tags:
        - usersService
      summary: Get self profile
      description: Get self profile.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /company/v1/users/me/twofa_status:
    get:
      summary: Get two-factor authentication status
      description: Get two-factor authentication status
      tags:
        - usersService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TwoFactorStatus'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - bearerAuth: [ ]
  /company/v1/users/me/twofa_enable:
    patch:
      summary: Enable two-factor authentication in a two steps
      description: Enable two-factor authentication in a two steps
      tags:
        - usersService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TwoFactorEnable'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TwoFactorGetQr'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          description: 'The code has expired'
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: object
                    properties:
                      text:
                        type: array
                        items:
                          example: 'The code has expired'
                  status:
                    type: boolean
                    example: true
        '422':
          $ref: '#/components/responses/ValidationError'
      security:
        - bearerAuth: [ ]
  /company/v1/users/me/twofa_disable:
    patch:
      summary: Disable two-factor authentication
      description: Disable two-factor authentication
      tags:
        - usersService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TwoFactorStatusDisabled'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]


  /company/v1/users/search:
    get:
      summary: Search
      description: Search
      tags:
        - usersService
      parameters:
        - $ref: '#/components/parameters/searchEmail'
        - $ref: '#/components/parameters/searchFirstName'
        - $ref: '#/components/parameters/searchLastName'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/User'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /company/v1/users/upload_avatar:
    post:
      summary: Avatar upload
      description: Avatar upload
      tags:
        - usersService
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - avatar
              properties:
                avatar:
                  type: string
                  format: binary
                  example: avatar.png file
                userId:
                  type: string
                  example: 2
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/User'
                  - type: object
                    properties:
                      responsibleId:
                        type: string
                        example: 2
                      denial:
                        type: boolean
                        example: true

        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]

  /company/v1/users/get_users_by_field:
    post:
      summary: Getting a list of users by filter. Available to unauthorized users.
      description: Getting a list of users by filter. Available to unauthorized users.
      tags:
        - usersService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/getUsersByField'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/User'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /company/v1/users/me/settings:
    get:
      tags:
        - usersService
      summary: Get self settings
      description: Get self settings.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/personalSettings'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      summary: Update self settings
      description: Update self settings
      tags:
        - usersService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/personalSettings'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/personalSettings'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '422':
          $ref: '#/components/responses/ValidationError'
      security:
        - bearerAuth: [ ]
  # users end

  # departments begin
  /company/v1/departments:
    get:
      summary: Get departments list
      description: Get departments list
      tags:
        - departments (usersService)
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Department'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create department.
      description: Create department.
      tags:
        - departments (usersService)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DepartmentPatch'
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Department'
                  - type: object
                    properties:
                      roles:
                        type: array
                        items:
                          type: string
                        example: "[]"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /company/v1/departments/{departmentId}:
    parameters:
      - $ref: '#/components/parameters/departmentId'
    get:
      summary: Get department by id
      description: Get department by id
      tags:
        - departments (usersService)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Department'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - bearerAuth: [ ]
    patch:
      summary: Update department by id
      description:
        Update department data (set head department, move users, set parent department)
        Available only for head parent department or users with admin permissions. Returns updated department data
      tags:
        - departments (usersService)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DepartmentPatch'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Department'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete department
      description:
        Delete department.
      tags:
        - departments (usersService)
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - bearerAuth: [ ]
  /company/v1/departments/{departmentId}/updateRoles:
    patch:
      summary: Update department roles by id.  Returns department data with new roles
      description: Update department roles by id.  Returns department data with new roles
      tags:
        - departments (usersService)
      parameters:
        - $ref: '#/components/parameters/departmentId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateRolesDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Department'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]

  /company/v1/departments/{departmentId}/addUsers:
    patch:
      summary: Update department users by id.
      description: Update department users by id.
      tags:
        - departments (usersService)
      parameters:
        - $ref: '#/components/parameters/departmentId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserIds'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Department'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /company/v1/departments/{departmentId}/deleteUsers:
    patch:
      summary: Delete users from department
      description: Delete users from department by ids.
      tags:
        - departments (usersService)
      parameters:
        - $ref: '#/components/parameters/departmentId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserIds'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Department'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  # departments end

  # roles begin
  /company/v1/permissions:
    get:
      summary: Get permissions list.
      description: Get permissions list.
      tags:
        - roles (usersService)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PermissionsList'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /company/v1/roles:
    get:
      summary: Get roles list.
      description: Get roles list.
      tags:
        - roles (usersService)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/RoleList'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create role.
      description: Create role.
      tags:
        - roles (usersService)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RoleStore'
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/NewRoleList'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '422':
          $ref: '#/components/responses/ValidationError'
      security:
        - bearerAuth: [ ]
  /company/v1/roles/{roleId}:
    parameters:
      - $ref: '#/components/parameters/roleId'
    get:
      summary: Get role by id
      description: Get role by id.
      tags:
        - roles (usersService)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/RoleList'
                  - type: object
                    properties:
                      permissions:
                        $ref: '#/components/schemas/PermissionsAction'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      summary: Update role by id
      description:
        Update role data.
      tags:
        - roles (usersService)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/RoleUpdate'
                - type: object
                  properties:
                    usersIds:
                      type: string
                      example:
                        - "1"
                        - "2"
                    departmentsIds:
                      type: string
                      example:
                        - "1"
                        - "2"

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/RoleList'
                  - type: object
                    properties:
                      permissions:
                        $ref: '#/components/schemas/PermissionsAction'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete role by id
      description:
        Delete role.
      tags:
        - roles (usersService)
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  # roles end

  # invite begin
  /company/v1/users/check_invite:
    get:
      summary: Checking if an invitation exists.
      description: Checking if an invitation exists.
      tags:
        - invite (usersService)
      parameters:
        - $ref: '#/components/parameters/searchEmail'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: success
        '422':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: object
                    properties:
                      email:
                        type: array
                        items:
                          example: 'Invitation canceled, contact your space partner'
                  status:
                    type: boolean
                    example: true
      security:
        - bearerAuth: [ ]
  /company/v1/invites/email:
    post:
      summary: Create invites.
      description: Create invites.
      tags:
        - invite (usersService)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InvitesStore'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                      example: 32
                    email:
                      type: string
                      example: stark@gmail.com
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '422':
          $ref: '#/components/responses/ValidationError'
      security:
        - bearerAuth: [ ]
  /company/v1/invites/email/batch:
    post:
      summary: Create invites.
      description: Create invites.
      tags:
        - invite (usersService)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InvitesBatchStore'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /company/v1/invites/email/{userId}/repeat_invitation:
    parameters:
      - $ref: '#/components/parameters/userId'
    patch:
      summary: Resend an invitation
      description:
        Resending an invitation.
      tags:
        - invite (usersService)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - bearerAuth: [ ]
  /company/v1/invites/email/{userId}:
    parameters:
      - $ref: '#/components/parameters/userId'
    delete:
      summary: Delete invitation
      description:
        Delete invitation.
      tags:
        - invite (usersService)
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  # invite begin

  # newsfeed begin
  /newsfeed/v1/posts:
    get:
      summary: Get posts list
      description: Get posts list
      tags:
        - newsFeedService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        - in: query
          name: q
          description: Text search pattern
          schema:
            type: string
          example: said
        - in: query
          name: group_id
          description: ID of the group to get posts for
          schema:
            type: array
            items:
              type: integer
              format: int64
          example: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Post'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create post
      description: >
        Create post


        Use one of `fileIds` or `uploadId` to bind earlier uploaded files to the post that is going to be created.
      tags:
        - newsFeedService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePostDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Post'
                  - type: object
                    properties:
                      comments:
                        example: null
                      reactions:
                        example: null
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /newsfeed/v1/posts/{postId}:
    parameters:
      - $ref: '#/components/parameters/postId'
    patch:
      summary: Update post
      description: Update post. Available only for author.
      tags:
        - newsFeedService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePostDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Post'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete post
      description: Delete post. Available only for author or users with admin permissions.
      tags:
        - newsFeedService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  # newsfeed end

  # tasks begin
  /tasks/v1/tasks:
    get:
      summary: Get available tasks list
      description: Get available tasks list
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        - in: query
          name: parent_id
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
        - in: query
          name: q
          description: Text search pattern
          schema:
            type: string
          example: expecting
        - in: query
          name: status
          schema:
            $ref: '#/components/parameters/filter_string_enum/schema'
          example: [ "suspended", "not_planned" ]
        - in: query
          name: setter_id
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
        - in: query
          name: responsible_id
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
        - in: query
          name: accomplices
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
        - in: query
          name: group_id
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
        - in: query
          name: stages
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
        - in: query
          name: priority
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
        - in: query
          name: deadline
          schema:
            $ref: '#/components/parameters/filter_array_of_time_ranges/schema'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/DetailedTask'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create task
      description: Create task
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - required:
                    - title
                    - created_by
                    - setter_id
                - $ref: '#/components/schemas/CreateEditTaskDto'
                - type: object
                  properties:
                    created_by:
                      type: integer
                      description: ID of the user who created the task
                    created_date:
                      type: integer
                      description: Created date timestamp
                    upload_id:
                      type: string
                      description: Upload ID
                    file_ids:
                      type: array
                      items:
                        type: integer
                      description: List of file IDs
                    created_at:
                      type: integer
                      description: Created at timestamp
                    task_type:
                      type: string
                      example: 'task'
                      description: Type of the task
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DetailedTask'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '422':
          $ref: '#/components/responses/ValidationError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/{taskId}:
    parameters:
      - $ref: '#/components/parameters/taskId'
    get:
      summary: Get task by id
      description: Get task by id
      tags:
        - tasksService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      summary: Edit task by id
      description: Edit task by id
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateEditTaskDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '422':
          $ref: '#/components/responses/ValidationError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete task by id
      description: Delete task by id
      tags:
        - tasksService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/stages:
    get:
      summary: Get kanban stages
      description: Get kanban stages
      tags:
        - tasksService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CanbanStage'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create kanban stage
      description: Create kanban stage
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCanbanStageDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CanbanStage'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '422':
          $ref: '#/components/responses/ValidationError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/stages/{stageId}:
    get:
      summary: Get kanban stage by id
      description: Get kanban stage by id
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/stageId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CanbanStage'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - bearerAuth: [ ]
    patch:
      summary: Update kanban stage by id
      description: Update kanban stage by id
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/stageId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EditCanbanStageDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CanbanStage'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/ValidationError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete kanban stage by id
      description: Create kanban stage by id
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/stageId'
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - bearerAuth: [ ]
  /tasks/v1/stages/{stageId}/moveTask:
    post:
      summary: Moving a task to stage
      description: Moving a task to stage
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/stageId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MoveTaskCanbanStageDto'
      responses:
        '200':
          description: OK
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /tasks/v1/tasks/{taskId}/checkList:
    parameters:
      - $ref: '#/components/parameters/taskId'
    get:
      summary: Get checklist by task id
      description: Get checklist by task id.  and users who have access to task.
      tags:
        - tasksService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  allOf:
                    - $ref: '#/components/schemas/CheckList'
                    - type: object
                      properties:
                        checkListItemIds:
                          type: array
                          items:
                            type: string
                          example: [ "2", "3" ]

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create checklist for task
      description: Create checklist for task.  and users who have access to task.
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateUpdateCheckList'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CheckList'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/{taskId}/checkList/{checkListId}:
    parameters:
      - $ref: '#/components/parameters/taskId'
      - $ref: '#/components/parameters/checkListId'
    patch:
      summary: Update checklist for task
      description: Update checklist for task
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateUpdateCheckList'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CreateUpdateCheckList'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete checklist from task by id
      description: Delete checklist from task by id
      tags:
        - tasksService
      responses:
        '204':
          description: No content

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/checkList/{checkListId}:
    parameters:
      - $ref: '#/components/parameters/checkListId'
    get:
      summary: Get checklist items by id
      description: Get checklist items by id
      tags:
        - tasksService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  allOf:
                    - type: object
                      properties:
                        id:
                          type: string
                          description: checklist item id
                          example: 1
                    - $ref: '#/components/schemas/CheckListItem'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create checklist for task
      description: Create checklist for task
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CheckListItem'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      id:
                        type: string
                        description: checklist item id
                        example: 1
                  - $ref: '#/components/schemas/CheckListItem'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /tasks/v1/checkList/{checkListId}/{checkListItemId}:
    parameters:
      - $ref: '#/components/parameters/checkListId'
      - $ref: '#/components/parameters/checkListItemId'
    delete:
      summary: Delete item to checklist by id
      description: Delete item to checklist by id
      tags:
        - tasksService
      responses:
        '204':
          description: No content

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      summary: Update checklist for task
      description: Update checklist for task
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CheckListItem'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      id:
                        type: string
                        description: checklist item id
                        example: 1
                  - $ref: '#/components/schemas/CheckListItem'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /tasks/v1/tasks/mass_ready:
    post:
      summary: Bulk ready tasks
      description: Bulk ready tasks
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MassActionTasksDto'
      responses:
        '201':
          description: OK
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/mass_deletion:
    post:
      summary: Bulk deletion tasks
      description: Bulk deletion tasks
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MassActionTasksDto'
      responses:
        '201':
          description: OK
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/mass_edit:
    post:
      summary: Bulk editing tasks
      description: Bulk editing tasks
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MassEditTasksDto'
      responses:
        '201':
          description: OK
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /tasks/v1/transferToUser:
    post:
      summary: Transfer tasks to another user.
      description: Transfer tasks to another user.
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransferTask'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/TransferTasksSuccess'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /tasks/v1/transferToDepartment:
    post:
      summary: Transfer tasks to department.
      description: Transfer tasks to department.
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransferTasksToDepartment'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/TransferTasksSuccess'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /tasks/v1/tasks/{taskId}/start:
    patch:
      summary: Take on a task.
      description: Take on a task. Available to users related to the task.
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/taskId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DetailedTask'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/{taskId}/stop:
    patch:
      summary: Stopped the task.
      description: Stopped the task. Available to users related to the task.
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/taskId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DetailedTask'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/{taskId}/ready:
    patch:
      summary: Complete the task
      description: Complete the task. Sets different statuses depending on who initiated the action. Available to users related to the task.
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/taskId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompleteComment'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DetailedTask'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/{taskId}/restart:
    patch:
      summary: Restart the task
      description: Restart the task. Available to users related to the task.
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/taskId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DetailedTask'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/{taskId}/watch:
    patch:
      summary: Watch the task.
      description: Watch the task. Available to users related to the task.
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/taskId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  /tasks/v1/tasks/{taskId}/unwatch:
    patch:
      summary: Unwatch the task.
      description: Unwatch the task. Available to users related to the task.
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/taskId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]

  /tasks/v1/settings:
    get:
      summary: Get available settings list
      description: Get available settings list
      tags:
        - tasksService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskSettings'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    put:
      summary: Update tasks settings
      description: Update settings.
      tags:
        - tasksService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/TaskSettings'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/TaskSettings'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  # tasks end

  # files begin

  /files/v1/files:
    get:
      summary: Lists the file info
      description: Lists the file info
      tags:
        - filesService
      parameters:
        - $ref: '#/components/parameters/entityType'
        - $ref: '#/components/parameters/entityId'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/FileInfoDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Upload one or more files
      description: Upload one or more files
      tags:
        - filesService
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UploadContainer'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/FileInfoDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /files/v1/files?uploadId:
    get:
      summary: Lists the file info
      description: Lists the file info
      tags:
        - filesService
      parameters:
        - in: query
          name: uploadId
          description: >
            Use this parameter instead of `entityType` and `entityId` to list the upload bundle
          schema:
            type: string
            format: uuid
          required: true
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/FileInfoDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /files/v1/files?entityIds[]:
    get:
      summary: Lists the file info
      description: Lists the file info
      tags:
        - filesService
      parameters:
        - $ref: '#/components/parameters/entityType'
        - $ref: '#/components/parameters/entityIds'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      entityId:
                        type: array
                        items:
                          $ref: '#/components/schemas/FileInfoDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /files/v1/files/{fileId}:
    patch:
      summary: Update file by id
      description: Update the `entity_id` for one file
      tags:
        - filesService
      parameters:
        - in: path
          name: fileId
          schema:
            oneOf:
              - type: integer
                format: int64
              - type: string
                format: uuid
          required: true
          description: Numeric ID of the file to update or the UUID of the upload group
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                entityId:
                  type: integer
                  format: int64
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/FileInfoDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete file by id
      description: Removes the uploaded file and info about it
      tags:
        - filesService
      parameters:
        - in: path
          name: fileId
          schema:
            type: integer
            format: int64
          required: true
          description: Numeric ID of the file to remove
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /files/v1/files?entityType&entityId:
    patch:
      summary: Update files by entity
      description: >
        Update the `entity_id` for a group of files determined by `entityType` and `entityId`


        It's okay to specify the parameters in the request body instead of query.


        At the moment this is used internally to bind earlier uploaded files to an entity
      tags:
        - filesService
      parameters:
        - $ref: '#/components/parameters/entityType'
        - $ref: '#/components/parameters/entityId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                entityId:
                  type: integer
                  format: int64
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/FileInfoDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete files by entity
      description: >
        Removes the multiple files bound to the entity


        At the moment this is used internally to sync of files removal with posts
      tags:
        - filesService
      parameters:
        - $ref: '#/components/parameters/entityType'
        - $ref: '#/components/parameters/entityId'
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  # files end

  # comments begin

  /comments/v1/comments:
    get:
      summary: Get comments list
      description: >
        Lists the comments related to some entity.
        `nextId` and `prevId` fields in response help to do pagination.
        For more information see the description of `nextId` and `prevId` fields in the response.
      tags:
        - commentsService
      parameters:
        - name: entity_type
          in: query
          description: >
            Entity type name.
            If it's `comment`, record represents the child comment and `entityId` represents the parent comment ID.
            And only the child comments are being sent in this case.
            Use along with `childList` and `lastId` to paginate the child comments.
          schema:
            $ref: '#/components/parameters/entityType/schema'
        - $ref: '#/components/parameters/entityId'
        - name: list
          in: query
          description: >
            Use this to define the number of top level comments to retrieve.
            Retrieve all if missing or retrieve the rest if `nextId` is present.
          schema:
            $ref: '#/components/parameters/list/schema'
          example: 3

        - $ref: '#/components/parameters/childList'
        - $ref: '#/components/parameters/nextId'
        - $ref: '#/components/parameters/lastId'

      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/CommentServiceDto'
                        - $ref: '#/components/schemas/CommentExtrasServiceDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create a comment
      description: Creates new comment
      tags:
        - commentsService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCommentServiceDto'
      responses:
        '201':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentServiceDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '422':
          $ref: '#/components/responses/ValidationError'
      security:
        - bearerAuth: [ ]

  /comments/v1/comments?entityIds[]:
    get:
      summary: Get comments list by array of entity ids
      description: >
        Lists the comments related to the list of entities.
        `nextId` and `prevId` fields in response help to do pagination.
        For more information see the description of `nextId` and `prevId` fields in the response.
      tags:
        - commentsService
      parameters:
        - name: entity_type
          in: query
          description: >
            Entity type name.
            If it's `comment`, record represents the child comment and `entityId` represents the parent comment ID.
            And only the child comments are being sent in this case.
            Use along with `childList` and `lastId` to paginate the child comments.
          schema:
            $ref: '#/components/parameters/entityType/schema'
        - $ref: '#/components/parameters/entityIds'
        - name: list
          in: query
          description: >
            Use this to define the number of top level comments to retrieve.
            Retrieve all if missing or retrieve the rest if `nextId` is present.
          schema:
            $ref: '#/components/parameters/list/schema'
          example: 3

        - $ref: '#/components/parameters/childList'
        - $ref: '#/components/parameters/nextId'
        - $ref: '#/components/parameters/lastId'

      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      entityId:
                        type: array
                        items:
                          allOf:
                            - $ref: '#/components/schemas/CommentServiceDto'
                            - $ref: '#/components/schemas/CommentExtrasServiceDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /comments/v1/comments/{commentId}:
    patch:
      summary: Update comment by id
      description: Updates the comment
      tags:
        - commentsService
      parameters:
        - in: path
          name: commentId
          schema:
            type: integer
            format: int64
          required: true
          description: Numeric ID of the comment to show
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCommentServiceDto'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentServiceDto'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete comment by id
      description: Removes the comment
      tags:
        - commentsService
      parameters:
        - in: path
          name: commentId
          schema:
            type: integer
            format: int64
          required: true
          description: Numeric ID of the comment to delete
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /comments/v1/comments?entityType&entityId:
    delete:
      summary: Delete comments to entity
      description: >
        Removes the multiple comments bound to the entity


        At the moment this is used internally to sync of comments removal with posts
      tags:
        - commentsService
      parameters:
        - $ref: '#/components/parameters/entityType'
        - $ref: '#/components/parameters/entityId'
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  # comments end

  # group begin
  /groups/v1/groups:
    get:
      summary: Get groups list
      description: Get groups list
      tags:
        - groupService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        - $ref: '#/components/parameters/archived'
        - in: query
          name: my_groups
          schema:
            type: boolean
          description: If true, shows only groups of my ownership or my membership
        - in: query
          name: q
          description: Text search pattern
          schema:
            type: string
          example: said
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      oneOf:
                        - $ref: '#/components/schemas/Group'
                        - allOf:
                            - $ref: '#/components/schemas/Group'
                            - type: object
                              properties:
                                comments:
                                  example: "[]"
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create group
      description: Create group
      tags:
        - groupService
      requestBody:
        content:
          multipart/form-data:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateUpdateGroupDto'
                - type: object
                  properties:
                    logo:
                      type: string
                      format: binary
                      description: The file to upload.
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Group'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '422':
          $ref: '#/components/responses/ValidationError'
      security:
        - bearerAuth: [ ]
  /groups/v1/groups/{groupId}:
    parameters:
      - $ref: '#/components/parameters/groupId'
    get:
      summary: Shows the group info
      description: Shows the group info
      tags:
        - groupService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Group'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
    patch:
      summary: Update group. Only available to group owner.
      description: Update group. Only available to group owner.
      tags:
        - groupService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateUpdateGroupDto'
                - type: object
                  properties:
                    archival:
                      example: true
                      description: "true or false"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Group'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete group. Only available to group owner.
      description: Delete group. Only available to group owner.
      tags:
        - groupService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]

  /groups/v1/groups/{groupId}/upload_logo:
    parameters:
      - $ref: '#/components/parameters/groupId'
    post:
      summary: Upload group logo. Only available to group owner or moderator.
      description: Upload group logo. Only available to group owner or moderator.
      tags:
        - groupService
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                logo:
                  type: string
                  format: binary
                  description: The file to upload. If empty, deletes the logo.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Group'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/ValidationError'
      security:
        - bearerAuth: [ ]

  /groups/v1/groups/{groupId}/attachUser/{userId}:
    parameters:
      - $ref: '#/components/parameters/groupId'
      - $ref: '#/components/parameters/userId'

    patch:
      summary: Adding a user to a group.
      description:
        Adding a user to a group. Only available to group owner or moderator.
      tags:
        - groupService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - bearerAuth: [ ]

  /groups/v1/groups/{groupId}/detachUser/{userId}:
    parameters:
      - $ref: '#/components/parameters/groupId'
      - $ref: '#/components/parameters/userId'

    patch:
      summary: Remove user from group.
      description:
        Remove user from group. Only available to group owner or moderator.
      tags:
        - groupService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - bearerAuth: [ ]

  /groups/v1/groups/{groupId}/joinGroup:
    parameters:
      - $ref: '#/components/parameters/groupId'

    patch:
      summary: Adding the current user to the group.
      description:
        Adding the current user to the group. Available to open groups or by invitation.
      tags:
        - groupService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - bearerAuth: [ ]

  /groups/v1/groups/{groupId}/leaveGroup:
    parameters:
      - $ref: '#/components/parameters/groupId'
    patch:
      summary: Remove the current user from the group.
      description:
        Remove the current user from the group.
      tags:
        - groupService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
      security:
        - bearerAuth: [ ]

  /groups/v1/invites:
    get:
      summary: Getting a list of invitations to groups of the current user.
      description: Getting a list of invitations to groups of the current user.
      tags:
        - groupService

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  groupId:
                    type: array
                    items:
                      type: string
                    example: [ "2", "5" ]

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Sending invitations to groups. Only available to group owner.
      description: Sending invitations to groups. Only available to group owner.
      tags:
        - groupService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendInviteToGroup'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]

  /groups/v1/invites/{groupId}:
    parameters:
      - $ref: '#/components/parameters/groupId'
    delete:
      summary: Refusal of an invitation. Only available to the current user.
      description: Refusal of an invitation. Only available to the current user.
      tags:
        - groupService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]

  /groups/v1/transferToUser:
    post:
      summary: Transfer groups to another user.
      description: Transfer groups to another user.
      tags:
        - groupService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransferGroup'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/TransferGroupSuccess'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /groups/v1/transferToDepartment:
    post:
      summary: Transfer groups to another user.
      description: Transfer groups to another user.
      tags:
        - groupService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransferGroupToDepartment'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/TransferGroupSuccess'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /groups/v1/transferToGroupMembers:
    post:
      summary: Transfer groups to another user.
      description: Transfer groups to another user.
      tags:
        - groupService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransferGroupToMembers'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/TransferGroupToMembersSuccess'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /groups/v1/join/{groupId}:
    parameters:
      - $ref: '#/components/parameters/groupId'
    get:
      summary: Getting a list of invited users for particular private group
      description: Getting a list of invited users for particular private group
      tags:
        - groupService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: integer
                example: [ 2, 5 ]
                description: The list of user ids
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /groups/v1/join/{groupId}/request:
    parameters:
      - $ref: '#/components/parameters/groupId'
    post:
      summary: Add join request for private group
      description: Add join request for private group
      tags:
        - groupService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /groups/v1/join/{groupId}/request/{userId}:
    parameters:
      - $ref: '#/components/parameters/groupId'
      - $ref: '#/components/parameters/userId'
    get:
      summary: Check if user sent join request to the private group
      description: Check if user sent join request to the private group
      tags:
        - groupService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/JoinRequestNotFound'
    delete:
      summary: Decline private group join request
      description: Decline private group join request
      tags:
        - groupService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/JoinRequestNotFound'
      security:
        - bearerAuth: [ ]
  # groups end


  # crm begin
  /crm/v1/entity:
    get:
      summary: Get available entities list.
      description: Get available entities list.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Entity'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create entity.
      description: Create entity.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/Entity'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Entity'
                  - type: object
                    properties:
                      id:
                        description: Entity ID
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/field_types:
    get:
      summary: Get available field types list. Available only for all users.
      description: Get available field types list. Available only for all users.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Field_Types_List'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/entities/{entity}/fields:
    parameters:
      - $ref: '#/components/parameters/entity'
    get:
      summary: Get available fields list.
      description: Get available fields list.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/Field'
                        - type: object
                          properties:
                            code:
                              type: string
                              example: source
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create field.
      description: Create field.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/Field'

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Field'
                  - type: object
                    properties:
                      id:
                        description: Entity ID
                        type: integer
                        example: 11
                      code:
                        type: string
                        example: source

        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '422':
          $ref: '#/components/responses/ValidationError'
      security:
        - bearerAuth: [ ]
  /crm/v1/entities/{entity}/fields/{field}:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/field'
    get:
      summary: Get field by code.  and users who have access to crm.
      description: Get field by code.  and users who have access to crm.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Field'
                  - type: object
                    properties:
                      id:
                        description: Entity ID
                        type: integer
                        example: 11
                      code:
                        type: string
                        example: source
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      summary: Edit field by code.  and crm maker.
      description: Edit field by code.  and crm maker.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/Field'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Field'
                  - type: object
                    properties:
                      id:
                        description: Entity ID
                        type: integer
                        example: 11
                      code:
                        type: string
                        example: source
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete field by code.
      description: Delete field by code.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/entities/{entity}/lists/{field}:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/field'
    get:
      summary: Get list elements. Available  for all users.
      description: Get list elements. Available  for all users.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SourceList'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Creating or editing list items.
      description: Creating or editing list items.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/SourceList'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SourceList'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/entities/{entity}/lists/{field}/{value}:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/field'
      - $ref: '#/components/parameters/value'
    delete:
      summary: Deleting a list item.
      description: Deleting a list item.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/entities/{entity}:
    parameters:
      - $ref: '#/components/parameters/entity'
    get:
      summary: Get available  crm entity items list.
      description: Get available  crm entity items list.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/CrmEntity'
                        - $ref: '#/components/schemas/CrmEAdditionalFields'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create  crm entity item.
      description: Create  crm entity item.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateCrmEntity'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CrmEntityResponce'
                  - $ref: '#/components/schemas/CrmEAdditionalFields'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/entities/companies:
    get:
      summary: Get available companies list.
      description: Get available companies list.
      tags:
        - crmService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        - in: query
          name: q
          description: Text search pattern
          schema:
            type: string
          example: expecting
        - in: query
          name: company_label
          schema:
            $ref: '#/components/parameters/filter_string_enum/schema'
          example: [ "partner", "competitor" ]
        - in: query
          name: source
          schema:
            $ref: '#/components/parameters/filter_string_enum/schema'
          example: [ "recommendation", "advertising" ]
        - in: query
          name: created_at
          schema:
            $ref: '#/components/parameters/filter_array_of_time_ranges/schema'
        - in: query
          name: owner
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
        - in: query
          name: deals
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/CrmEntity'
                        - $ref: '#/components/schemas/CrmEAdditionalFields'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/entities/contacts:
    get:
      summary: Get available contacts list.
      description: Get available contacts list.
      tags:
        - crmService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        - in: query
          name: q
          description: Text search pattern
          schema:
            type: string
          example: expecting
        - in: query
          name: contact_label
          schema:
            $ref: '#/components/parameters/filter_string_enum/schema'
          example: [ "partner", "competitor" ]
        - in: query
          name: source
          schema:
            $ref: '#/components/parameters/filter_string_enum/schema'
          example: [ "recommendation", "advertising" ]
        - in: query
          name: created_at
          schema:
            $ref: '#/components/parameters/filter_array_of_time_ranges/schema'
        - in: query
          name: owner
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
        - in: query
          name: deals
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/CrmEntity'
                        - $ref: '#/components/schemas/CrmEAdditionalFields'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/entities/deals:
    get:
      summary: Get available deals list.
      description: Get available deals list.
      tags:
        - crmService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        - in: query
          name: q
          description: Text search pattern
          schema:
            type: string
          example: expecting
        - in: query
          name: kanban_status
          schema:
            $ref: '#/components/parameters/filter_string_enum/schema'
          example: [ "FAIL", "SUCCESS" ]
        - in: query
          name: stages
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
          example: [ "NEW", "SUCCESS" ]
        - in: query
          name: funnel_id
          description: filter by funnel id
          schema:
            type: integer
          example: 12
        - in: query
          name: created_at
          schema:
            $ref: '#/components/parameters/filter_array_of_time_ranges/schema'
        - in: query
          name: owner
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
        - in: query
          name: tasks
          schema:
            $ref: '#/components/parameters/filter_array_of_time_ranges/schema'

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/CrmEntity'
                        - $ref: '#/components/schemas/CrmEAdditionalFields'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/entities/leads:
    get:
      summary: Get available leads list.
      description: Get available leads list.
      tags:
        - crmService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        - in: query
          name: q
          description: Text search pattern
          schema:
            type: string
          example: expecting
        - in: query
          name: kanban_status
          schema:
            $ref: '#/components/parameters/filter_string_enum/schema'
          example: [ "FAIL", "SUCCESS" ]
        - in: query
          name: stages
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
          example: [ "NEW", "SUCCESS" ]
        - in: query
          name: source
          schema:
            $ref: '#/components/parameters/filter_string_enum/schema'
          example: [ "recommendation", "advertising" ]
        - in: query
          name: created_at
          schema:
            $ref: '#/components/parameters/filter_array_of_time_ranges/schema'
        - in: query
          name: owner
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/CrmEntity'
                        - $ref: '#/components/schemas/CrmEAdditionalFields'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/entities/leads/fields:
    get:
      summary: Get available leads fields list.
      description: Get available leads fields list.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CrmEntityField'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/entities/{entity}/{itemId}:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/itemId'
    get:
      summary: Get crm entity item.  and users who have access to crm.
      description: Get crm entity item.  and users who have access to crm.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CrmEntity'
                  - $ref: '#/components/schemas/CrmEAdditionalFields'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      summary: Edit crm entity item.  and users who have access to crm.
      description: Edit crm entity item.  and users who have access to crm.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CrmEntity'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CrmEntity'
                  - $ref: '#/components/schemas/CrmEAdditionalFields'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete crm entity item. Available only for admin users and users who have access to crm.
      description: Delete crm entity item. Available only for admin users and users who have access to crm.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/entities/{entity}/converting/{itemId}:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/itemId'
    post:
      summary: Converting crm entity item. Available for all users.
      description: Converting crm entity item. Available for all users.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/conversionBodyWithFunnelId'
                - $ref: '#/components/schemas/conversionBody'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: success
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/static/tasks:
    get:
      summary: Get available crm-task entity items list.
      description: Get available crm-task entity items list.
      tags:
        - crmService
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/list'
        - in: query
          name: q
          description: Text search pattern
          schema:
            type: string
          example: expecting
        - in: query
          name: status
          schema:
            $ref: '#/components/parameters/filter_string_enum/schema'
          example: [ "planned", "done" ]
        - in: query
          name: type
          schema:
            $ref: '#/components/parameters/filter_string_enum/schema'
          example: [ "call", "meeting" ]
        - in: query
          name: start_time
          schema:
            $ref: '#/components/parameters/filter_array_of_time_ranges/schema'
        - in: query
          name: responsible_id
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
        - in: query
          name: participants
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
        - in: query
          name: company_id
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
        - in: query
          name: contacts
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
        - in: query
          name: deals
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'
        - in: query
          name: leads
          schema:
            $ref: '#/components/parameters/filter_number_enum/schema'

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CrmTaskEntity'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create crm-task entity item.
      description: Create crm-task entity item.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUpdateCrmTaskDto'

      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CrmTaskEntity'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/static/task/{itemId}:
    parameters:
      - $ref: '#/components/parameters/itemId'
    get:
      summary: Get crm-task entity item.  and users who have access to crm.
      description: Get crm-task entity item.  and users who have access to crm.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CrmTaskEntity'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      summary: Edit crm-task entity item.  and users who have access to crm.
      description: Edit crm-task entity item.  and users who have access to crm.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUpdateCrmTaskDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CrmTaskEntity'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete crm-task entity item. Available only for admin users and users who have access to crm.
      description: Delete crm-task entity item. Available only for admin users and users who have access to crm.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/entities/{entity}/funnel:
    parameters:
      - $ref: '#/components/parameters/entity'
    get:
      summary: Get funnels.
      description: Get funnels.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  allOf:
                    - $ref: '#/components/schemas/Funnel'
                    - type: object
                      properties:
                        id:
                          type: integer
                          example: 11

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Funnel creating.
      description: Funnel creating.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/Funnel'
                - type: object
                  properties:
                    funnel_code:
                      type: string
                      example: 'new_deal'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Funnel'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/entities/{entity}/funnel/{funnelId}:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/funnelId'
    get:
      summary: Get funnels.
      description: Get funnels.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Funnel'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
                      stages:
                        type: array
                        items:
                          $ref: '#/components/schemas/CrmStage'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      summary: Funnel editing.
      description: Funnel editing.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/UpdateFunnel'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Funnel'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Funnel deleting.
      description: Funnel deleting.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]


  /crm/v1/entities/{entity}/kanban/stage:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/filterFunnel'
    get:
      summary: Get kanban stages. Available  for all users.
      description: Get kanban stages. Available  for all users.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  oneOf:
                    - $ref: '#/components/schemas/CrmStage'
                    - allOf:
                        - $ref: '#/components/schemas/CrmStageWithReason'

        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create a kanban stage.
      description: Create a kanban stage.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateCrmStage'
                - type: object
                  properties:
                    stage_code:
                      type: string
                      example: 'new_deal'
                    funnel_id:
                      type: integer
                      example: 5
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CrmStage'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/entities/{entity}/kanban/stage/{stageId}:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/stageId'
    get:
      summary: Get kanban stage. Available for all users.
      description: Get kanban stage. Available for all users.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CrmStage'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      summary: Editing a Kanban Stage.
      description: Editing a Kanban Stage.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateCrmStage'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CrmStage'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Deleting a Kanban Stage.
      description: Deleting a Kanban Stage.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/entities/{entity}/{entity_id}/move/stage/{stageId}:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/entity_id'
      - $ref: '#/components/parameters/stageId'
    post:
      summary: Move a kanban stage. Available only for all users.
      description: Move a kanban stage. Available only for all users.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - type: object
                  properties:
                    reason_id:
                      type: integer
                      example: 3
                    reason_comment:
                      type: string
                      example: 'example'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CrmStage'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/reasons/{funnelId}:
    parameters:
      - $ref: '#/components/parameters/funnelId'
    get:
      summary: Get funnels.
      description: Get funnels.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ReasonList'


        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Funnel creating.
      description: Funnel creating.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateReason'
                - type: object
                  properties:
                    type:
                      type: string
                      example: 'SUCCESS'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Reason'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/reasons/{reasonId}:
    parameters:
      - $ref: '#/components/parameters/reasonId'
    patch:
      summary: Funnel editing.
      description: Funnel editing.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateReason'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Reason'
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 11
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Funnel deleting.
      description: Funnel deleting.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/events/call:
    get:
      summary: Get call event data
      description: Get call event data
      tags:
        - crmService
      parameters:
        - in: query
          name: from
          schema:
            type: string
        - in: query
          name: to
          schema:
            type: string
        - in: query
          name: external_id
          schema:
            type: string
        - in: query
          name: integration_code
          schema:
            type: string
        - in: query
          name: call_type
          schema:
            type: string
            enum:
              - incoming
              - outgoing
        - in: query
          name: ended_call_status
          schema:
            type: string
            enum:
              - successed
              - missed
              - declined
              - subscriber_unavailable
              - number_not_exist
              - call_failure
              - cancelled_by_manager
        - in: query
          name: duration
          schema:
            type: integer
            minimum: 0
        - in: query
          name: begin_time
          schema:
            type: integer
        - in: query
          name: owner
          schema:
            type: integer
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/EventCallList'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      tags:
        - crmService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CallEventDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/EventCallList'
      security:
        - bearerAuth: [ ]

  /crm/v1/events/call/{call_event_id}:
    patch:
      parameters:
        - $ref: '#/components/parameters/call_event_id'
      tags:
        - crmService
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CallEventDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/EventCallList'
      security:
        - bearerAuth: [ ]
    delete:
      parameters:
        - $ref: '#/components/parameters/call_event_id'
      description:
        Delete call event.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/entities/{entity}/{itemId}/related/{entity_code}:
    parameters:
      - $ref: '#/components/parameters/entity'
      - $ref: '#/components/parameters/itemId'
      - $ref: '#/components/parameters/entity_code'
    get:
      summary: Get available  crm entity items list.
      description: Get available  crm entity items list.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/CrmEntity'
                        - $ref: '#/components/schemas/CrmEAdditionalFields'
                  meta:
                    $ref: '#/components/schemas/Meta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/static/product-categories:
    get:
      summary: Get all product categories in tree view.
      description: Get all product categories in tree view.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/ProductCategory'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create product category.
      description: Create product category.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductCategoryDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductCategory'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/static/product-categories/{itemId}:
    get:
      parameters:
        - $ref: '#/components/parameters/itemId'
      description: Get product category.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductCategory'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      parameters:
        - $ref: '#/components/parameters/itemId'
      description: Edit product category.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductCategoryDto'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductCategory'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete product category by id
      parameters:
        - $ref: '#/components/parameters/itemId'
      description: Delete product category.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/static/measurement-units:
    get:
      summary: Get measurement units list
      description: Get all measurement units.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MeasurementUnit'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create measurement unit.
      description: Create measurement unit.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MeasurementUnit'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MeasurementUnit'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/static/measurement-units/{itemId}:
    get:
      summary: Get measurement unit by id
      parameters:
        - $ref: '#/components/parameters/itemId'
      description: Get measurement unit.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MeasurementUnit'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      summary: Update measurement unit by id
      parameters:
        - $ref: '#/components/parameters/itemId'
      description: Update measurement unit.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MeasurementUnit'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MeasurementUnit'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Detete measurement unit by id
      parameters:
        - $ref: '#/components/parameters/itemId'
      description: Delete measurement unit.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/static/taxes:
    get:
      summary: Get taxes list
      description: Get all taxes
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Tax'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create tax
      description: Create tax.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Tax'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tax'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/static/taxes/{itemId}:
    patch:
      parameters:
        - name: itemId
          in: path
          required: true
          schema:
            type: integer
            example: 1
      summary: Update tax by id
      description: Update tax.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Tax'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tax'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete tax by id
      parameters:
        - name: itemId
          in: path
          required: true
          schema:
            type: integer
            example: 1
      description: Delete tax.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/static/products:
    get:
      summary: Get products list
      description: Get products paginated list.
      tags:
        - crmService
      parameters:
        - name: q
          in: query
          description: Search by title, article
          required: false
          schema:
            type: string
        - name: title
          in: query
          description: Search by title
          required: false
          schema:
            type: string
        - name: article
          in: query
          description: Search by article
          required: false
          schema:
            type: string
        - name: availability
          in: query
          description: Search by availability
          required: false
          schema:
            type: array
            items:
              type: string
              enum:
                - available
                - not_available
                - pending
        - name: type
          in: query
          description: Search by type
          required: false
          schema:
            type: array
            items:
              type: string
              enum:
                - goods
                - service
        - name: is_active
          in: query
          description: Get by activation status
          required: false
          schema:
            type: array
            items:
              type: boolean
        - name: balance_from
          in: query
          description: Get only if balance more than value
          required: false
          schema:
            type: number
            example: 200.5
        - name: balance_to
          in: query
          description: Get only if balance less than value
          required: false
          schema:
            type: number
            example: 500.1
        - name: currency
          in: query
          description: Filter by price currency
          required: false
          schema:
            type: string
            example: 'USD'
        - name: price_from
          in: query
          description: Get only if price more than value (required with currency)
          required: false
          schema:
            type: integer
            example: 5000
        - name: price_to
          in: query
          description: Get only if price less than value (required with currency)
          required: false
          schema:
            type: integer
            example: 6000
        - name: product_category_ids
          in: query
          description: Filter by categories IDs
          required: false
          schema:
            type: array
            items:
              type: integer
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Product'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create product
      description: Create product.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Product'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/static/products/{itemId}:
    get:
      summary: Get product by id
      parameters:
        - $ref: '#/components/parameters/itemId'
      description: Get product.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      summary: Update product by id
      parameters:
        - $ref: '#/components/parameters/itemId'
      description: Update product.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Product'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete product by id
      parameters:
        - $ref: '#/components/parameters/itemId'
      description: Delete product.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/static/entity-product-lists:
    get:
      summary: Get or create product list for entity.
      description: Get or create product list for entity.
      tags:
        - crmService
      parameters:
        - name: entity_type
          in: query
          description: Entity type
          required: true
          schema:
            type: string
            example: 'deals'
        - name: entity_id
          in: query
          description: Entity ID
          required: true
          schema:
            type: integer
            example: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EntityProductList'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/static/entity-product-lists/{itemId}:
    patch:
      summary: Update entity product list by id
      parameters:
        - $ref: '#/components/parameters/itemId'
      description: Update entity product list.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EntityProductList'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EntityProductList'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/static/list-products:
    post:
      summary: Create new list product.
      description: Create new list product.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListProduct'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListProduct'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]

  /crm/v1/static/list-products/{itemId}:
    get:
      parameters:
        - $ref: '#/components/parameters/itemId'
      description: Get list product.
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListProduct'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    patch:
      parameters:
        - $ref: '#/components/parameters/itemId'
      description: Update list product.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ListProduct'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListProduct'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      parameters:
        - $ref: '#/components/parameters/itemId'
      description: Delete list product.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/static/list-products/bulk:
    patch:
      summary: Mass update list products.
      description: Mass update list products.
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/Product'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Product'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Mass delete list products.
      description: Mass delete list products.
      tags:
        - crmService
      parameters:
        - name: list_products
          in: query
          description: Array of list products IDs
          required: true
          schema:
            type: array
            items:
              type: integer
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]



  # documents module begin


  # documents template begin

  /crm/v1/documents/templates:
    get:
      description: Get document templates list
      tags:
        - crmService
      parameters:
        - description: current page
          in: query
          example: 1
          name: page
          schema:
            type: integer
            default: 1
        - description: how many items should be per page
          name: list
          in: query
          required: false
          schema:
            type: number
            default: 20
          example: 10
        - description: Filter by entities
          in: query
          name: binding_entities
          schema:
            type: array
            items:
              type: number
          example: [23132,12124,3423]
        - description: Search by name
          in: query
          name: search
          schema:
            type: string
        - description: Filter by active
          in: query
          name: is_active
          schema:
            type: boolean
        - description: Filter by date create, first element from date, second element to date
          in: query
          name: create_between
          schema:
            type: array
            items:
              type: string
            example: [ 2023-09-21, 2023-09-22 ]
        - description: Filter by date update, first element from date, second element to date
          in: query
          name: update_between
          schema:
            type: array
            items:
              type: string
            example: [ 2023-09-21, 2023-09-22 ]
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/DocumentTemplate'
                  meta:
                    $ref: '#/components/schemas/Meta'
      security:
        - bearerAuth: [ ]
    post:
      description: Create new document template
      tags:
        - crmService
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateDocumentTemplate'
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DocumentTemplate'
      security:
        - bearerAuth: [ ]
    patch:
      description: Update document template
      tags:
        - crmService
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UpdateDocumentTemplate'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DocumentTemplate'
      security:
        - bearerAuth: [ ]
    delete:
      description: Mass delete document templates by IDs
      tags:
        - crmService
      parameters:
        - description: Array of list document templates IDs
          in: query
          schema:
            type: array
            items:
              type: integer
          name: list_document_templates
      responses:
        '204':
          description: No content
      security:
        - bearerAuth: [ ]
  /crm/v1/documents/templates/fields:
    get:
      description: Get document available fields list
      tags:
        - crmService
      parameters:
        - description: Filter fields by entities
          in: query
          name: binding_entities
          schema:
            type: array
            items:
              type: number
        - description: Search by field name
          in: query
          schema:
            type: string
          name: search
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DocumentTemplateField'
      security:
        - bearerAuth: [ ]
  /crm/v1/documents/templates/fields/filter-entities:
    get:
      description: Get available entities for filter fields
      tags:
        - crmService
      parameters:
        - description: With funnels or not
          in: query
          schema:
            type: boolean
          name: with-funnels
      security:
        - bearerAuth: [ ]
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/DocumentTemplateFilterEntity'
  # documents template end


  # documents begin

  /crm/v1/documents:
    get:
      description: Get documents list of entity
      tags:
        - crmService
      parameters:
        - description: current page
          in: query
          example: 1
          name: page
          schema:
            type: integer
            default: 1
        - description: how many items should be per page
          name: list
          in: query
          required: false
          schema:
            type: number
            default: 20
          example: 10
        - description: Entity type
          in: query
          schema:
            type: string
          name: entity_type
        - description: Entity id
          in: query
          schema:
            type: integer
          name: entity_id
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Document'
                  meta:
                    $ref: '#/components/schemas/Meta'
      security:
        - bearerAuth: [ ]
    post:
      description: Generate new document for entity
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDocument'
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Document'
      security:
        - bearerAuth: [ ]
  /crm/v1/documents/{document_id}:
    parameters:
      - description: Document id
        in: path
        name: document_id
        required: true
        schema:
          type: integer
    patch:
      description: Update document
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                from_date:
                  type: string
                number:
                  type: string
                sign:
                  type: boolean
      responses:
        '200':
          description: OK
      security:
        - bearerAuth: [ ]
  /crm/v1/documents/{document_id}/fields:
    parameters:
      - description: Document id
        in: path
        name: document_id
        required: true
        schema:
          type: integer

    get:
      description: Getting filled fields of document
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    label:
                      type: string
                      example: 'Date created'
                    symbol_code:
                      type: string
                      example: '{LeadDateCreate}'
                    value:
                      type: string
                      example: '2023-09-20'
      security:
        - bearerAuth: [ ]
    patch:
      description: Fill fields of document new values
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  symbol_code:
                    required: true
                    example: '{LeadDateCreate}'
                    type: string
                  value:
                    required: true
                    type: string
                    example: '2023-09-22'
      responses:
        '200':
          description: OK
      security:
        - bearerAuth: [ ]

  # documents end


  # documents module end


  # Requisites begin
  /crm/v1/requisites/regions:
    get:
      description: Get available regions for requisites
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                    code:
                      type: string
      security:
        - bearerAuth: [ ]
  /crm/v1/requisites/templates:
    get:
      description: Get requisite templates
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/RequisiteTemplate'
                        - type: object
                          properties:
                            created_at:
                              type: string
                            updated_at:
                              type: string
                            created_by:
                              type: integer
                            updated_by:
                              type: integer
                  meta:
                    $ref: '#/components/schemas/Meta'
      security:
        - bearerAuth: [ ]
    post:
      description: Create requisite template
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequisiteTemplate'
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/RequisiteTemplate'
                  - type: object
                    properties:
                      created_at:
                        type: string
                      updated_at:
                        type: string
                      created_by:
                        type: integer
                      updated_by:
                        type: integer
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
      security:
        - bearerAuth: [ ]
  /crm/v1/requisites/templates/{requisite_id}:
    parameters:
      - description: Requisite id
        in: path
        schema:
          type: integer
        name: requisite_id
        required: true
    patch:
      description: Update requisite template
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequisiteTemplate'
      responses:
        '200':
          description: OK
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
      security:
        - bearerAuth: [ ]
    delete:
      description: Delete requisite template
      tags:
        - crmService
      responses:
        '204':
          description: OK
        '409':
          description: Conflict, The template has requisites with it
      security:
        - bearerAuth: [ ]

  /requisites:
    get:
      description: Get requisites
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Requisite'
      security:
        - bearerAuth: [ ]
    post:
      description: Create requisite
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateRequisite'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Requisite'
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
      security:
        - bearerAuth: [ ]
  /crm/v1/requisites/{requisite_id}:
    get:
      description: Get requisite by id
      tags:
        - crmService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Requisite'
      security:
        - bearerAuth: [ ]
    parameters:
      - description: Requisite id
        in: path
        schema:
          type: integer
        name: requisite_id
        required: true
    patch:
      description: Update requisite by id
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateRequisite'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Requisite'
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
      security:
        - bearerAuth: [ ]
    delete:
      description: Delete requisite by id
      tags:
        - crmService
      responses:
        '200':
          description: OK
      security:
        - bearerAuth: [ ]
  /crm/v1/requisites/{requisite_id}/bank_requisites:
    parameters:
      - description: Requisite id
        in: path
        schema:
          type: integer
        name: requisite_id
        required: true
    get:
      description: Bank requisites
      tags:
        - crmService
      security:
        - bearerAuth: [ ]
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  allOf:
                    - $ref: '#/components/schemas/BankRequisite'
                    - type: object
                      properties:
                        created_at:
                          type: string
                        updated_at:
                          type: string
                        created_by:
                          type: integer
                        updated_by:
                          type: integer
    post:
      description: Create bank requisite
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BankRequisite'
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BankRequisite'
                  - type: object
                    properties:
                      created_at:
                        type: string
                      updated_at:
                        type: string
                      created_by:
                        type: integer
                      updated_by:
                        type: integer
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    delete:
      description: Delete list product.
      tags:
        - crmService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
  /crm/v1/requisites/{requisite_id}/bank_requisites/{bank_requisite_id}:
    parameters:
      - description: Requisite id
        in: path
        schema:
          type: integer
        name: requisite_id
        required: true
      - description: Bank requisite id
        in: path
        schema:
          type: integer
        name: bank_requisite_id
        required: true
    patch:
      description: Update bank requisite
      tags:
        - crmService
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BankRequisite'
      responses:
        '200':
          description: OK
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
      security:
        - bearerAuth: [ ]
    delete:
      description: Delete bank requisite
      tags:
        - crmService
      responses:
        '204':
          description: OK
      security:
        - bearerAuth: [ ]

  # Requisites end

  # crm end


  # search begin
  /search/v1/search:
    parameters:
      - description: Name search by q
        in: query
        name: q
        schema:
          type: string
    get:
      summary: Search data from all services
      description: Search data from all services
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SearchResponse'
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
          $ref: '#/components/responses/UnauthorizedError'
        "500":
          description: Internal Server Error
          $ref: '#/components/responses/NoContent'
      tags:
        - searchService
      security:
        - bearerAuth: [ ]

    # search end


  # fileimport begin
  /fileimport/v1/csv-import:
    post:
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                data:
                  type: string
      responses:
        '200':
          description: OK

        '413':
          description: StatusRequestEntityTooLarge

        '400':
          description: StatusBadRequest

        '500':
          description: StatusInternalError
      tags:
        - fileImport
      security:
        - bearerAuth: [ ]
  # fileimport end

  # appService being
  /apps/v1/apps:
    get:
      summary: Get applications list.
      description: Get applications list.
      tags:
        - appService
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/App'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
      security:
        - bearerAuth: [ ]
    post:
      summary: Create app
      description: Create app
      tags:
        - appService
      requestBody:
        content:
          multipart/form-data:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateUpdateAppDto'
                - type: object
                  properties:
                    logo:
                      type: string
                      format: binary
                      description: The file to upload.
                  required:
                    - name
                    - code
                    - short_description
                    - redirect_url
                    - callback_url
                    - developer_name
                    - logo
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/App'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /apps/v1/apps/{app_id}:
    patch:
      summary: Update app data
      description: Update app data
      tags:
        - appService
      parameters:
        - $ref: '#/components/parameters/app_id'
      requestBody:
        content:
          multipart/form-data:
            schema:
              allOf:
                - $ref: '#/components/schemas/CreateUpdateAppDto'
                - type: object
                  properties:
                    logo:
                      type: string
                      format: binary
                      description: The file to upload.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/App'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
    delete:
      summary: Delete app
      description: Delete app
      parameters:
        - $ref: '#/components/parameters/app_id'
      tags:
        - appService
      responses:
        '204':
          description: No content
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/Forbidden'
      security:
        - bearerAuth: [ ]
  # appService end

  # history begin
  /history/v1/{service}/{entity_table_name}/{id}:
    get:
      summary: Get history for a specific service and entity
      description: Returns the history of changes for the given service and entity.
      parameters:
        - name: service
          in: path
          required: true
          description: The name of the service
          schema:
            type: string
        - name: entity_table_name
          in: path
          required: true
          description: The name of the entity table
          schema:
            type: string
        - name: id
          in: path
          required: true
          description: The ID of the entity
          schema:
            type: string
        - name: page
          in: query
          required: false
          description: The page number for pagination
          schema:
            type: integer
            default: 1
        - name: list
          in: query
          required: false
          description: Filter for listing items
          schema:
            type: string
            default: all
        - name: action
          in: query
          required: false
          description: The type of action performed
          schema:
            type: string
      responses:
        '200':
          description: Successfully retrieved history
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        changed_by:
                          type: string
                          example: "3"
                        changed_at:
                          type: string
                          example: "1723721790"
                        items:
                          type: array
                          items:
                            type: object
                            properties:
                              field_id:
                                type: string
                                example: "comment"
                              action:
                                type: string
                                example: "create"
                              from:
                                type: object
                                properties:
                                  value:
                                    type: string
                                    example: ""
                                  display_value:
                                    type: string
                                    example: ""
                              to:
                                type: object
                                properties:
                                  value:
                                    type: string
                                    example: "1724778698"
                                  display_value:
                                    type: string
                                    example: "New Value"
              example:
                data:
                  - changed_by: "3"
                    changed_at: "1723721790"
                    items:
                      - field_id: "comment"
                        action: "create"
                        from:
                          value: ""
                          display_value: ""
                        to:
                          value: ""
                          display_value: "Get feedback"
                      - field_id: "parentId"
                        action: "update"
                        from:
                          value: ""
                          display_value: ""
                        to:
                          value: "25"
                          display_value: "Test notification 2"
                      - field_id: "status"
                        action: "update"
                        from:
                          value: "inWork"
                          display_value: ""
                        to:
                          value: "onControl"
                          display_value: ""
                      - field_id: "deadline"
                        action: "update"
                        from:
                          value: "1724519498"
                          display_value: ""
                        to:
                          value: "1724778698"
                          display_value: ""
                  - changed_by: "13"
                    changed_at: "1723721800"
                    items:
                      - field_id: "comment"
                        action: "create"
                        from:
                          value: ""
                          display_value: ""
                        to:
                          value: ""
                          display_value: "New comment"
                  - changed_by: "22"
                    changed_at: "1723721790"
                    items:
                      - field_id: "parentId"
                        action: "update"
                        from:
                          value: ""
                          display_value: ""
                        to:
                          value: "25"
                          display_value: "Test notification 2"
                  - changed_by: "45"
                    changed_at: "1723721790"
                    items:
                      - field_id: "status"
                        action: "update"
                        from:
                          value: "inWork"
                          display_value: ""
                        to:
                          value: "onControl"
                          display_value: ""
                  - changed_by: "10"
                    changed_at: "1723721790"
                    items:
                      - field_id: "deadline"
                        action: "update"
                        from:
                          value: "1724519498"
                          display_value: ""
                        to:
                          value: "1724778698"
                          display_value: ""
        '400':
          description: Invalid input parameters
        '404':
          description: Entity not found
      tags:
        - history
      security:
        - bearerAuth: [ ]
  # history end

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  responses:
    UnauthorizedError:
      description: Access token is missing or invalid
    Forbidden:
      description: Forbidden
      content:
        application/json:
          schema:
            type: object
            properties:
              errors:
                type: object
                properties:
                  text:
                    type: array
                    items:
                      example: 'Forbidden message'
              status:
                type: boolean
                example: true
    NoContent:
      description: No Content
    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
    JoinRequestNotFound:
      description: Join request not found
      content:
        application/json:
          schema:
            type: object
            properties:
              errors:
                type: object
                properties:
                  text:
                    type: array
                    items:
                      type: string
                    default:
                      - join request not found
              status:
                type: boolean
                default: false

    # search serivce
    SearchErrorMessage:
      description: Custom error
    ValidationError:
      description: Validation error response
      content:
        application/json:
          schema:
            type: object
            properties:
              errors:
                type: object
                additionalProperties:
                  type: array
                  items:
                    type: string
                example:
                  field_name: [ "The field_name field is required." ]
              status:
                type: boolean
                example: true
  parameters:
    userId:
      name: userId
      in: path
      description: User id
      required: true
      schema:
        type: integer
    departmentId:
      name: departmentId
      in: path
      description: Department id
      required: true
      schema:
        type: string
    roleId:
      name: roleId
      in: path
      description: Role id
      required: true
      schema:
        type: string
    page:
      name: page
      in: query
      description: current page
      required: false
      schema:
        type: integer
        default: 1
      example: 1
    searchEmail:
      name: email
      in: query
      required: false
      schema:
        type: string
      example: rar.stas@gmail.com
    searchFirstName:
      name: firstName
      in: query
      required: false
      schema:
        type: string
      example: Stas
    searchLastName:
      name: LastName
      in: query
      required: false
      schema:
        type: string
      example: Raranetskyi
    searchPortalDomain:
      name: domain
      in: query
      required: false
      schema:
        type: string
      example: alter_ego
    list:
      name: list
      in: query
      description: how many items should be per page
      required: false
      schema:
        type: number
        default: 20
      example: 10
    childList:
      name: childList
      in: query
      description: >
        Use this to define the number of child comments to retrieve.
        Retrieve all if missing or retrieve the rest if `lastId` is present.
      required: false
      schema:
        type: integer
        format: int32
        default: 2
      example: 2
    nextId:
      name: nextId
      in: query
      description: >
        The top level comments are being paginated starting from the last page but in the ascending order.
        This parameter used to point the topmost comment on the previous page. For example: to get the
        previous page in the sample below `nextId` must be 22.

        * comment-22

        * comment-23

        * comment-24


        and the entire query should look like the following:


        ```
        ?entityType=post&entityId=123&list=3&childList=2&nextId=22
        ```


        This means: to get the previous 3 comments of the entity `post-123` along with the possible
        child comments (no more then 2 child comments per parent) relating to the `comment-22`
      required: false
      schema:
        type: integer
        format: int64
    lastId:
      name: lastId
      in: query
      description: >
        This parameter used to point the bottom child comment on the previous page. For example: to get the
        next page if the child comments in the sample below, `lastId` must be 27, `entityType` must be "comment"
        and `entityId` must be 25.

          * comment-23

          * comment-24

          * comment-25

          * child-comment-26-of-parent-25

          * child-comment-27-of-parent-25


          and the entire query should look like the following:



          ```
          ?entityType=post&entityId=123&childList=2&entityType=comment&entityId=25&lastId=27
          ```


          This means: to get the next 2 child comments of parent `comment-25` of the entity `post-123` relating to the `child-comment-27`
      required: false
      schema:
        type: integer
        format: int64
    query:
      name: query
      in: query
      description: search query
      required: false
      schema:
        type: string
        default: ""
      example: "some query string"
    filter:
      name: filter
      in: query
      description: Fields, corresponding to the available list of entity.
      required: false
      style: deepObject
      schema:
        type: object
    postId:
      name: postId
      in: path
      description: Post id
      required: true
      schema:
        type: string
    commentId:
      name: commentId
      in: path
      description: Comment id
      required: true
      schema:
        type: string
    taskId:
      name: taskId
      in: path
      description: Task id
      required: true
      schema:
        type: string
    stageId:
      name: stageId
      in: path
      description: Stage id
      required: true
      schema:
        type: string
    order_by:
      name: order_by
      in: query
      description: sorting direction
      required: false
      schema:
        type: string
        default: desc
      example: order_by=asc
    field_name:
      name: field_name
      in: query
      description: the field we are looking for
      required: false
      schema:
        type: string
      example: priority=Low
    sort_by:
      name: sort_by
      in: query
      description: the field by which to sort
      required: false
      schema:
        type: string
      example: sort_by=deadline
    checkListId:
      name: checkListId
      in: path
      description: checklist id
      required: true
      schema:
        type: string
    checkListItemId:
      name: checkListItemId
      in: path
      description: checklist item id
      required: true
      schema:
        type: string
    entityType:
      in: query
      name: entityType
      schema:
        $ref: '#/components/schemas/EntityTypes'
      description: Entity type name
    entityId:
      in: query
      name: entityId
      schema:
        type: integer
        format: int64
      required: true
      description: Entity ID
    entity_id:
      in: path
      name: entity_id
      schema:
        type: integer
        format: int64
      required: true
      description: Entity ID
    entityIds:
      in: query
      name: entityIds
      description: >
        Use this parameter instead of `entityId` to list files for multiple entities at once. The response differs in this case.
      schema:
        type: array
        items:
          type: integer
          format: int64
      required: true
    groupId:
      name: groupId
      in: path
      description: Group id
      required: true
      schema:
        type: integer
    app_id:
      name: app_id
      in: path
      description: App id
      required: true
      schema:
        type: string
    archived:
      name: archived
      in: query
      description: filter archived or non-archived group
      required: false
      schema:
        type: boolean
        default: false
      example: true, false, 1, 0, yes, no, ""
    entity:
      name: entity
      in: path
      description: entity code
      required: true
      schema:
        type: string
    itemId:
      name: itemId
      in: path
      description: Item id
      required: true
      schema:
        type: string
    field:
      name: field
      in: path
      description: field code
      required: true
      schema:
        type: string
    value:
      name: value
      in: path
      description: list value code
      required: true
      schema:
        type: string
    funnelId:
      name: funnelId
      in: path
      description: funnel id
      required: true
      schema:
        type: string
    reasonId:
      name: reasonId
      in: path
      description: reason id
      required: true
      schema:
        type: string
    call_event_id:
      name: call_event_id
      in: path
      description: call event id
      required: true
      schema:
        type: string
    entity_code:
      name: entity_code
      in: path
      description: entity code
      required: true
      schema:
        type: string
    activityId:
      in: path
      name: activityId
      schema:
        type: integer
        format: int64
      required: true
      description: Activity ID

    filter_number_enum:
      name: filterNumberEnum
      in: query
      description: Array of numeric values
      schema:
        type: array
        items:
          type: integer
          format: int64
    filter_string_enum:
      name: filterStringEnum
      in: query
      description: Array of string values
      schema:
        type: array
        items:
          type: string
    filter_array_of_time_ranges:
      name: filterArrayOfTimeRanges
      in: query
      description: Array of strings formatted in the following way - <start_time>,<end_time>
      schema:
        type: array
        items:
          type: string
      example: [ "1674432000,1679529600" ]
    filterFunnel:
      name: funnel_id
      in: query
      description: funnel id
      required: false
      schema:
        type: string


  schemas:
    # common begin
    Meta:
      type: object
      properties:
        currentPage:
          type: number
          example: 1
        from:
          type: number
          example: 1
        lastPage:
          type: number
          example: 1
        links:
          type: array
          items:
            type: object
            properties:
              url:
                type: string
                example: null
              label:
                type: string
                example: "Previous"
              active:
                type: boolean
                example: false
        path:
          type: string
          example: "https://domain.uspacy.ua/groups/v1/groups"
        perPage:
          type: number
          example: 20
        to:
          type: number
          example: 2
        total:
          type: number
          example: 2
    Roles:
      type: array
      items:
        type: string
      example:
        - OWNER
        - Employee
        - ADMIN
    Email:
      type: string
      example: 'rar.stas@gmail.com'
    multipleEmail:
      type: array
      items:
        properties:
          id:
            type: string
            example: '01gdnpddf5xgzxqvcn4x83mc2s'
          type:
            type: string
            example: main
          value:
            type: string
            example: 'stark@gmail.com'
          main:
            type: boolean
            example: true
      example:
        - id: ''
          type: main
          value: stark@gmail.com
          main: true
        - id: '01gdnpddf5xgzxqvcn4x83mc2s'
          type: work
          value: benner@gmail.com
          main: false
    Phone:
      type: array
      items:
        properties:
          id:
            type: string
            example: '01gdnpddf5xgzxqvcn4x83mc2s'
          type:
            type: string
            enum: [ WORK, MOBILE, HOME ]
            example: WORK
          value:
            type: string
            example: '+380123456789'

    Date:
      type: number
      description: timestamp in seconds
      default: 0
      example: 1654180120
    Files:
      type: array
      items:
        type: string
      example:
        - path/to/image.jpg
        - path/to/image.png
    # common end

    # activities begin
    ActivityStatus:
      type: string
      enum:
        - planned
        - done
        - cancelled
    ActivityType:
      type: string
      enum:
        - activity
        - call
        - meeting
        - chat
        - email
    ActivityPriority:
      type: string
      enum:
        - low
        - notHigh
        - neutral
        - high
        - veryHigh
    ActivityCrmEntities:
      type: object
      additionalProperties:
        type: array
        items:
          type: object
          required:
            - id
            - title
            - owner
          properties:
            id:
              type: integer
            title:
              type: string
            owner:
              type: integer
    Activity:
      type: object
      properties:
        id:
          type: integer
        title:
          type: string
        type:
          $ref: '#/components/schemas/ActivityType'
        status:
          $ref: '#/components/schemas/ActivityStatus'
        priority:
          $ref: '#/components/schemas/ActivityPriority'
        description:
          type: string
        start_time:
          type: integer
        end_time:
          type: integer
        responsible_id:
          type: integer
        company_id:
          type: integer
        created_at:
          type: integer
        updated_at:
          type: integer
        closed_by:
          type:
            - integer
            - 'null'
        first_closed_by:
          type:
            - integer
            - 'null'
        closed_at:
          type:
            - integer
            - 'null'
        first_closed_at:
          type:
            - integer
            - 'null'
        participants:
          type: array
          items:
            type: integer
        crm_entities:
          $ref: '#/components/schemas/ActivityCrmEntities'
    CreateOrUpdateActivity:
      type: object
      properties:
        title:
          type: string
        type:
          $ref: '#/components/schemas/ActivityType'
        status:
          $ref: '#/components/schemas/ActivityStatus'
        priority:
          $ref: '#/components/schemas/ActivityPriority'
        description:
          type: string
        start_time:
          type: integer
        end_time:
          type: integer
        responsible_id:
          type: integer
        company_id:
          type: integer
        participants:
          type: array
          items:
            type: integer
        crm_entities:
          $ref: '#/components/schemas/ActivityCrmEntities'
    MassActionActivity:
      oneOf:
        - type: object
          required:
            - all
          properties:
            all:
              type: boolean
              default: true
            except_ids:
              type: array
              items:
                type: integer
        - type: object
          required:
            - entity_ids
          properties:
            entity_ids:
              type: array
              items:
                type: integer
    # activities end

    # users begin
    User:
      type: object
      properties:
        id:
          type: integer
          example: 1
        firstName:
          type: string
          example: Stas
        lastName:
          type: string
          example: Raranetskyi
        patronymic:
          type: string
          example: ""
        position:
          type: string
          example: CTO
        specialization:
          type: string
          example: Specialist
        country:
          type: string
          example: Ukraine
        city:
          type: string
          example: Kiyv
        avatar:
          type: string
          example: /storage/avatars/c4ca423/avatar.jpeg
        aboutMyself:
          type: string
          example: about me
        active:
          type: boolean
        registered:
          type: boolean
          example: true
        birthday:
          $ref: '#/components/schemas/Date'
        dateOfDismiss:
          $ref: '#/components/schemas/Date'
        showBirthYear:
          type: boolean
          default: false
          example: true
        email:
          $ref: '#/components/schemas/multipleEmail'
        phone:
          $ref: '#/components/schemas/Phone'
        roles:
          $ref: '#/components/schemas/Roles'
        departmentsIds:
          type: array
          items:
            type: string
          example:
            - '1'
            - '2'
        socialMedia:
          $ref: '#/components/schemas/SocialMedia'
        emailInvitation:
          type: boolean
          example: true
        dateOfInvitation:
          $ref: '#/components/schemas/Date'
    TwoFactorStatus:
      type: object
      properties:
        enabled:
          type: boolean
    TwoFactorEnable:
      type: object
      required:
        - step
      properties:
        step:
          type: string
          enum:
            - get-qr-code
            - verify-secret
        code:
          type: string
          example: '555406'
          description: Available on a second step (check-code)
    TwoFactorGetQr:
      type: object
      properties:
        secretKey:
          type: string
          example: RWPIRBJCIUJITLPC
        qrCodeUri:
          type: string
          example: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAIAAACzY+a1AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAIIUlEQVR4nO2dwY7zNgyEm6Lv/8rbgy8CiJn9hkr+gg3ntLBlio41Ijl0sq+fn5+/FpPx93/twOIW+wjHYx/heOwjHI99hOOxj3A89hGOxz7C8dhHOB7/+NOv1wsaelQeNf48q/Sg86waedpXM1YL3nI9S+6xjuf+1Hvx8ArasnA8fmHhA78KyGrynDhn8UxVvp12FA+Iz5wx3gK3fP/ZLgvHA7HwAVnd6uxzrVqD59lzvGJqHUNmJDsBicec08pzP5KMP7EsHI+AhQSKJT6u8CiY5pM+MnnLanZuoe4xn+jOLgvH480sPOGjjgKp4U779Xi1Rux7Bqsxvi5UO9B7ubgsHI+AhWTt+Gih1n4v/1SW1ew+BvN78XP5PYPHZo5l4XggFnI17wFRJvn43t+n54pDveNpTen9ST/bimXheLzemx1x5nElM60avTU/Y52XHPcWuEbTw7JwPAIW9jpz50hiR43nK5pEF9I7rNZ4pZtGO/L5KCwLxwOxMF0XqULv9ZGU/cSysu8tqPH+8+nFYB53l4XjEbw7Q/b3m6zSrzjSKexVXVyjqeP5fuOv4nVkxbJwPOJORY9VamWljPG9Au8h4ai6I6/3qnmJV/dYFo7HLywk65GsvgoSRW6qQ+ID6YQQNvuuC9eAeuxcFo7H1dvc9yzxNZbP3Lyd6ifZDzhvSKXoWVtn9zMqLAvH4w1d+3THr8drjqpYRfoP3OdzDNeA1Fk/L4/9aURcFo5H3C/s6YG8g5HqpcSTm/1D3YUf433z2E7F16GpkSr2kLXGdQ3SN6h+9vRGsva9P573ZP/YuvBLEX+/UOWQJwiTuK6v5q1z9dRREr+J/z5G+py8YvuFX4S3vTtzHqnjb7QV5UnPc55PvstnrtASaxXLwvGI3+YmlZyPIn5V9lQM0mskq57XiPUsUT5JBkBmPLEsHI9fYmGqcAYTA2aruc6r0i4B8SpluVeUqv37MSeWheMRd+15FVXHk3rLX1W9Igpt6j+J1jxzPq/19nlMPbEsHA+kkSp15hyjruX2SaeCW/ao2ibfIar/1cN6Vik79/eyLByP5rd80zXreebt8z5G9dkrmYrxJA9XFkikJFoxZ+eycDzibzbxGpErFKTy4+or71F4pD0EHr95HUmwLByPj3ynItX7ecRSFWFvFjWjupbsN0TN4XsGwbJwPIJY6HXLXhzq5WO8jkzrPD8mjWdpx8Zn3QrLwvEIOhW9nkDaZ/A+oFsCmTCP1t4Hrt1UH5SdNDouC8cjUGeqYqLOKgsVvatIpegtEFQNJY189Sy3wPeeZeF4NGPhiTQWkohC4i7xJGUhyUIr+K5wb7liWTgeTY2U1231uJ8ltU+0Su5bT1e6qSP9fS0LvwLxN5tI10KNryPJHsCjGvGN+HOOVB6mSib3LY3iy8LxQG+w+TXS61d4Tn+itque1LnUkTS++mqS+MZZviwcj+a3fE/wNZt2RdIeyH20VvZ7nY0TXBNedebrEMTCB+pvf1UdTzjNewj8uALvL/q8kTDY+0byjBPLwvF4wxtsfvx5VdqTS+14fnB9lcxIeg7qrBqj7CwL/+dAnYoTPY1RjeQxhnfsbtCrCOv4+4x668IvQvwGG1kjXK9Rxznbeup+taOs+Tuq1pQ/CmmHpGJZOB5X/8uXZ6q+RkyRxj/PaaIDkxhJKlrVD1FXbUb6FQh+g02tCL9m02rvPufk9R+5l5u5HvCcthfRl4XjEX/X/kQvA/TdAB8tzpGnTQ+ir5K61vc7U0/87rV14Reh+Tb3iV5l4+s8Zbn6w73lVSmxc3Kxzl79JxG6h2XheFypMz09nttJ9Q6e9xKfSVdEeVvtpPa9hRPLwvFo/vpT/fs+cyPW1Ph6lV+5PuP1s1T0uhA33YkTy8LxaMbCB0SXqSNJBkvWdZ1R+UzuriKN2QppdEz9XxaOR/wL+TfMU2PqLP5symN/R/4u0nv0uxRBGhGXheMRvDvT2/frWWKBc7Ee6bGzV8P1skpSa57+eywLxyP+hfxelXOjlfB5yVXpXAqpMuXnqnZ4jbssHI/4PdITXBtM+xhp1pryUt1FnZFrs/xzSGtcj2XheMRvsPHqh+ddZKWn6GV33pqP7mp2omedam2a3y4LxyP4bzE30cJbU2N6driWWzsVavbUK16z+jsiXFwWjkfz3Zm6gjwb6jqqV/nKz4PUUrw65PGYKyxc50pzgmXheHzwOxU8R63gio+KKMpDtX+kKlUa+/muoMYrLAvH4+oX8h8QFUYd8SPr7LyfQHyrx6tX/lrvYarQkp2mYlk4Hs3/a8/3cd6fSzsJdWRPz0wV1zT35l5V+6vOfAWC90h5H4szj8BfxfsY9Wy1oEbWz0HNpWbxI0l2rbAsHI+r3+bmuRaxXO0T3GgrZF7eneAZAPeHYFk4HkFGisxZvp5jPrG6SWbocZ9pe3+Ib1wzerAsHI/gV4E9VNaqRp72+RGVFae5sfKT6yO8pjzt+LlS/j1YFo5H8LszCopzvM9wHx1Tz3ns8XGX18rEt15vZ1k4Hlf/OY1r8zdn1Yzp2XPMeXf+jk7wfoVCb8/wWBaOx1XXvgcSh9Qa51GHx0viZ/U2rT7V3ZGq0WNZOB4fZyGpe3gsPKFY4nsaRAVNdSU1L1GAeYWqsCwcj4CFZEWkfYy0IvR2lAXeaySqiprR7x9pPObRcVk4HlffLzzB6yQfCXqVH1d5eFWadi28JwrEvseycDze3C9c/HksC8djH+F47CMcj32E47GPcDz2EY7HPsLx2Ec4HvsIx+NfuxthdynJNh4AAAAASUVORK5CYII="
    TwoFactorStatusEnabled:
      type: object
      properties:
        status:
          type: boolean
          example: true
        message:
          type: string
          example: Two-factor authentication was successfully enabled
    TwoFactorStatusDisabled:
      type: object
      properties:
        status:
          type: boolean
          example: true
        message:
          type: string
          example: Two-factor authentication was successfully disabled
    UpdateUserDto:
      type: object
      properties:
        email:
          $ref: '#/components/schemas/Email'
        firstName:
          type: string
          example: Stas
        lastName:
          type: string
          example: Raranetskyi
        patronymic:
          type: string
        position:
          type: string
        specialization:
          type: string
          example: Specialist
        country:
          type: string
          example: Ukraine
        city:
          type: string
          example: Kiyv
        aboutMyself:
          type: string
          example: about me
        phone:
          $ref: '#/components/schemas/Phone'
        birthday:
          $ref: '#/components/schemas/Date'
        showBirthYear:
          type: boolean
          default: false
          example: true
        active:
          type: boolean
        socialMedia:
          $ref: '#/components/schemas/SocialMedia'
    UpdateRolesDto:
      allOf:
        - $ref: '#/components/schemas/Roles'
    UpdateUserPosition:
      type: object
      properties:
        position:
          type: string
      example:
        position: new position
    getUsersByField:
      type: object
      properties:
        ids:
          type: array
          items:
            type: string
          example:
            - '1'
            - '2'
    SystemAvailableLangs:
      type: string
      enum:
        - 'en-US'
        - 'pt-BR'
        - 'pl'
        - 'es-ES'
        - 'uk'
    personalSettings:
      type: object
      properties:
        nameFormat:
          type: string
          example: first-last
        lang:
          $ref: '#/components/schemas/SystemAvailableLangs'
        timeFormat:
          type: string
          example: 24-hours
        dateFormat:
          type: string
          example: hh:mm:ss
        timezone:
          type: string
          example: Kiev +2
        firstDay:
          type: string
          example: monday
        themeAccentColor:
          type: string
          example: '#ff0000'
        themeDecor:
          type: string
          enum:
            - standard
            - framed
        themeName:
          type: string
          enum:
            - dark
            - light
            - highlighted
    # users begin

    # auth begin
    SocialMedia:
      type: array
      items:
        properties:
          id:
            type: string
            example: '01gdnpddf5xgzxqvcn4x83bn2s'
          name:
            type: string
            example: facebook
          link:
            type: string
            example: https://www.facebook.com
    Token:
      type: object
      properties:
        expireInSeconds:
          type: number
          example: 720
        jwt:
          type: string
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjEyMzEyMzEyMyIsImZpcnN0TmFtZSI6IlN0YXMiLCJsYXN0TmFtZSI6IlJhcmFuZXRza3lpIiwiZW1haWwiOiJyYXIuc3Rhc0BnbWFpbC5jb20iLCJyb2xlcyI6WyJVU0VSIiwiQURNSU4iLCJPV05FUiJdfQ.au16u5LHJqdvhiPrpXDhN4NZn8Cae09I6BEmed7mt8w
        refreshToken:
          type: string
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjEyMzEyMzEyMyIsImZpcnN0TmFtZSI6IlN0YXMiLCJsYXN0TmFtZSI6IlJhcmFuZXRza3lpIiwiZW1haWwiOiJyYXIuc3Rhc0BnbWFpbC5jb20iLCJyb2xlcyI6WyJVU0VSIiwiQURNSU4iLCJPV05FUiJdfQ.au16u5LHJqdvhiPrpXDhN4NZn8Cae09I6BEmed7mt8w
    SignUpDto:
      type: object
      required:
        - email
        - firstName
        - password
      properties:
        email:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        password:
          type: string
      example:
        email: "example@gmail.com"
        password: "12345678"
        firstName: Stas
        lastName: Raranetskyi
    JWT:
      type: object
      properties:
        id:
          type: string
          example: 1
        email:
          $ref: '#/components/schemas/Email'
        firstName:
          type: string
          example: Stas
        lastName:
          type: string
          example: Raranetskyi
        workspaceId:
          type: string
          example: 123123
        roles:
          $ref: '#/components/schemas/Roles'
        departmentsIds:
          type: array
          items:
            type: string
          example:
            - 1
            - 2
          description: All departments from the parent
    SignInDto:
      type: object
      properties:
        email:
          $ref: '#/components/schemas/Email'
        password:
          type: string
          example: 12345678
        code:
          type: string
          example: 237419
          description: filled on second auth step if 2FA is eneabled
    ConfirmEmailDto:
      type: object
      required:
        - email
        - token
      properties:
        email:
          $ref: '#/components/schemas/Email'
        token:
          type: string
          example: r6pvb5pllte
    ChangePasswordDto:
      type: object
      properties:
        password:
          type: string
          example: 12345678
    ChangeSelfPasswordDto:
      type: object
      properties:
        oldPassword:
          type: string
          example: 12345678
        newPassword:
          type: string
          example: 12345678
    EmailPasswordDto:
      type: object
      properties:
        email:
          type: string
          example: example@gmail.com
    EmailPasswordTokenDto:
      type: object
      properties:
        email:
          $ref: '#/components/schemas/Email'
        password:
          type: string
          example: myNewPassword
        token:
          type: string
          example: r6pvb5pllte
    RegistrationByInvitation:
      type: object
      properties:
        email:
          $ref: '#/components/schemas/Email'
        password:
          type: string
          example: 12345678
        firstName:
          type: string
          example: Tony
        lastName:
          type: string
          example: Stark
        domain:
          type: string
          example: domain.uspacy.ua
    CreatePortal:
      type: object
      properties:
        portalName:
          type: string
          example: alter_ego
        domain:
          type: string
          example: alter_ego
        tariffId:
          type: string
          example: 1
        firstName:
          type: string
          example: Root
          description: Portal owner name
        email:
          type: string
          example: root@gmail.com
          description: Portal owner email
        password:
          type: string
          example: 12345678
          description: Portal owner password (of existing user or new one)
    Portal:
      type: object
      properties:
        id:
          type: string
          example: 1
        portal_name:
          type: string
          example: alter_ego
        domain:
          type: string
          example: alter_ego
        ending_date:
          type: integer
          example: 1680020176
        active:
          type: boolean
        jwt_secret:
          type: string
          example: F8Ka2ovT3OyztOY4FiH7OvbU2nLprrQDllrWFMJ5DVk
        s3_bucket:
          type: string
          example: alter_ego
        creator_ip:
          type: string
          example: 172.70.174.228
    # auth end

    # Departments begin
    Department:
      type: object
      properties:
        id:
          type: integer
          example: 1
        description:
          type: string
          example: Test department
        name:
          type: string
          example: Frontend department
        headId:
          type: string
          example: 1
        parentDepartmentId:
          type: string
          default: null
          example: 1
        usersIds:
          type: string
          example:
            - '1'
            - '2'
        roles:
          $ref: '#/components/schemas/Roles'
    DepartmentPatch:
      type: object
      properties:
        name:
          type: string
          example: Frontend department
        headId:
          type: string
          example: 1
        description:
          type: string
          example: example
        parentDepartmentId:
          type: string
          default: ""
          example: 1
    UserIds:
      type: array
      items:
        type: string
      example:
        - '1'
        - '2'
    # Departments end

    # news feed begin
    Post:
      type: object
      properties:
        id:
          type: string
          example: 1
        title:
          type: string
          example: Title post
        message:
          type: string
          example: Message post
        authorId:
          type: string
          example: 1
        author_mood:
          $ref: '#/components/schemas/AuthorMood'
        files:
          type: array
          items:
            $ref: '#/components/schemas/FileInfoDto'
        date:
          $ref: '#/components/schemas/Date'
        comments:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/CommentServiceDto'
              - $ref: '#/components/schemas/CommentExtrasServiceDto'
        reactions:
          type: array
          items:
            $ref: '#/components/schemas/ReactionServiceDto'
    RecipientsPost:
      type: object
      properties:
        exclude:
          type: object
          description: A field by which you can exclude the viewing of a post for users and / or departments
          properties:
            departmentsIds:
              type: array
              items:
                type: string
              example:
                - "1"
                - "2"
            usersIds:
              type: array
              items:
                type: string
              example:
                - "1"
                - "2"
        include:
          type: object
          description: A field by which you can include the viewing of a post for users and / or departments
          properties:
            departmentsIds:
              type: array
              items:
                type: string
              example:
                - "3"
                - "4"
            usersIds:
              type: array
              items:
                type: string
              example:
                - "3"
                - "4"
    CreatePostDto:
      type: object
      properties:
        title:
          type: string
          example: Title post
        message:
          type: string
          example: Message post
        author_mood:
          $ref: '#/components/schemas/AuthorMood'
        fileIds:
          type: array
          description: Defines the array of fileIds uploaded earlier that need to be bound to the post
          items:
            type: integer
            format: int64
        uploadId:
          description: Defines the earlier uploaded file bundle that need to be bound to the post
          type: string
          format: uuid
        recipients:
          $ref: '#/components/schemas/RecipientsPost'
    UpdatePostDto:
      type: object
      properties:
        title:
          type: string
          example: Title post
        message:
          type: string
          example: Message post
        author_mood:
          $ref: '#/components/schemas/AuthorMood'
        recipients:
          $ref: '#/components/schemas/RecipientsPost'
    AuthorMood:
      type: string
      enum:
        - happy
        - proud
        - thankful
        - inspired
        - excited
        - festive
        - worried
        - sad
        - angry
    # news feed end

    # tasks begin
    DetailedTask:
      allOf:
        - $ref: '#/components/schemas/Task'
        - type: object
          properties:
            accomplicesIds:
              type: array
              items:
                type: string
              example: [ "2", "3" ]
            auditorsIds:
              type: array
              items:
                type: string
              example: [ "4", "5" ]
    Task:
      type: object
      properties:
        id:
          type: string
          example: "5"
        parentId:
          type: string
          example: "2"
        title:
          type: string
          example: Describe swagger api for tasksService
        deadline:
          $ref: '#/components/schemas/Date'
        closedDate:
          $ref: '#/components/schemas/Date'
        createdBy:
          type: string
          example: "1"
        closedBy:
          type: string
          example: "1"
        createdDate:
          $ref: '#/components/schemas/Date'
        responsibleId:
          description: ID of responsible person
          type: string
          example: "1"
        body:
          type: string
          example: <b>need use swagger-ui@4.x</b>
        status:
          $ref: '#/components/schemas/TaskStatus'
        kanbanStageId:
          type: string
          example: "2"
        priority:
          $ref: '#/components/schemas/TaskPriority'
        acceptResult:
          type: boolean
          default: false
          example: true
        requiredResult:
          type: boolean
          default: false
          example: true
        resultCommentId:
          type: string
          example: "1"
        departmentId:
          description: Department ID
          type: string
          example: "1"
        groupId:
          description: Group ID
          type: string
          example: "1"
        setterId:
          type: string
          example: "1"
        timeTracking:
          type: boolean
        timeEstimate:
          $ref: '#/components/schemas/Date'
        template:
          type: boolean
        templateId:
          type: string
          example: "2"
        delegation:
          type: integer
        taskType:
          type: string
          example: 'task'
        basicTask:
          type: boolean
        files:
          type: array
          items:
            $ref: '#/components/schemas/FileInfoDto'
    TaskScheduler:
      type: object
      required:
        - period
        - every
      properties:
        period:
          type: string
          enum: [ day, week, month, year ]
          description: Scheduler period
          example: 'day'
        every:
          type: integer
          minimum: 0
          description: Scheduler every interval
          example: 1246
        hour_start:
          type: integer
          minimum: 0
          maximum: 86399
          description: Scheduler start hour
          example: 1246
        deadline_hour:
          type: integer
          minimum: 0
          maximum: 86399
          description: Scheduler deadline hour
          example: 1246
        deadline_day:
          type: integer
          minimum: 0
          description: Scheduler deadline day
          example: 1246
        active:
          type: boolean
          description: Scheduler active flag
          example: false
        day_of_week:
          type: integer
          minimum: 1
          description: Scheduler day of the week
          example: 1246
        date_start:
          type: string
          format: date
          description: Scheduler start date
        date_stop:
          type: integer
          description: Scheduler stop date
          example: 1246
        iteration:
          type: integer
          minimum: 0
          description: Scheduler iteration
          example: 12
        timezone_offset:
          type: integer
          description: Scheduler timezone offset
          example: 1246
    MassActionTasksDto:
      oneOf:
        - type: object
          required:
            - all
          properties:
            all:
              type: boolean
              default: true
        - type: object
          required:
            - task_ids
          properties:
            task_ids:
              type: array
              items:
                type: integer
    MassEditTasksDto:
      allOf:
        - $ref: '#/components/schemas/MassActionTasksDto'
        - type: object
          required:
            - payload
          properties:
            payload:
              type: object
              properties:
                title:
                  type: string
                parent_id:
                  type: integer
                setter_id:
                  type: integer
                deadline:
                  type: integer
                responsible_id:
                  type: integer
                priority:
                  $ref: '#/components/schemas/TaskPriority'
                body:
                  type: string
                accomplices_ids:
                  type: array
                  items:
                    type: integer
                auditors_ids:
                  type: array
                  items:
                    type: integer
                department_id:
                  type: integer
                group_id:
                  type: integer
                accept_result:
                  type: boolean
                required_result:
                  type: boolean
                time_estimate:
                  type: integer
                time_tracking:
                  type: boolean
                delegation:
                  type: boolean
    CreateEditTaskDto:
      type: object
      properties:
        parent_id:
          type: integer
          description: Parent task ID
        title:
          type: string
          description: Title of the task
        setter_id:
          type: string
          description: ID of the user who set the task
        responsible_id:
          type: string
          description: ID of the user responsible for the task
        deadline:
          type: integer
          description: Deadline timestamp
        body:
          type: string
          description: Task description
        status:
          $ref: '#/components/schemas/TaskStatus'
        priority:
          $ref: '#/components/schemas/TaskPriority'
        accomplices_ids:
          type: array
          items:
            type: string
          description: IDs of task accomplices
        auditors_ids:
          type: array
          items:
            type: string
          description: IDs of task auditors
        department_id:
          type: integer
          description: Department ID
        group_id:
          type: string
          description: Group ID
        accept_result:
          type: boolean
          description: Whether the task result is accepted
        required_result:
          type: boolean
          description: Whether a result is required
        time_estimate:
          type: integer
          description: Estimated time for the task
        time_tracking:
          type: boolean
          description: Whether time tracking is enabled
        crm_entity_list:
          type: boolean
          description: CRM entity list flag
        scheduler:
          $ref: '#/components/schemas/TaskScheduler'
        crm_entities:
          type: array
          description: List of CRM entities
        deadline_hour:
          type: integer
          minimum: 0
          maximum: 86399
          description: Deadline hour
        deadline_day:
          type: integer
          minimum: 0
          description: Deadline day
        timezone_offset:
          type: integer
          description: Timezone offset
        delegation:
          type: boolean
          description: Delegation flag
    TaskStatus:
      type: string
      enum:
        - notScheduled
        - scheduled
        - inWork
        - stopped
        - inControl
        - ready
    TaskPriority:
      type: string
      enum:
        - low
        - notHigh
        - neutral
        - high
        - veryHigh
    CanbanStage:
      type: object
      properties:
        id:
          type: string
          example: 1
        title:
          type: string
          example: To do
        color:
          type: string
          example: "#ff0000"
        sort:
          type: integer
          example: 10
        afterId:
          type: string
          description: The ID of the stage to add after.
          example: 0
    CreateCanbanStageDto:
      type: object
      required:
        - title
        - color
      properties:
        title:
          type: string
          example: In progress
        color:
          type: string
          example: "#ff0000"
        afterId:
          type: string
          description: The ID of the stage to add after.
          example: 1
        sort:
          type: integer
          example: 6
        group_id:
          type: integer
          example: 3
    EditCanbanStageDto:
      type: object
      properties:
        title:
          type: string
          example: In progress
        color:
          type: string
          example: "#ff0000"
        sort:
          type: integer
          example: 6
    MoveTaskCanbanStageDto:
      type: object
      properties:
        id:
          type: string
          description: Task id
          example: 1

    CreateUpdateCheckList:
      type: object
      properties:
        title:
          type: string
          example: New checklist

    CheckList:
      type: object
      properties:
        id:
          type: string
          description: checklist id
          example: 1
        title:
          type: string
          example: New checklist

    CheckListItem:
      type: object
      properties:
        title:
          type: string
          example: First item
        responsibleId:
          description: ID of responsible person
          type: string
          example: 1
        deadline:
          $ref: '#/components/schemas/Date'
    TransferTask:
      type: object
      properties:
        oldUserId:
          type: string
          example: 2
        newUserId:
          type: string
          example: 55
        owner:
          type: boolean
          example: true
        responsible:
          type: boolean
          example: false
      required:
        - oldUserId
        - newUserId

    TransferTasksSuccess:
      type: object
      properties:
        status:
          type: boolean
          example: true
        countOwnerTasks:
          type: integer
          example: 2
        countResponsibleTasks:
          type: integer
          example: 4

    TransferTasksToDepartment:
      type: object
      properties:
        oldUserId:
          type: string
          example: 2
        departmentUserIds:
          type: array
          items:
            type: string
          example:
            - "11"
            - "22"
        owner:
          type: boolean
          example: true
          default: false
        responsible:
          type: boolean
          example: false
          default: false
      required:
        - oldUserId
        - newUserId

    CompleteComment:
      type: object
      properties:
        resultCommentId:
          type: integer
          example: 11

    TaskSettings:
      type: object
      properties:
        fixingResult:
          type: boolean
          example: true
          default: false
        fixingResultRequiredFor:
          type: array
          items:
            type: string
          example: [ "2", "3" ]
        acceptResult:
          type: boolean
          example: true
          default: false
        acceptResultRequiredFor:
          type: array
          items:
            type: string
          example: [ "4", "5" ]

    # tasks end

    # files begin

    EntityTypes:
      type: string
      enum:
        - comment
        - post
        - task

    UploadContainer:
      type: object
      properties:
        files:
          type: array
          items:
            type: string
            format: binary
        entityType:
          $ref: '#/components/schemas/EntityTypes'
        entityId:
          type: integer
          format: int64
      required:
        - files
        - entityType

    FileInfoDto:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 1
        entityType:
          allOf:
            - $ref: '#/components/schemas/EntityTypes'
            - example: 'post'
        entityId:
          type: integer
          format: int64
          example: 1
        uploadId:
          type: string
          format: uuid
          example: '369c4620-adee-4526-a0d8-a1db20bcf5b2'
        originalFilename:
          type: string
          example: sample.jpg
        lastModified:
          type: integer
          format: int64
          example: 1664629542
        size:
          type: integer
          format: int64
          example: 123456
        url:
          type: string
          example: 'https://aws.s3.amazonaws.com/my-bucket/61/dd/61ddc0045c05ba7537b63e63184b9203.jpg'

    FileList:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/FileInfoDto'

    IndexedFileList:
      type: object
      properties:
        data:
          type: object
          properties:
            id:
              type: array
              items:
                $ref: '#/components/schemas/FileInfoDto'

    # files end

    # roles begin
    NewRoleList:
      type: object
      properties:
        id:
          type: string
          example: 1
        title:
          type: string
          example: Admin
        code:
          type: string
          example: ADMIN
        userList:
          type: array
        departmentList:
          type: array
        permissions:
          $ref: '#/components/schemas/PermissionsAction'

    PermissionsAction:
      type: object
      properties:
        create:
          type: string
          example:
            - crm.lead.create.mine
            - crm.lead.create.allowed
            - crm.lead.create.department
        view:
          type: string
          example:
            - crm.lead.view.mine
            - crm.lead.view.allowed
            - crm.lead.view.department
        edit:
          type: string
          example:
            - crm.lead.edit.mine
            - crm.lead.edit.allowed
            - crm.lead.edit.department
        delete:
          type: string
          example:
            - crm.lead.delete.mine
            - crm.lead.delete.allowed
            - crm.lead.delete.department
        export:
          type: string
          example:
            - crm.lead.export.mine
            - crm.lead.export.allowed
            - crm.lead.export.department

    RoleList:
      type: object
      properties:
        id:
          type: string
          example: 1
        title:
          type: string
          example: Admin
        code:
          type: string
          example: ADMIN
        userlist:
          $ref: '#/components/schemas/Userlist'
        departmentlist:
          $ref: '#/components/schemas/Departmentlist'

    Departmentlist:
      type: array
      items:
        $ref: '#/components/schemas/DepartmentForRole'

    DepartmentForRole:
      type: object
      properties:
        id:
          type: string
          example: 1
        name:
          type: string
          example: Employee
        dateUpdate:
          $ref: '#/components/schemas/Date'

    Userlist:
      type: array
      items:
        $ref: '#/components/schemas/UserForRole'

    UserForRole:
      type: object
      properties:
        id:
          type: string
          example: 1
        firstName:
          type: string
          example: Stas
        lastName:
          type: string
          example: Raranetskyi
        avatar:
          type: string
          example: path to avatar
        dateUpdate:
          $ref: '#/components/schemas/Date'

    RoleStore:
      type: object
      required:
        - title
      properties:
        title:
          type: string
          example: Admin
        code:
          type: string
          example: ADMIN
        permissions:
          $ref: '#/components/schemas/PermissionsStore'

    RoleUpdate:
      type: object
      properties:
        title:
          type: string
          example: Admin
        permissions:
          $ref: '#/components/schemas/PermissionsStore'

    PermissionsStore:
      type: array
      items:
        type: string
      example:
        - crm.lead.edit.mine
        - crm.lead.delete.allowed
        - crm.lead.edit.department

    PermissionsList:
      type: object
      properties:
        create:
          type: string
          example:
            - crm.lead.create.allowed
            - crm.contact.create.allowed
            - crm.company.create.allowed
            - crm.deal.create.allowed
            - crm.invoice.create.allowed
            - crm.product.create.allowed
            - crm.activity.create.allowed
            - hrm.hiring.create.allowed
            - hrm.candidate.create.allowed
            - hrm.department.create.allowed
            - hrm.employee.create.allowed
            - tasks.task.create.allowed
            - tasks.board.create.allowed
            - tasks.template.create.allowed
        view:
          type: string
          example:
            - crm.lead.view.allowed
            - crm.lead.view.department
            - crm.lead.view.mine
            - crm.contact.view.allowed
            - crm.contact.view.department
            - crm.contact.view.mine
            - crm.company.view.allowed
            - crm.company.view.mine
            - crm.deal.view.allowed
            - crm.deal.view.mine
            - crm.invoice.view.allowed
            - crm.invoice.view.mine
            - crm.product.view.allowed
            - crm.activity.view.allowed
            - crm.activity.view.mine
            - hrm.hiring.view.allowed
            - hrm.candidate.view.allowed
            - hrm.department.view.allowed
            - hrm.employee.view.allowed
            - hrm.employee.view.mine
            - tasks.task.view.allowed
            - tasks.task.view.department
            - tasks.task.view.mine
            - tasks.board.view.allowed
            - tasks.board.view.department
            - tasks.template.view.allowed
            - tasks.template.view.department
        edit:
          type: string
          example:
            - crm.lead.edit.allowed
            - crm.lead.edit.department
            - crm.lead.edit.mine
            - crm.contact.edit.allowed
            - crm.contact.edit.department
            - crm.contact.edit.mine
            - crm.company.edit.allowed
            - crm.company.edit.mine
            - crm.deal.edit.allowed
            - crm.deal.edit.mine
            - crm.invoice.edit.allowed
            - crm.invoice.edit.mine
            - crm.product.edit.allowed
            - crm.activity.edit.allowed
            - crm.activity.edit.mine
            - hrm.hiring.edit.allowed
            - hrm.candidate.edit.allowed
            - hrm.department.edit.allowed
            - hrm.employee.edit.allowed
            - hrm.employee.edit.mine
            - tasks.task.edit.allowed
            - tasks.task.edit.department
            - tasks.task.edit.mine
            - tasks.board.edit.allowed
            - tasks.board.edit.mine
            - tasks.template.edit.allowed
            - tasks.template.edit.mine
            - news_feed.news.edit.allowed
        delete:
          type: string
          example:
            - crm.lead.delete.allowed
            - crm.contact.delete.allowed
            - crm.company.delete.allowed
            - crm.deal.delete.allowed
            - crm.invoice.delete.allowed
            - crm.product.delete.allowed
            - crm.activity.delete.allowed
            - crm.activity.delete.mine
            - hrm.hiring.delete.allowed
            - hrm.candidate.delete.allowed
            - hrm.department.delete.allowed
            - hrm.employee.delete.allowed
            - tasks.task.delete.allowed
            - tasks.task.delete.mine
            - tasks.board.delete.allowed
            - tasks.board.delete.mine
            - tasks.template.delete.allowed
            - tasks.template.delete.mine
            - news_feed.news.delete.allowed
        export:
          type: string
          example:
            - crm.lead.export.allowed
            - crm.contact.export.allowed
            - crm.company.export.allowed
            - crm.deal.export.allowed
            - crm.invoice.export.allowed
            - crm.product.export.allowed
            - crm.activity.export.allowed
            - hrm.hiring.export.allowed
            - hrm.candidate.export.allowed
            - hrm.department.export.allowed
            - hrm.employee.export.allowed
            - tasks.task.export.allowed
            - tasks.template.export.allowed

    # roles end

    # comments begin

    CommentServiceDto:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 1
        entityType:
          allOf:
            - $ref: '#/components/schemas/EntityTypes'
            - example: 'post'
        entityId:
          type: integer
          format: int64
          example: 1
        message:
          type: string
          example: Message comment
        authorId:
          type: string
          example: 1
        date:
          $ref: '#/components/schemas/Date'
        mentioned:
          $ref: '#/components/schemas/MentionedDto'
        notify:
          $ref: '#/components/schemas/NotifyDto'
    CommentExtrasServiceDto:
      type: object
      properties:
        reactions:
          type: array
          items:
            $ref: '#/components/schemas/ReactionServiceDto'
        nextId:
          type: integer
          format: int64
          example: 3
          description: If NULL, this is the last comment if the (sub)thread
        prevId:
          type: integer
          format: int64
          example: 1
          description: If NULL, this is the first comment if the (sub)thread
    ReactionServiceDto:
      type: object
      properties:
        reaction:
          type: integer
          format: int64
          example: 128513
          description: Represents the UNICODE symbol such as 0x0001F601
        amount:
          type: integer
          format: int32
          example: 53
        entityId:
          type: integer
          format: int64
          example: 1
    CreateCommentServiceDto:
      type: object
      properties:
        entity_type:
          allOf:
            - $ref: '#/components/schemas/EntityTypes'
            - example: 'post'
        entity_id:
          type: integer
          format: int64
          example: 1
        message:
          type: string
          example: Message post
        author_id:
          type: integer
          example: 1
        date:
          type: integer
          example: 1627862400
        upload_id:
          type: string
          example: null
        file_ids:
          type: array
          items:
            type: integer
          example: [ ]
        mentioned:
          $ref: '#/components/schemas/MentionedDto'
        notify:
          $ref: '#/components/schemas/NotifyDto'
        root_parent:
          type: object
          properties:
            type:
              type: string
              example: "parent_type"
            data:
              type: string
              example: "parent_data"
            service:
              type: string
              example: "parent_service"
            title:
              type: string
              example: "parent_title"
            table_name:
              type: string
              example: "parent_table_name"
          required:
            - type
            - data
            - service
            - title
      required:
        - entity_type
        - entity_id
        - author_id
        - message
        - date
    UpdateCommentServiceDto:
      type: object
      properties:
        message:
          type: string
          example: Message post
    MentionedDto:
      type: object
      properties:
        users:
          type: array
          items:
            type: integer
          example: [ 32, 85 ]
        groups:
          type: array
          items:
            type: integer
          example: [ 43, 12, 2 ]
        departments:
          type: array
          items:
            type: integer
          example: [ ]
    NotifyDto:
      type: object
      properties:
        users:
          type: array
          items:
            type: integer
          example: [ 32, 85 ]
        groups:
          type: array
          items:
            type: integer
          example: [ 43, 12, 2 ]
        departments:
          type: array
          items:
            type: integer
          example: [ ]
    # comments end

    # invite begin
    InvitesStore:
      type: array
      items:
        $ref: '#/components/schemas/InviteExample'
      example:
        - email: stark@gmail.com
          firstName: Tony
          lastName: Stark
        - email: benner@gmail.com
          firstName: Bruce
          lastName: Benner


    InviteExample:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          example: stark@gmail.com
        firstName:
          type: string
          example: Tony
        lastName:
          type: string
          example: Stark

    InvitesBatchStore:
      type: array
      items:
        type: string
      example:
        - stark@gmail.com
        - benner@gmail.com

    Success:
      type: object
      properties:
        status:
          type: boolean
          example: true
        message:
          type: string
          example: success

    # invite end

    # group begin
    TransferGroup:
      type: object
      properties:
        oldUserId:
          type: string
          example: 2
        newUserId:
          type: string
          example: 55
        owner:
          type: boolean
          example: true
          default: false
        moderator:
          type: boolean
          example: false
          default: false
      required:
        - oldUserId
        - newUserId

    TransferGroupToDepartment:
      type: object
      properties:
        oldUserId:
          type: string
          example: 2
        departmentUserIds:
          type: array
          items:
            type: string
          example:
            - "11"
            - "22"
        owner:
          type: boolean
          example: true
          default: false
        moderator:
          type: boolean
          example: false
          default: false
      required:
        - oldUserId
        - newUserId

    TransferGroupToMembers:
      type: object
      properties:
        oldUserId:
          type: string
          example: 2
      required:
        - oldUserId

    TransferGroupSuccess:
      type: object
      properties:
        status:
          type: boolean
          example: true
        countGroups:
          type: integer
          example: 2
        countModerator:
          type: integer
          example: 4

    TransferGroupToMembersSuccess:
      type: object
      properties:
        status:
          type: boolean
          example: true
        countGroups:
          type: integer
          example: 2

    CreateUpdateGroupDto:
      type: object
      properties:
        name:
          type: string
          example: Title group
        groupType:
          type: string
          example: public
          description: Available values - public, private, secret.
        description:
          type: string
          example: description group
        groupTheme:
          type: string
          example: group theme
        ownerId:
          type: string
          example: 1
          description: "1"
        moderatorsIds:
          type: array
          items:
            type: string
            format: binary
        usersIds:
          type: array
          items:
            type: string
            format: binary
      required:
        - name
        - groupType

    Group:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: Title group
        groupType:
          type: string
          example: private
        ownerId:
          type: string
          example: 1
        archived:
          type: boolean
        description:
          type: string
          example: private
        groupTheme:
          type: string
          example: private
        logo:
          type: string
          example: /8c/nsfkjnns486sd4f56.jpg
        enableColorTheme:
          type: boolean
        themeSettings:
          type: object
          properties:
            bgColor:
              type: string
            iconColor:
              type: string
            icon:
              type: string
            enablePattern:
              type: boolean
        moderatorsIds:
          type: array
          items:
            type: string
          example:
            - "11"
            - "22"
        usersIds:
          type: array
          items:
            type: string
          example:
            - "1"
            - "2"

    SendInviteToGroup:
      type: object
      properties:
        groupId:
          type: string
          example: 1
        userIds:
          type: array
          items:
            type: string
          example:
            - "11"
            - "22"

    # group end

    # crm begin
    Entity:
      type: object
      properties:
        title:
          type: string
          example: Leads
        tableName:
          type: string
          example: leads
        type:
          type: string
          example: leads
        sort:
          type: integer
          example: 1

    Field_Type:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: String
        type:
          type: string
          example: string
        multiple:
          type: boolean
          example: true

    Field_Types_List:
      type: array
      items:
        $ref: '#/components/schemas/Field_Type'
      example:
        - id: 1
          name: String
          type: string
          multiple: false
        - id: 2
          name: Textarea
          type: textarea
          multiple: false
        - id: 3
          name: Integer
          type: integer
          multiple: false
        - id: 3
          name: List
          type: list
          multiple: false
        - id: 4
          name: Date and time
          type: datetime
          multiple: false
        - id: 5
          name: Money
          type: money
          multiple: false
        - id: 6
          name: Label
          type: label
          multiple: true
        - id: 7
          name: Phone
          type: phone
          multiple: true
        - id: 8
          name: Email
          type: email
          multiple: true
        - id: 9
          name: Social
          type: social
          multiple: true
        - id: 10
          name: Link
          type: link
          multiple: false
        - id: 11
          name: Boolean
          type: boolean
          multiple: false
        - id: 12
          name: User
          type: user_id
          multiple: false
        - id: 13
          name: Photo
          type: photo
          multiple: false
        - id: 14
          name: File
          type: file
          multiple: false
        - id: 15
          name: Address
          type: address
          multiple: false
        - id: 16
          name: Legal details
          type: legal_details
          multiple: false
        - id: 17
          name: Entity_reference
          type: entity_reference
          multiple: false
        - id: 18
          name: UTM
          type: utm
          multiple: false

    Field:
      type: object
      properties:
        name:
          type: string
          example: Source
        code:
          type: string
          example: source
        required:
          type: boolean
          example: false
        editable:
          type: boolean
          example: true
        show:
          type: boolean
          example: true
        hidden:
          type: boolean
          example: false
        multiple:
          type: boolean
          example: false
        fieldSectionId:
          type: integer
          example: 11
        default_value:
          type: string
          example: value
        tooltip:
          type: string
          example: example
        type:
          type: string
          example: entity_reference
        entity_reference_id:
          type: integer
          example: 123
        sort:
          type: integer
          example: 90

    CreateCrmEntity:
      type: object
      properties:
        title:
          type: string
          example: Lead example
        owner:
          type: integer
          example: 1
        source:
          type: string
          example: shop
        funnel_id:
          type: integer
          example: 5
        email:
          $ref: '#/components/schemas/multipleEmail'
        phone:
          $ref: '#/components/schemas/Phone'
        messengers:
          $ref: '#/components/schemas/SocialMedia'

    CrmEntity:
      type: object
      properties:
        title:
          type: string
          example: Lead example
        owner:
          type: integer
          example: 1
        source:
          type: string
          example: shop
        email:
          $ref: '#/components/schemas/multipleEmail'
        phone:
          $ref: '#/components/schemas/Phone'
        messengers:
          $ref: '#/components/schemas/SocialMedia'

    CrmEntityResponce:
      type: object
      properties:
        title:
          type: string
          example: Lead example
        owner:
          type: integer
          example: 1
        created_by:
          type: integer
          example: 1
        changed_by:
          type: integer
          example: 1
        converted:
          type: boolean
          example: false
        first_name:
          type: string
          example: Johnny
        last_name:
          type: string
          example: Stark
        patronymic:
          type: string
          example: ""
        company_name:
          type: string
          example: ""
        position:
          type: string
          example: Owner
        utm_source:
          type: string
          example: ""
        utm_medium:
          type: string
          example: ""
        utm_campaign:
          type: string
          example: ""
        utm_content:
          type: string
          example: ""
        utm_term:
          type: string
          example: ""
        source:
          $ref: '#/components/schemas/SourceList'
        email:
          $ref: '#/components/schemas/multipleEmail'
        phone:
          $ref: '#/components/schemas/Phone'
        messengers:
          $ref: '#/components/schemas/SocialMedia'
        kanban_status:
          type: string
          example: IN_WORK
        kanban_reason_id:
          type: integer
          example: 11
        kanban_stage_id:
          type: integer
          example: 22


    SourceList:
      properties:
        title:
          type: string
          example: 'Shop'
        value:
          type: string
          example: shop
        color:
          type: string
          example: '#6AD01F'
        sort:
          type: integer
          example: 20
        selected:
          type: boolean
          example: true
      example:
        - title: 'Shop'
          value: shop
          color: ''
          sort: 10
          selected: true
        - title: 'Site'
          value: site
          color: ''
          sort: 20
          selected: false

    Funnel:
      type: object
      properties:
        title:
          type: string
          example: 'Sales funnel'
        funnel_code:
          type: string
          example: 'sales_funnel'
        active:
          type: boolean
          example: true
        default:
          type: boolean
          example: false

    UpdateFunnel:
      type: object
      properties:
        title:
          type: string
          example: 'Sales funnel'
        active:
          type: boolean
          example: true
        default:
          type: boolean
          example: false

    CreateCrmStage:
      type: object
      properties:
        title:
          type: string
          example: 'New Deal'
        color:
          type: string
          example: '#6AD01F'
        sort:
          type: integer
          example: 10


    CrmStage:
      type: object
      properties:
        title:
          type: string
          example: 'New Deal'
        color:
          type: string
          example: '#6AD01F'
        stage_code:
          type: string
          example: 'new_deal'
        system_stage:
          type: boolean
          example: false
        sort:
          type: integer
          example: 10
        reasons:
          type: string
          example: [ ]

    CrmStageWithReason:
      type: object
      properties:
        title:
          type: string
          example: 'New Deal'
        color:
          type: string
          example: '#6AD01F'
        stage_code:
          type: string
          example: 'new_deal'
        system_stage:
          type: boolean
          example: true
        sort:
          type: integer
          example: 10
        reasons:
          $ref: '#/components/schemas/CrmReason'

    CrmReason:
      properties:
        id:
          type: integer
          example: 1
        title:
          type: string
          example: 'New'
        sort:
          type: integer
          example: 20
      example:
        - id: 1
          title: 'Shop'
          sort: 10
        - id: 2
          title: 'Site'
          sort: 20
    CrmEntityField:
      type: object
      required:
        - name
        - code
        - entity_reference_id
        - type
        - required
        - editable
        - show
        - hidden
        - multiple
        - system_field
        - base_field
        - sort
        - default_value
        - tooltip
        - display_in_tabs
      properties:
        name:
          type: string
          example: 'Field name'
        code:
          type: string
          example: 'field_name'
        entity_reference_id:
          type: string
          example: '2'
        type:
          $ref: '#/components/schemas/CrmEntityFieldType'
        required:
          type: boolean
        editable:
          type: boolean
        show:
          type: boolean
        hidden:
          type: boolean
        multiple:
          type: boolean
        system_field:
          type: boolean
        base_field:
          type: boolean
        sort:
          type: string
          example: ''
        default_value:
          type: string
          example: ''
        tooltip:
          type: string
          example: ''
        display_in_tabs:
          type: boolean
        values:
          type: array
          items:
            type: object
            required:
              - title
              - value
              - color
              - sort
              - selected
            properties:
              title:
                type: string
                example: 'Active customer'
              value:
                type: string
                example: 'active_customer'
              color:
                type: string
                example: '#008000'
              sort:
                type: string
                example: ''
              selected:
                type: boolean
    CrmEntityFieldType:
      type: string
      enum:
        - string
        - textarea
        - integer
        - list
        - datetime
        - money
        - label
        - phone
        - email
        - social
        - link
        - boolean
        - user_id
        - photo
        - file
        - address
        - legal_details
        - entity_reference
        - utm
        - float
    CrmEAdditionalFields:
      type: object
      properties:
        id:
          type: integer
          example: 12
        created_by:
          type: integer
          example: 1
        changed_by:
          type: integer
          example: 1
        created_at:
          type: integer
          example: 12156465
        updated_at:
          type: integer
          example: 12156465

    CrmTaskTypes:
      type: string
      enum:
        - task
        - call
        - meeting
        - chat
        - email

    CrmTaskStatuses:
      type: string
      enum:
        - planned
        - done
        - cancelled

    CrmTaskEntity:
      type: object
      properties:
        id:
          type: integer
          format: int64
        createdBy:
          type: integer
          format: int64
        title:
          type: string
          example: Title example
        type:
          $ref: '#/components/schemas/CrmTaskTypes'
        status:
          $ref: '#/components/schemas/CrmTaskStatuses'
        description:
          type: string
        startTime:
          type: integer
          format: int64
          example: 1674950100
        endTime:
          type: integer
          format: int64
          example: 1674951000
        responsibleId:
          type: integer
          format: int64
          example: 5
        companyId:
          type: integer
          format: int64
        participants:
          type: array
          items:
            type: integer
            format: int64
          example: [ 123,234,345 ]
        contacts:
          type: array
          items:
            $ref: '#/components/schemas/CrmEntity'
        deals:
          type: array
          items:
            $ref: '#/components/schemas/CrmEntity'
        leads:
          type: array
          items:
            $ref: '#/components/schemas/CrmEntity'
        company:
          $ref: '#/components/schemas/CrmEntity'

    CreateUpdateCrmTaskDto:
      type: object
      properties:
        title:
          type: string
          example: Sed non massa
        createdBy:
          type: integer
          format: int64
          example: 5
        type:
          allOf:
            - $ref: '#/components/schemas/CrmTaskTypes'
            - example: meeting
        status:
          allOf:
            - $ref: '#/components/schemas/CrmTaskStatuses'
            - example: planned
        description:
          type: string
          example: Duis id rutrum risus. Sed in urna.
        startTime:
          type: integer
          format: int64
          example: 1674950100
        endTime:
          type: integer
          format: int64
          example: 1674951000
        responsibleId:
          type: integer
          format: int64
          example: 5
        companyId:
          type: integer
          format: int64
          example: 67
        participants:
          type: array
          items:
            type: integer
            format: int64
          example: [ 123,234,345 ]
        deals:
          type: array
          items:
            type: integer
            format: int64
          example: [ 56 ]
        leads:
          type: array
          items:
            type: integer
            format: int64
          example: [ 34 ]
        contacts:
          type: array
          items:
            type: integer
            format: int64
          example: [ 12,32 ]

    conversionBody:
      type: array
      items:
        properties:
          table_name:
            type: string
            example: 'companies'
      example:
        - table_name: 'contacts'
        - table_name: 'companies'


    conversionBodyWithFunnelId:
      type: array
      items:
        properties:
          table_name:
            type: string
            example: 'deals'
          funnel_id:
            type: integer
            example: 11
      example:
        - table_name: 'deals'
          funnel_id: 11


    ReasonList:
      type: object
      properties:
        SUCCESS:
          type: array
          items:
            properties:
              id:
                type: integer
                example: 11
              title:
                type: string
                example: 'Won'
              sort:
                type: integer
                example: 10
        FAIL:
          type: array
          items:
            $ref: '#/components/schemas/Reason'

    Reason:
      type: object
      properties:
        id:
          type: integer
          example: 11
        title:
          type: string
          example: 'Other'
        sort:
          type: integer
          example: 10

    CreateReason:
      type: object
      properties:
        title:
          type: string
          example: 'Won'
        sort:
          type: integer
          example: 10

    EventCallList:
      type: array
      items:
        type: object
        properties:
          id:
            type: integer
            example: 1
          task_id:
            type: integer
            example: 1
          contact_id:
            type: integer
            example: null
          company_id:
            type: integer
            example: null
          deal_id:
            type: integer
            example: 1
          lead_id:
            type: integer
            example: null
          entity_table:
            type: string
            example: deals
          subject:
            type: string
            example: Sales contract negotiation
          call_type:
            type: string
            example: incoming
            enum:
              - outgoing
              - incoming
          ended_call_status:
            type: string
            example: missed
            enum:
              - null
              - success
              - missed
              - declined
              - subscriber_unavailable
              - number_not_exist
              - call_failure
          from:
            type: string
            example: 380632232232
          to:
            type: string
            example: 380632232232
          begin_time:
            type: integer
            example: 1681893335
          end_time:
            type: integer
            example: 1681893685
          duration:
            type: integer
            example: 350
          call_record_link:
            type: string
            example: null
          note:
            type: string
            example: Call from the client
          integration_code:
            type: string
            example: unitalk_integration
          external_id:
            type: integer
            example: null
            description: Non-required. Used for communication with integrations
          tmp_id:
            type: integer
            example: null
            description: Non-required. Used for communication with integrations
          contacts:
            items:
              $ref: '#/components/schemas/CallEventContacts'
            type: array
          companies:
            type: array
            example: [ ]
            description: Having same format as contacts field. Or could be empty array
          employees:
            type: array
            description: Employees that have been dialed during the call. Could be omitted if don't have such information
            example: [ 1, 2, 3 ]
          tasks:
            type: object
            description: The task data for provided task_id
            properties:
              id:
                type: integer
                example: 1
              title:
                type: string
                example: Missed call from 380667654321

    CallEventDto:
      type: object
      properties:
        integration_code:
          type: string
          example: unitalk_integration
          description: It could be integration_code or unique code of source where data are imported from
        external_id:
          type: integer
          example: 1
          description: It should be unique for one particular integration_code or null if adding call event directly (e.g. import)
        tmp_id:
          type: integer
          example: 1
          description: It should be unique for one particular integration_code or null if adding call event directly (e.g. import)
        task_id:
          type: integer
          example: null
          description: If task_id is provided the task's creation for missed incoming call is passing away
        contact_id:
          type: integer
          example: null
          description: If one of dynamic binding fields (deal_id, lead_id, contact_id, company_id) is provided
            the automatic binding with existing crm entities is passing away
        company_id:
          type: integer
          example: null
          description: If one of dynamic binding fields (deal_id, lead_id, contact_id, company_id) is provided
            the automatic binding with existing crm entities is passing away
        lead_id:
          type: integer
          example: null
          description: If one of dynamic binding fields (deal_id, lead_id, contact_id, company_id) is provided
            the automatic binding with existing crm entities is passing away
        deal_id:
          type: integer
          example: null
          description: If one of dynamic binding fields (deal_id, lead_id, contact_id, company_id) is provided
            the automatic binding with existing crm entities is passing away
        entity_table:
          type: string
          description: The base entity the call event connected to could be provided or could be omitted in a case
            if just have usual call. In this the "empty" value will be automatically filled and
            the call event will be shown just in call logs history
          enum:
            - empty
            - leads,
            - deals
            - contacts
            - companies
        employees:
          type: array
          description: Employees that have been dialed during the call. Could be omitted if don't have such information
          example: [ 1, 2, 3 ]
        contacts:
          type: array
          description: The contacts that have connection with particulat call event. Could be omitted if don't have such information
          example: [ 1, 2, 3 ]
        companies:
          type: array
          description: The companies that have connection with particulat call event. Could be omitted if don't have such information
          example: [ 1, 2, 3 ]
        subject:
          type: string
          example: First call
          description: Could be omitted. In such case the default value will be "Call"
        call_type:
          type: string
          enum:
            - outgoing
            - incoming
        ended_call_status:
          type: string
          enum:
            - null
            - success
            - missed
            - declined
            - subscriber_unavailable
            - number_not_exist
            - call_failure
        from:
          type: string
          example: 380632232232
        to:
          type: string
          example: null
          description: Could be null cause on new event call from telephony we don't have "to" value for sure
        begin_time:
          type: integer
          example: 1681893335
        end_time:
          type: integer
          example: 1681893685
        duration:
          type: integer
          example: 350
        call_record_link:
          type: string
          example: null
          description: It could be call link that telephony provides or link issued by import flow (via files-backend)
        note:
          type: string
          example: Fixed agenda
      required:
        - integration_code
        - call_type
        - from


    CallEventContacts:
      properties:
        id:
          example: 1
          type: integer
        title:
          example: George Everest
          type: string
      type: object

    ProductCategory:
      properties:
        id:
          type: integer
          example: 2
        parent_id:
          type: integer
          example: 1
        name:
          type: string
          example: Main category
        is_active:
          type: boolean
          example: true
        created_at:
          type: integer
          example: 12156465
        updated_at:
          type: integer
          example: 12156465
        child_categories:
          type: array
          items:
            $ref: '#/components/schemas/ProductCategory'

    ProductCategoryDto:
      properties:
        parent_id:
          type: integer
          example: 1
        name:
          type: string
          example: Laptops
        is_active:
          type: boolean
          example: true

    MeasurementUnit:
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: Kilograms
        abbr:
          type: string
          example: Kg
        is_default:
          type: boolean
          example: true

    ProductPrice:
      properties:
        id:
          type: integer
          example: 1
        price:
          type: integer
          example: 10000
        currency:
          type: string
          example: USD
        is_default:
          type: boolean
          example: true
        tax:
          $ref: '#/components/schemas/Tax'

    DocumentTemplate:
      type: object
      properties:
        name:
          type: string
          required: true
        is_active:
          type: boolean
          required: true
        code:
          type: string
          required: true
        id:
          type: number
          required: true
        disabled:
          type: boolean
          required: true
        file:
          type: object
          properties:
            name:
              type: string
            size:
              type: string
            extension:
              type: string
            download_link:
              type: string
        binding_entities:
          type: array
          items:
            type: object
            properties:
              entity_id:
                type: number
                required: true
                example: 123
              funnels:
                type: array
                items:
                  type: number
                  example: 1
        access:
          type: object
          properties:
            departments:
              type: array
              items:
                description: Department id
                type: integer
            users:
              type: array
              items:
                description: User id
                type: integer
        numerator_id:
          type: integer
          required: true
        created_at:
          type: string
        updated_at:
          type: string
        created_by:
          type: integer
          description: User who created
        updated_by:
          type: integer
          description: User who updated
    CreateDocumentTemplate:
      type: object
      properties:
        name:
          type: string
          required: true
        is_active:
          type: boolean
          required: true
        file:
          type: string
          format: binary
        binding_entities:
          type: array
          items:
            type: object
            properties:
              entity_id:
                type: number
                required: true
                example: 123
              funnels:
                type: array
                items:
                  type: number
                  example: 1
        access:
          type: object
          properties:
            departments:
              type: array
              items:
                description: Department id
                type: integer
            users:
              type: array
              items:
                description: User id
                type: integer
        numerator_id:
          type: integer
          required: true
    UpdateDocumentTemplate:
      type: object
      properties:
        name:
          type: string
        is_active:
          type: boolean
        file:
          type: string
          format: binary
        binding_entities:
          type: array
          items:
            type: object
            properties:
              entity_id:
                type: number
                required: true
                example: 123
              funnels:
                type: array
                items:
                  type: number
                  example: 1
        access:
          type: object
          properties:
            departments:
              type: array
              items:
                description: Department id
                type: integer
            users:
              type: array
              items:
                description: User id
                type: integer
        numerator_id:
          type: integer
          required: true
    DocumentTemplateFilterEntity:
      type: object
      properties:
        for_all_users:
          type: boolean
        display_in_menu:
          type: boolean
        kanban:
          type: boolean
        is_static:
          type: boolean
        table_name:
          type: string
        funnels:
          type: array
        title:
          type: string
          required: true
        title_singular:
          type: string
        type:
          type: string
          required: true
        updated_at:
          type: number
          required: true
          description: Updated at in timestamp format
    DocumentTemplateField:
      type: object
      properties:
        name:
          type: string
          example: 'Дата створення'
        entity:
          type: string
          example: 'Угоди'
        symbol_code:
          type: string
          example: '{DealDateCreate}'
    CreateDocument:
      type: object
      properties:
        entity_type:
          type: string
          required: true
          example: 'leads'
        entity_id:
          type: integer
          required: true
          example: '3425'
        template_id:
          type: integer
          required: true
          example: 2
    Document:
      type: object
      properties:
        name:
          type: string
          required: true
          example: 'Рахунок на оплату 05.07.23 №1'
          description: Template name + document number
        template_id:
          type: number
          required: true
        created_date:
          type: string
          required: true
          example: '2023-09-21'
        updated_date:
          type: string
          required: true
          example: '2023-09-21'
        from_date:
          type: number
          required: true
          description: Custom edition date, default = dateCreated in timestamp
        requisite:
          $ref: '#/components/schemas/Requisite'
        bank_requisite:
          $ref: '#/components/schemas/BankRequisite'
        files:
          type: array
          items:
            type: object
            properties:
              extension:
                type: string
                enum: [ pdf, docx ]
                description: New formats will be added in the future
                example: 'pdf'
              file:
                type: number
                required: true
                description: id of file
        number:
          type: string
          description: Editing number of document
        sign:
          type: boolean
          default: false
          description: Signature and seal
        created_by:
          type: integer
          description: User who created
        updated_by:
          type: integer
          description: User who updated
    ValidationError:
      type: object
      properties:
        errors:
          type: array
          items:
            type: string
    BankRequisite:
      type: object
      properties:
        id:
          type: number
        created_by:
          type: number
        requisite_id:
          type: number
          required: true
        name:
          type: string
        is_basic:
          type: boolean
        fields:
          type: object
          properties:
            list:
              type: array
              items:
                allOf:
                  - $ref: '#/components/schemas/Field'
                  - type: object
                    properties:
                      type:
                        type: string
                        enum: [ string ]
            values:
              type: object
              properties:
                field_code:
                  enum: [ string, array, object ]
                  description: Field code => field value
        references_relations:
          type: array
          items:
            type: number
            description: Id of parent entity where requisite attach to child entity
    CreateRequisite:
      type: object
      properties:
        name:
          type: string
        template_id:
          type: integer
        is_basic:
          type: boolean
        fields:
          type: object
          properties:
            field_code:
              enum: [ string, array, object ]
              description: Field code => field value
        bank_requisites:
          type: array
          items:
            $ref: '#/components/schemas/BankRequisite'
    Region:
      type: object
      properties:
        name:
          type: string
        code:
          type: string
        image:
          type: number
        id:
          type: number
    Requisite:
      type: object
      properties:
        name:
          type: string
        seal_picture:
          type: number
        sign_picture:
          type: number
        template_name:
          type: string
        references_relations:
          type: array
          items:
            type: number
            description: Id of parent entity where requisite attach to child entity
        is_basic:
          type: boolean
        id:
          type: number
        template_id:
          type: integer
        region:
          $ref: '#/components/schemas/Region'
        fields:
          description: Fields list
          type: object
          properties:
            list:
              type: array
              items:
                allOf:
                  - $ref: '#/components/schemas/Field'
                  - type: object
                    properties:
                      type:
                        type: string
                        enum: [ datetime, string, integer, boolean, file ]

            values:
              type: object
              properties:
                field_code:
                  enum: [ string, array, object ]
                  description: Field code => field value
        bank_requisites:
          type: array
          items:
            $ref: '#/components/schemas/BankRequisite'

    RequisiteTemplate:
      type: object
      properties:
        name:
          type: string
          example: Name of requisite
        region:
          type: object
          properties:
            name:
              type: string
            code:
              type: string
        fields:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Field'
              - type: object
                properties:
                  type:
                    type: string
                    enum: [ datetime, string, integer, boolean, file ]



    Product:
      properties:
        id:
          type: integer
          example: 1
        product_category_id:
          type: integer
          example: 1
        measurement_unit_id:
          type: integer
          example: 1
        title:
          type: string
          example: Some laptop
        article:
          type: string
          example: ART 123456789
        type:
          type: string
          example: goods
          enum:
            - goods
            - service
        is_active:
          type: boolean
          example: true
        availability:
          type: string
          example: available
          enum:
            - available
            - not_available
            - pending
        quantity:
          type: number
          example: 1.0001
        reserved_quantity:
          type: number
          example: 0.0001
        description:
          type: string
          example: Some product description
        comment:
          type: string
          example: Some product comment
        link:
          type: string
          example: 'www.youtube.com/some_link'
        created_at:
          type: integer
          example: 12156465
        updated_at:
          type: integer
          example: 12156465
        product_category:
          $ref: '#/components/schemas/ProductCategory'
        measurement_unit:
          $ref: '#/components/schemas/MeasurementUnit'
        prices:
          type: array
          items:
            $ref: '#/components/schemas/ProductPrice'
        files:
          $ref: '#/components/schemas/Files'

    Tax:
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: NDS
        rate:
          type: number
          example: 25.5
        is_active:
          type: boolean

    EntityProductList:
      properties:
        id:
          type: integer
        entity_type:
          type: string
          example: deals
        entity_id:
          type: integer
          example: 2
        is_automatic_calculation:
          type: boolean
        amount_before_discount_and_tax:
          type: integer
        amount_discount:
          type: integer
        amount_tax:
          type: integer
        amount_before_tax:
          type: integer
        amount_total:
          type: integer
        list_products:
          type: array
          items:
            $ref: '#/components/schemas/ListProduct'

    ListProduct:
      properties:
        id:
          type: integer
        entity_product_list_id:
          type: integer
        product_id:
          type: integer
        title:
          type: string
          example: 'Macbook air 15 24gb'
        price:
          type: integer
          example: 2000000
        currency:
          type: string
          example: 'USD'
        quantity:
          type: number
          example: 5
        measurement_unit_abbr:
          type: string
          example: 'psc'
        discount_value:
          type: number
          example: 25
        discount_type:
          type: string
          enum:
            - relative
            - absolute
        discount_price:
          type: integer
          example: 5000
        tax_rate:
          type: number
          example: 20.5
        is_tax_included:
          type: boolean
        amount:
          type: integer
          example: 1500
        product:
          $ref: '#/components/schemas/Product'

    # crm end


    # search begin
    SearchDepartment:
      properties:
        headId:
          example: "41"
          type: string
        id:
          example: 1
          type: integer
        name:
          example: Відділ продукту
          type: string
      type: object

    SearchGroup:
      properties:
        description:
          example: <b>need use swagger-ui@4.x</b>
          type: string
        id:
          example: 1231
          type: integer
        logo:
          example: https://uspacy-stage-s3-bucket.s3.eu-west-1.amazonaws.com/02/c4/02c46a2bdffc39bd2cdb8582e4afe3bc.jpg
          type: string
        name:
          example: Describe swagger api for
          type: string
      type: object

    SearchNewsfeed:
      properties:
        id:
          example: 1231
          type: integer
        message:
          example: <b>need use swagger-ui@4.x</b>
          type: string
        title:
          example: Describe swagger api for
          type: string
      type: object

    SearchTask:
      properties:
        body:
          example: <b>need use swagger-ui@4.x</b>
          type: string
        deadline:
          example: 1654180120
          type: integer
        id:
          example: 1231
          type: integer
        responsibleId:
          example: 223
          type: integer
        title:
          example: Describe swagger api for
          type: string
      type: object

    SearchUser:
      properties:
        id:
          example: 1
          type: integer
      type: object

    SearchResponse:
      properties:
        data:
          properties:
            departments:
              items:
                $ref: '#/components/schemas/SearchDepartment'
              type: array
            groups:
              items:
                $ref: '#/components/schemas/SearchGroup'
              type: array
            newsfeed:
              items:
                $ref: '#/components/schemas/SearchNewsfeed'
              type: array
            tasks:
              items:
                $ref: '#/components/schemas/SearchTask'
              type: array
            users:
              items:
                $ref: '#/components/schemas/SearchUser'
              type: array
          type: object
      type: object


    # search end

    # apps begin
    App:
      type: array
      items:
        type: object
        properties:
          id:
            type: integer
            example: 3
          name:
            type: string
            example: Unitalk telelephony
          code:
            type: string
            example: unitalk_integration
          short_description:
            type: string
            example: Take customer interaction to the next level with industry-leading telephony capabilities
          position:
            type: string
            example: CTO
          description:
            type: string
            example: null
          logo:
            type: string
            example: bb/d6/bbd61f630cfebb0aaca6c90bd2a57eb7.svg
          active:
            type: boolean
            example: true
          paid:
            type: boolean
            example: false
          price:
            type: string
            example: null
          developer_name:
            type: string
            example: Mahoney
          developer_link:
            type: string
            example: null

    CreateUpdateAppDto:
      type: object
      properties:
        name:
          type: string
          example: Unitalk telelephony
        code:
          type: string
          example: unitalk_integration
        short_description:
          type: string
          example: Take customer interaction to the next level with industry-leading telephony capabilities
        redirect_url:
          type: string
          example: http://localhost:8080
        callback_url:
          type: string
          example: http://localhost:8080
        developer_name:
          type: string
          example: Mahoney
        developer_link:
          type: string
          example: https://blue-oyster.org
    # apps end
